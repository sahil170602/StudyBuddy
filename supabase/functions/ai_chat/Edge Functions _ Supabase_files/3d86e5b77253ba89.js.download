;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="006dc498-2b3b-fd90-dcdc-96d9ee28f534")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,768820,e=>{"use strict";var s=e.i(478902),i=e.i(55956),t=e.i(867637),r=e.i(416050),a=e.i(17203),n=e.i(833655),o=e.i(896975),d=e.i(405554),l=e.i(215261),c=e.i(389959),u=e.i(902858);e.i(128328);var h=e.i(657588),m=e.i(158639),p=e.i(743371),x=e.i(524421),f=e.i(637371),j=e.i(196621),g=e.i(509926),v=e.i(167892),b=e.i(567558),y=e.i(215312),_=e.i(642834),N=e.i(147545),P=e.i(193),S=e.i(377451),A=e.i(164045),C=e.i(540203),I=e.i(144676),k=e.i(912793),w=e.i(265735),T=e.i(635494),D=e.i(965371),R=e.i(10429),E=e.i(837508),$=e.i(48189),U=e.i(238944);let L=["pitr","customDomain","ipv4"];function B(){let[{panel:e},s]=(0,U.useUrlState)({replace:!0});return{panel:L.find(s=>s===e),setPanel:e=>{s({panel:e})},closePanel:()=>{s({panel:void 0})}}}var z=e.i(93472),O=e.i(206413),H=e.i(592360),M=e.i(178527),Q=e.i(837710),W=e.i(871895),F=e.i(355901),Y=e.i(38429),G=e.i(356003),V=e.i(234745),q=e.i(795513);async function K({projectRef:e,variant:s}){if(!e)throw Error("projectRef is required");if(!s)throw Error("variant is required");let{data:i,error:t}=await (0,V.del)("/platform/projects/{ref}/billing/addons/{addon_variant}",{params:{path:{ref:e,addon_variant:s}}});return t&&(0,V.handleError)(t),i}let X=({onSuccess:e,onError:s,...i}={})=>{let t=(0,G.useQueryClient)();return(0,Y.useMutation)({mutationFn:e=>K(e),async onSuccess(s,i,r){let{projectRef:a}=i;await t.invalidateQueries({queryKey:q.subscriptionKeys.addons(a)}),await e?.(s,i,r)},async onError(e,i,t){void 0===s?F.toast.error(`Failed to remove addon: ${e.message}`):s(e,i,t)},...i})};var J=e.i(192327),Z=e.i(280590),ee=e.i(2579),es=e.i(247114),ei=e.i(539013),et=e.i(843778);let er=()=>{let{ref:e}=(0,m.useParams)(),{data:i}=(0,w.useSelectedOrganizationQuery)(),r=(0,h.useFlag)("customDomainsDisabledDueToQuota"),[n,o]=(0,c.useState)("cd_none"),{can:d}=(0,ee.useAsyncCheckPermissions)(u.PermissionAction.BILLING_WRITE,"stripe.subscriptions"),{panel:p,closePanel:x}=B(),f="customDomain"===p,{data:j,isPending:g}=(0,I.useProjectAddonsQuery)({projectRef:e}),{mutate:v,isPending:b}=(0,J.useProjectAddonUpdateMutation)({onSuccess:()=>{F.toast.success("Successfully enabled custom domain"),x()},onError:e=>{F.toast.error(`Unable to enable custom domain: ${e.message}`)}}),{mutate:y,isPending:_}=X({onSuccess:()=>{F.toast.success("Successfully disabled custom domain"),x()},onError:e=>{F.toast.error(`Unable to disable custom domain: ${e.message}`)}}),N=b||_,P=(j?.selected_addons??[]).find(e=>"custom_domain"===e.type),S=(j?.available_addons??[]).find(e=>"custom_domain"===e.type)?.variants??[],{hasAccess:A,isLoading:C}=(0,Z.useCheckEntitlements)("custom_domain"),k=n!==(P?.variant.identifier??"cd_none"),T=S.find(e=>e.identifier===n);(0,c.useEffect)(()=>{f&&(void 0!==P?o(P.variant.identifier):o("cd_none"))},[f,g]);let D=async()=>{if(!e)return console.error("Project ref is required");"cd_none"===n&&void 0!==P?y({projectRef:e,variant:P.variant.identifier}):v({projectRef:e,type:"custom_domain",variant:n})};return(0,s.jsx)(ei.SidePanel,{size:"large",visible:f,onCancel:x,onConfirm:D,loading:g||N||C,disabled:!A||C||g||!k||N||!d||void 0===P&&r,tooltip:A?d?void 0:"You do not have permission to update custom domain":"Unable to enable custom domain on a Free Plan",header:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{children:"Custom domains"}),(0,s.jsx)(Q.Button,{asChild:!0,type:"default",icon:(0,s.jsx)(a.ExternalLink,{strokeWidth:1.5}),children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/custom-domains`,target:"_blank",rel:"noreferrer",children:"About custom domains"})})]}),children:(0,s.jsx)(ei.SidePanel.Content,{children:(0,s.jsxs)("div",{className:"py-6 space-y-4",children:[void 0===P&&void 0!==T&&r&&(0,s.jsxs)(M.Alert_Shadcn_,{variant:"default",className:"mb-2",children:[(0,s.jsx)(t.AlertCircle,{className:"h-4 w-4"}),(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"Adding new custom domains temporarily disabled"}),(0,s.jsx)(O.AlertDescription_Shadcn_,{className:"flex flex-col gap-3",children:"We are working with our upstream DNS provider before we are able to sign up new custom domains. Please check back in a few hours."})]}),(0,s.jsxs)("p",{className:"text-sm",children:["Custom domains allow you to present a branded experience to your users. You may set up your custom domain in the"," ",(0,s.jsx)(l.default,{href:`/project/${e}/settings/general`,className:"text-brand",children:"General Settings"})," ","page after enabling the add-on."]}),(0,s.jsx)("div",{className:(0,et.cn)("!mt-8 pb-4",!A&&"opacity-75"),children:(0,s.jsxs)(es.Radio.Group,{type:"large-cards",size:"tiny",id:"custom-domain",onChange:e=>o(e.target.value),children:[(0,s.jsx)(es.Radio,{name:"custom-domain",checked:"cd_none"===n,className:"col-span-4 !p-0",label:"No custom domain",value:"cd_none",children:(0,s.jsxs)("div",{className:"w-full group",children:[(0,s.jsx)("div",{className:"border-b border-default px-4 py-2 group-hover:border-control",children:(0,s.jsx)("p",{className:"text-sm",children:"No custom domain"})}),(0,s.jsxs)("div",{className:"px-4 py-2",children:[(0,s.jsx)("p",{className:"text-foreground-light",children:"Use the default supabase domain for your API"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,s.jsx)("p",{className:"text-foreground text-sm",translate:"no",children:"$0"}),(0,s.jsx)("p",{className:"text-foreground-light translate-y-[1px]",children:" / month"})]})]})]})}),S.map(e=>(0,s.jsx)(es.Radio,{className:"col-span-4 !p-0",name:"custom-domain",disabled:!A,checked:n===e.identifier,label:e.name,value:e.identifier,children:(0,s.jsxs)("div",{className:"w-full group",children:[(0,s.jsx)("div",{className:"border-b border-default px-4 py-2 group-hover:border-control",children:(0,s.jsx)("p",{className:"text-sm",children:e.name})}),(0,s.jsxs)("div",{className:"px-4 py-2",children:[(0,s.jsx)("p",{className:"text-foreground-light",children:"Present a branded experience to your users"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,s.jsx)("p",{className:"text-foreground text-sm",translate:"no",children:(0,$.formatCurrency)(e.price)}),(0,s.jsx)("p",{className:"text-foreground-light translate-y-[1px]",children:" / month"})]})]})]})},e.identifier))]})}),k&&"cd_none"!==n&&(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no immediate charges. The addon is billed at the end of your billing cycle based on your usage and prorated to the hour."}),!A&&(0,s.jsx)(z.Alert,{withIcon:!0,variant:"info",title:"Custom domains are unavailable on the Free Plan",actions:(0,s.jsx)(Q.Button,{asChild:!0,type:"default",children:(0,s.jsx)(l.default,{href:`/org/${i?.slug}/billing?panel=subscriptionPlan&source=customDomainSidePanel`,children:"View available plans"})}),children:"Upgrade your plan to add a custom domain to your project"})]})})})};var ea=e.i(937942),en=e.i(710483);let eo=()=>{let e=(0,T.useIsAwsCloudProvider)(),{ref:i}=(0,m.useParams)(),{data:t}=(0,w.useSelectedOrganizationQuery)(),[r,n]=(0,c.useState)("ipv4_none"),{can:o}=(0,ee.useAsyncCheckPermissions)(u.PermissionAction.BILLING_WRITE,"stripe.subscriptions"),{panel:d,closePanel:h}=B(),p="ipv4"===d,{data:x,isPending:f}=(0,I.useProjectAddonsQuery)({projectRef:i}),{mutate:j,isPending:g}=(0,J.useProjectAddonUpdateMutation)({onSuccess:()=>{F.toast.success("Successfully enabled IPv4"),h()},onError:e=>{F.toast.error(`Unable to enable IPv4: ${e.message}`)}}),{mutate:v,isPending:b}=X({onSuccess:()=>{F.toast.success("Successfully disabled IPv4."),h()},onError:e=>{F.toast.error(`Unable to disable IPv4: ${e.message}`)}}),y=g||b,_=(x?.selected_addons??[]).find(e=>"ipv4"===e.type),N=(x?.available_addons??[]).find(e=>"ipv4"===e.type)?.variants??[],P=t?.plan?.id==="free",{hasAccess:S,isLoading:A}=(0,Z.useCheckEntitlements)("ipv4"),C=r!==(_?.variant.identifier??"ipv4_none"),k=N.find(e=>e.identifier===r);(0,c.useEffect)(()=>{p&&(void 0!==_?n(_.variant.identifier):n("ipv4_none"))},[p,f]);let D=async()=>{if(!i)return console.error("Project ref is required");"ipv4_none"===r&&void 0!==_?v({projectRef:i,variant:_.variant.identifier}):j({projectRef:i,type:"ipv4",variant:r})};return(0,s.jsx)(ei.SidePanel,{size:"large",visible:p,onCancel:h,onConfirm:D,loading:f||y||A,disabled:!S||A||f||!C||y||!o||!e,tooltip:S?o?void 0:"You do not have permission to update IPv4":"Unable to enable IPv4 on a Free Plan",header:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{children:"Dedicated IPv4 address"}),(0,s.jsx)(Q.Button,{asChild:!0,type:"default",icon:(0,s.jsx)(a.ExternalLink,{strokeWidth:1.5}),children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/ipv4-address`,target:"_blank",rel:"noreferrer",children:"About dedicated IPv4 addresses"})})]}),children:(0,s.jsx)(ei.SidePanel.Content,{children:(0,s.jsxs)("div",{className:"py-6 space-y-4",children:[(0,s.jsx)("p",{className:"text-sm",children:"Direct connections to the database only work if your client is able to resolve IPv6 addresses. Enabling the dedicated IPv4 add-on allows you to directly connect to your database via a IPv4 address."}),!e&&(0,s.jsx)(en.Admonition,{type:"default",title:"Dedicated IPv4 address is only available for AWS projects"}),P?(0,s.jsxs)("p",{className:"text-sm",children:["If you are connecting via the Shared connection pooler, you do not need this add-on as our pooler resolves to IPv4 addresses. You can check your connection info in your"," ",(0,s.jsx)(ea.InlineLink,{href:`/project/${i}/database/settings#connection-pooler`,children:"project database settings"}),"."]}):(0,s.jsx)(en.Admonition,{type:"default",title:"The Dedicated Pooler does not support IPv4 addresses",description:"If you are connecting to your database via the Dedicated Pooler, you may need this add-on if your network does not support communicating via IPv6. Alternatively, you may consider using our Shared Pooler."}),(0,s.jsx)("div",{className:(0,et.cn)("!mt-8 pb-4",!S&&"opacity-75"),children:(0,s.jsxs)(es.Radio.Group,{type:"large-cards",size:"tiny",id:"ipv4",onChange:e=>n(e.target.value),children:[(0,s.jsx)(es.Radio,{name:"ipv4",checked:"ipv4_none"===r,className:"col-span-4 !p-0",label:"No IPv4",value:"ipv4_none",children:(0,s.jsxs)("div",{className:"w-full group",children:[(0,s.jsx)("div",{className:"border-b border-default px-4 py-2 group-hover:border-control",children:(0,s.jsx)("p",{className:"text-sm",children:"No IPv4 address"})}),(0,s.jsxs)("div",{className:"px-4 py-2 flex flex-col justify-between",children:[(0,s.jsx)("p",{className:"text-foreground-light",children:"Use connection pooler or IPv6 for direct connections"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,s.jsx)("p",{className:"text-foreground text-sm",children:"$0"}),(0,s.jsx)("p",{className:"text-foreground-light translate-y-[1px]",children:" / month"})]})]})]})}),N.map(i=>(0,s.jsx)(es.Radio,{className:"col-span-4 !p-0",name:"ipv4",disabled:!S||!e,checked:r===i.identifier,label:i.name,value:i.identifier,children:(0,s.jsxs)("div",{className:"w-full group",children:[(0,s.jsx)("div",{className:"border-b border-default px-4 py-2 group-hover:border-control",children:(0,s.jsx)("p",{className:"text-sm",children:"Dedicated IPv4 address"})}),(0,s.jsxs)("div",{className:"px-4 py-2",children:[(0,s.jsx)("p",{className:"text-foreground-light",children:"Allow direct database connections via IPv4 address"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,s.jsx)("p",{className:"text-foreground text-sm",translate:"no",children:(0,$.formatCurrency)(i.price)}),(0,s.jsx)("p",{className:"text-foreground-light translate-y-[1px]",children:"/ month / database"})]})]})]})},i.identifier))]})}),C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en.Admonition,{type:"note",title:"Potential downtime",description:"There might be some downtime when enabling the add-on since some DNS clients might have cached the old DNS entry. Generally, this should be less than a minute."}),"ipv4_none"!==r&&(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["By default, this is only applied to the Primary database for your project. If"," ",(0,s.jsx)(l.default,{href:"/docs/guides/platform/read-replicas",className:"text-brand",target:"_blank",children:"Read replicas"})," ","are used, each replica also gets its own IPv4 address, with a corresponding"," ",(0,s.jsx)("span",{className:"text-foreground",children:(0,$.formatCurrency)(k?.price)})," ","charge."]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no immediate charges. The addon is billed at the end of your billing cycle based on your usage and prorated to the hour."})]}),!S&&(0,s.jsxs)(en.Admonition,{type:"note",title:"IPv4 add-on is unavailable on the Free Plan",children:[(0,s.jsx)("p",{children:"Upgrade your plan to enable a IPv4 address for your project"}),(0,s.jsx)(Q.Button,{asChild:!0,type:"default",children:(0,s.jsx)(l.default,{href:`/org/${t?.slug}/billing?panel=subscriptionPlan&source=ipv4SidePanel`,children:"View available plans"})})]})]})})})};var ed=e.i(235458),el=e.i(877555);let ec=[{id:"off",name:"Disable PITR",imageUrl:`${R.BASE_PATH}/img/pitr-off.svg?v=2`,imageUrlLight:`${R.BASE_PATH}/img/pitr-off--light.svg?v=2`},{id:"on",name:"Enable PITR",imageUrl:`${R.BASE_PATH}/img/pitr-on.svg?v=2`,imageUrlLight:`${R.BASE_PATH}/img/pitr-on--light.svg?v=2`}],eu=()=>{let{ref:e}=(0,m.useParams)(),{resolvedTheme:i}=(0,o.useTheme)(),{data:t}=(0,T.useSelectedProjectQuery)(),{data:r}=(0,w.useSelectedOrganizationQuery)(),{data:n}=(0,S.useProjectSettingsV2Query)({projectRef:e}),[d,h]=(0,c.useState)("off"),[x,f]=(0,c.useState)("pitr_0"),{can:g}=(0,ee.useAsyncCheckPermissions)(u.PermissionAction.BILLING_WRITE,"stripe.subscriptions"),v=t?.is_branch_enabled===!0||t?.parent_project_ref!==void 0,{panel:b,closePanel:y}=B(),_="pitr"===b,{data:N,isPending:P}=(0,I.useProjectAddonsQuery)({projectRef:e}),{data:A}=(0,C.useOrgSubscriptionQuery)({orgSlug:r?.slug}),k=(0,p.subscriptionHasHipaaAddon)(A)&&n?.is_sensitive,{mutate:D,isPending:E}=(0,J.useProjectAddonUpdateMutation)({onSuccess:()=>{F.toast.success("Successfully updated point in time recovery duration"),y()},onError:e=>{F.toast.error(`Unable to update PITR: ${e.message}`)}}),{mutate:U,isPending:L}=X({onSuccess:()=>{F.toast.success("Successfully disabled point in time recovery"),y()},onError:e=>{F.toast.error(`Unable to disable PITR: ${e.message}`)}}),z=E||L,W=N?.selected_addons??[],Y=N?.available_addons??[],G=W.find(e=>"compute_instance"===e.type),V=W.find(e=>"pitr"===e.type),q=Y.find(e=>"pitr"===e.type)?.variants??[],K=x!==(V?.variant.identifier??"pitr_0"),{hasAccess:er}=(0,Z.useCheckEntitlements)("pitr.available_variants"),ea=q.find(e=>e.identifier===x),en=!!G&&"ci_micro"!==G.variant.identifier,eo=k&&("on"!==d||ea?.identifier!=="pitr_28"),eu=async()=>{if(!e)return console.error("Project ref is required");"pitr_0"===x&&void 0!==V?U({projectRef:e,variant:V.variant.identifier}):D({projectRef:e,type:"pitr",variant:x})};return(0,c.useEffect)(()=>{_&&(void 0!==V?(h("on"),f(V.variant.identifier)):(h("off"),f("pitr_0")))},[_,P]),(0,s.jsx)(ei.SidePanel,{size:"xlarge",visible:_,onCancel:y,onConfirm:eu,loading:P||z,disabled:!er||P||!K||z||!g||!!ea&&!en||eo,tooltip:eo?"Unable to disable PITR with HIPAA add-on":er?g?void 0:"You do not have permission to update PITR":"Unable to enable point in time recovery on your Plan",header:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{children:"Point in Time Recovery"}),(0,s.jsx)(Q.Button,{asChild:!0,type:"default",icon:(0,s.jsx)(a.ExternalLink,{strokeWidth:1.5}),children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/backups#point-in-time-recovery`,target:"_blank",rel:"noreferrer",children:"About point in time recovery"})})]}),children:(0,s.jsx)(ei.SidePanel.Content,{children:(0,s.jsxs)("div",{className:"py-6 space-y-4",children:[(0,s.jsx)("p",{className:"text-sm",children:"Point-in-Time Recovery (PITR) allows a project to be backed up at much shorter intervals. This provides users an option to restore to any chosen point of up to seconds in granularity."}),(0,s.jsx)("div",{className:"!mt-8 pb-4",children:(0,s.jsx)("div",{className:"flex gap-3",children:ec.map(e=>{let t=d===e.id;return(0,s.jsxs)("div",{className:(0,et.cn)("col-span-3 group space-y-1",!er&&"opacity-75"),onClick:()=>{h(e.id),"off"===e.id?f("pitr_0"):V?.variant.identifier!==void 0?f(V.variant.identifier):k?f("pitr_28"):f("pitr_7")},children:[(0,s.jsx)("img",{alt:"Point-In-Time-Recovery",className:(0,et.cn)("relative rounded-xl transition border bg-no-repeat bg-center bg-cover cursor-pointer w-[160px] h-[96px]",t?"border-foreground":"border-foreground-muted opacity-50 group-hover:border-foreground-lighter group-hover:opacity-100"),width:160,height:96,src:i?.includes("dark")?e.imageUrl:e.imageUrlLight}),(0,s.jsx)("p",{className:(0,et.cn)("text-sm transition",t?"text-foreground":"text-foreground-light"),children:e.name})]},e.id)})})}),"off"===d&&void 0!==V&&v&&(0,s.jsxs)(M.Alert_Shadcn_,{variant:"warning",children:[(0,s.jsx)(el.CriticalIcon,{}),(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"Are you sure you want to disable this while using Branching?"}),(0,s.jsx)(O.AlertDescription_Shadcn_,{children:"Without PITR, you might not be able to recover lost data if you accidentally merge a branch that deletes a column or user data. We don't recommend this."})]}),eo?(0,s.jsxs)(M.Alert_Shadcn_,{children:[(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"PITR cannot be disabled on HIPAA projects"}),(0,s.jsx)(O.AlertDescription_Shadcn_,{children:"PITR is enabled by default for all HIPAA projects and cannot be turned off. Contact support for further assistance."}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(Q.Button,{type:"default",asChild:!0,children:(0,s.jsx)(j.SupportLink,{children:"Contact support"})})})]}):null,"on"===d&&(0,s.jsxs)("div",{className:"!mt-8 pb-4",children:[er?en?null:(0,s.jsx)(ed.UpgradeToPro,{className:"mb-4",addon:"computeSize",primaryText:"Project needs to be at least on a Small compute size to enable PITR",secondaryText:"This ensures enough resources to execute PITR successfully",featureProposition:"enable PITR"}):(0,s.jsx)(ed.UpgradeToPro,{className:"mb-4",addon:"pitr",primaryText:"Changing your Point-In-Time-Recovery is only available on the Pro Plan",secondaryText:"Upgrade your plan to change PITR for your project",featureProposition:"enable PITR"}),(0,s.jsx)(es.Radio.Group,{type:"large-cards",size:"tiny",id:"pitr",label:(0,s.jsx)("p",{className:"text-sm",children:"Choose the duration of recovery"}),onChange:e=>f(e.target.value),children:q.map(e=>(0,s.jsx)(es.Radio,{name:"pitr",disabled:!er||void 0===G,className:"col-span-4 !p-0",checked:x===e.identifier,label:(0,s.jsx)("span",{className:"text-sm",children:e.name}),value:e.identifier,children:(0,s.jsxs)("div",{className:"w-full group",children:[(0,s.jsx)("div",{className:"border-b border-default px-4 py-2",children:(0,s.jsx)("p",{className:"text-sm",children:e.name})}),(0,s.jsxs)("div",{className:"px-4 py-2",children:[(0,s.jsxs)("p",{className:"text-foreground-light",children:["Allow database restorations to any time up to"," ",e.identifier.split("_")[1]," days ago"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,s.jsx)("p",{className:"text-foreground text-sm",translate:"no",children:(0,$.formatCurrency)(e.price)}),(0,s.jsx)("p",{className:"text-foreground-light translate-y-[1px]",children:" / month"})]})]})]})},e.identifier))})]}),K&&"pitr_0"!==x&&(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no immediate charges. The addon is billed at the end of your billing cycle based on your usage and prorated to the hour."})]})})})},eh=()=>{let{resolvedTheme:e}=(0,o.useTheme)(),{ref:U}=(0,m.useParams)(),{setPanel:L}=B(),F=(0,g.useIsProjectActive)(),Y=(0,T.useIsOrioleDbInAws)(),{projectSettingsCustomDomains:G,projectAddonsDedicatedIpv4Address:V}=(0,k.useIsFeatureEnabled)(["project_settings:custom_domains","project_addons:dedicated_ipv4_address"]),{data:q}=(0,w.useSelectedOrganizationQuery)(),{data:K,isPending:X}=(0,T.useSelectedProjectQuery)(),{data:J}=(0,A.useProjectDetailQuery)({ref:K?.parent_project_ref}),Z=void 0!==J,{data:ee}=(0,S.useProjectSettingsV2Query)({projectRef:U}),{data:es}=(0,C.useOrgSubscriptionQuery)({orgSlug:q?.slug}),ei=(0,h.useFlag)("disableProjectCreationAndUpdate"),et=(0,p.subscriptionHasHipaaAddon)(es)&&ee?.is_sensitive,ea=(0,D.getCloudProviderArchitecture)(K?.cloud_provider),en=(0,$.getDatabaseMajorVersion)(K?.dbVersion??"")>14||(0,$.getSemanticVersion)(K?.dbVersion??"")>=141044,ed=(0,c.useMemo)(()=>(0,i.default)().subtract(15,"minutes").millisecond(0).toISOString(),[]),el=(0,c.useMemo)(()=>(0,i.default)().millisecond(0).toISOString(),[]),{data:ec}=(0,P.useInfraMonitoringAttributesQuery)({projectRef:U,attributes:["disk_io_budget"],interval:"5m",startDate:ed,endDate:el}),eh=(0,c.useMemo)(()=>{if(!ec)return;let e=(0,N.mapResponseToAnalyticsData)(ec,["disk_io_budget"]),s=e.disk_io_budget?.data;if(!s?.length)return;let i=s[s.length-1];return{disk_io_budget:i?.disk_io_budget}},[ec]),{data:em,error:ep,isPending:ex,isError:ef,isSuccess:ej}=(0,I.useProjectAddonsQuery)({projectRef:U}),eg=em?.selected_addons??[],{computeInstance:ev,pitr:eb,customDomain:ey,ipv4:e_}=(0,p.getAddons)(eg),eN=(0,c.useMemo)(()=>{let e=ev?.variant?.meta;return e||K?.infra_compute_size!=="nano"?K?.infra_compute_size==="micro"?E.INSTANCE_MICRO_SPECS:e:E.INSTANCE_NANO_SPECS},[K,ev]),eP=ee?.db_ip_addr_config==="ipv6";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ScaffoldDivider,{}),Z&&(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(M.Alert_Shadcn_,{variant:"default",className:"mt-6",children:[(0,s.jsx)(t.AlertCircle,{strokeWidth:2}),(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"You are currently on a preview branch of your project"}),(0,s.jsxs)(O.AlertDescription_Shadcn_,{children:["Updating addons here will only apply to this preview branch. To manage your addons, for your main branch, please visit the"," ",(0,s.jsx)(l.default,{href:`/project/${J.ref}/settings/general`,className:"text-brand",children:"main branch"}),"."]})]})}),ex&&(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsx)(v.ScaffoldSection,{children:(0,s.jsx)("div",{className:"col-span-12",children:(0,s.jsx)(_.GenericSkeletonLoader,{})})})}),ef&&(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsx)(v.ScaffoldSection,{children:(0,s.jsx)("div",{className:"col-span-12",children:(0,s.jsx)(b.default,{error:ep,subject:"Failed to retrieve project addons"})})})}),ej&&(0,s.jsxs)(s.Fragment,{children:[K?.infra_compute_size==="nano"&&es?.plan.id!=="free"&&(0,s.jsx)(v.ScaffoldContainer,{className:"mt-4",children:(0,s.jsxs)(M.Alert_Shadcn_,{variant:"default",children:[(0,s.jsx)(n.Info,{strokeWidth:2}),(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"Free compute upgrade to Micro"}),(0,s.jsx)(O.AlertDescription_Shadcn_,{children:"Paid Plans include a free upgrade to Micro compute. Your project is ready to upgrade for no additional charges."})]})}),(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(v.ScaffoldSection,{children:[(0,s.jsx)(v.ScaffoldSectionDetail,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"m-0",children:"Compute Size"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/compute-add-ons`,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,s.jsx)("p",{className:"text-sm m-0",children:"About compute add-ons"}),(0,s.jsx)(a.ExternalLink,{size:16,strokeWidth:1.5})]})})}),(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/database/connecting-to-postgres#connection-pooler`,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,s.jsx)("p",{className:"text-sm m-0",children:"Connection Pooler"}),(0,s.jsx)(a.ExternalLink,{size:16,strokeWidth:1.5})]})})})]})]})}),(0,s.jsx)(v.ScaffoldSectionContent,{children:(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"rounded-md bg-surface-100 border border-muted w-[160px] h-[96px] overflow-hidden",children:(0,s.jsx)(d.default,{alt:"Compute size",width:160,height:96,src:["nano","micro"].includes(K?.infra_compute_size||"micro")?`${R.BASE_PATH}/img/optimized-compute-off${e?.includes("dark")?"":"--light"}.svg`:`${R.BASE_PATH}/img/optimized-compute-on${e?.includes("dark")?"":"--light"}.svg`})})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Current option:"}),ex||void 0===ev&&X?(0,s.jsx)(_.default,{className:"w-32"}):(0,s.jsx)("div",{className:"flex py-3",children:(0,s.jsx)(W.ComputeBadge,{infraComputeSize:K?.infra_compute_size})}),(0,s.jsx)(x.NoticeBar,{visible:!0,type:"default",title:"Compute size has moved",description:"Compute size is now managed alongside Disk configuration on the new Compute and Disk page.",actions:(0,s.jsx)(Q.Button,{type:"default",asChild:!0,children:(0,s.jsx)(l.default,{href:`/project/${U}/settings/compute-and-disk`,children:"Go to Compute and Disk"})})}),0===Number(eh?.disk_io_budget)?(0,s.jsxs)(z.Alert,{withIcon:!0,className:"mt-4",variant:"danger",title:"Your disk IO budget has run out for today",children:[(0,s.jsxs)("p",{children:["Your workload is currently running at the baseline disk IO bandwidth at"," ",eN?.baseline_disk_io_mbs?.toLocaleString()??"-"," Mbps and may suffer degradation in performance."]}),(0,s.jsx)("p",{className:"mt-1",children:"Consider upgrading to a larger compute instance for a higher baseline throughput."})]}):10>=Number(eh?.disk_io_budget)?(0,s.jsxs)(z.Alert,{withIcon:!0,className:"mt-4",variant:"warning",title:"Your disk IO budget is running out for today",children:[(0,s.jsxs)("p",{children:["If the disk IO budget drops to zero, your workload will run at the baseline disk IO bandwidth at"," ",eN?.baseline_disk_io_mbs?.toLocaleString()??"-"," Mbps and may suffer degradation in performance."]}),(0,s.jsx)("p",{className:"mt-1",children:"Consider upgrading to a larger compute instance for a higher baseline throughput."})]}):null,(0,s.jsxs)("div",{className:"mt-2 w-full flex items-center justify-between border-b py-2",children:[(0,s.jsx)(l.default,{href:`/project/${U}/settings/infrastructure#ram`,children:(0,s.jsxs)("div",{className:"group flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:"Memory"}),(0,s.jsx)(r.ChevronRight,{strokeWidth:1.5,size:16,className:"transition opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0"})]})}),(0,s.jsxs)("p",{className:"text-sm",children:[eN?.memory_gb??"-"," GB"]})]}),(0,s.jsxs)("div",{className:"w-full flex items-center justify-between border-b py-2",children:[(0,s.jsx)(l.default,{href:`/project/${U}/settings/infrastructure#cpu`,children:(0,s.jsxs)("div",{className:"group flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:"CPU"}),(0,s.jsx)(r.ChevronRight,{strokeWidth:1.5,size:16,className:"transition opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0"})]})}),(0,s.jsxs)("p",{className:"text-sm",children:[eN?.cpu_cores??"?","-core ",ea," ",eN?.cpu_dedicated?"(Dedicated)":"(Shared)"]})]}),(0,s.jsxs)("div",{className:"w-full flex items-center justify-between border-b py-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"No. of direct connections"}),(0,s.jsx)("p",{className:"text-sm",children:eN?.connections_direct??"-"})]}),(0,s.jsxs)("div",{className:"w-full flex items-center justify-between border-b py-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"No. of pooler connections"}),(0,s.jsx)("p",{className:"text-sm",children:eN?.connections_pooler??"-"})]})]})]})})]})}),V&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ScaffoldDivider,{}),(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(v.ScaffoldSection,{children:[(0,s.jsx)(v.ScaffoldSectionDetail,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"m-0",children:"Dedicated IPv4 address"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/ipv4-address`,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,s.jsx)("p",{className:"text-sm m-0",children:"About IPv4 deprecation"}),(0,s.jsx)(a.ExternalLink,{size:16,strokeWidth:1.5})]})})})]})]})}),(0,s.jsx)(v.ScaffoldSectionContent,{children:(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"rounded-md bg-surface-100 border border-muted w-[160px] h-[96px] overflow-hidden",children:(0,s.jsx)("img",{alt:"IPv4",width:160,height:96,src:void 0!==e_?`${R.BASE_PATH}/img/ipv4-on${e?.includes("dark")?"":"--light"}.svg?v=2`:`${R.BASE_PATH}/img/ipv4-off${e?.includes("dark")?"":"--light"}.svg?v=2`})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Current option:"}),(0,s.jsx)("p",{children:void 0!==e_?"Dedicated IPv4 address is enabled":"Dedicated IPv4 address is not enabled"}),(0,s.jsx)(y.ButtonTooltip,{type:"default",className:"mt-2 pointer-events-auto",onClick:()=>L("ipv4"),disabled:!F||ei||!(eP||e_),tooltip:{content:{side:"bottom",text:eP||e_?void 0:"Temporarily disabled while we are migrating to IPv6, please check back later."}},children:"Change dedicated IPv4 address"})]})]})})]})})]}),(0,s.jsx)(v.ScaffoldDivider,{}),(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(v.ScaffoldSection,{children:[(0,s.jsx)(v.ScaffoldSectionDetail,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"m-0",children:"Point in time recovery"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/backups#point-in-time-recovery`,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,s.jsx)("p",{className:"text-sm m-0",children:"About PITR backups"}),(0,s.jsx)(a.ExternalLink,{size:16,strokeWidth:1.5})]})})})]})]})}),(0,s.jsxs)(v.ScaffoldSectionContent,{children:[et&&(0,s.jsxs)(M.Alert_Shadcn_,{children:[(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"PITR cannot be changed with HIPAA"}),(0,s.jsx)(O.AlertDescription_Shadcn_,{children:"All projects should have PITR enabled by default and cannot be changed with HIPAA enabled. Contact support for further assistance."}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(Q.Button,{type:"default",asChild:!0,children:(0,s.jsx)(j.SupportLink,{children:"Contact support"})})})]}),(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"rounded-md bg-surface-100 border border-muted w-[160px] h-[96px] overflow-hidden",children:(0,s.jsx)(d.default,{alt:"Point-In-Time-Recovery",width:160,height:96,src:void 0!==eb?`${R.BASE_PATH}/img/pitr-on${e?.includes("dark")?"":"--light"}.svg`:`${R.BASE_PATH}/img/pitr-off${e?.includes("dark")?"":"--light"}.svg`})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Current option:"}),(0,s.jsx)("p",{children:void 0!==eb?`Point in time recovery of ${eb.variant.meta?.backup_duration_days} days is enabled`:"Point in time recovery is not enabled"}),en?Y?(0,s.jsx)(y.ButtonTooltip,{disabled:!0,type:"default",className:"mt-2",tooltip:{content:{side:"bottom",text:"Point in time recovery is not supported with OrioleDB"}},children:"Change point in time recovery"}):(0,s.jsx)(f.default,{projectUpdateDisabled:ei,projectNotActive:!F,children:(0,s.jsx)(Q.Button,{type:"default",className:"mt-2 pointer-events-auto",onClick:()=>L("pitr"),disabled:!F||ei||!en||et,children:"Change point in time recovery"})}):(0,s.jsxs)(M.Alert_Shadcn_,{className:"mt-2",children:[(0,s.jsx)(H.AlertTitle_Shadcn_,{children:"Your project is too old to enable PITR"}),(0,s.jsxs)(O.AlertDescription_Shadcn_,{children:[(0,s.jsx)("p",{className:"text-sm leading-normal mb-2",children:"Reach out to us via support if you're interested"}),(0,s.jsx)(Q.Button,{asChild:!0,type:"default",children:(0,s.jsx)(j.SupportLink,{queryParams:{projectRef:U,category:u.SupportCategories.SALES_ENQUIRY,subject:"Project too old old for PITR"},children:(0,s.jsx)("a",{children:"Contact support"})})})]})]})]})]})]})]})}),G&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ScaffoldDivider,{}),(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(v.ScaffoldSection,{children:[(0,s.jsx)(v.ScaffoldSectionDetail,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"m-0",children:"Custom domain"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:`${R.DOCS_URL}/guides/platform/custom-domains`,target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,s.jsx)("p",{className:"text-sm m-0",children:"About custom domains"}),(0,s.jsx)(a.ExternalLink,{size:16,strokeWidth:1.5})]})})})]})]})}),(0,s.jsx)(v.ScaffoldSectionContent,{children:(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"rounded-md bg-surface-100 border border-muted w-[160px] h-[96px] overflow-hidden",children:(0,s.jsx)("img",{alt:"Custom Domain",width:160,height:96,src:void 0!==ey?`${R.BASE_PATH}/img/custom-domain-on${e?.includes("dark")?"":"--light"}.svg`:`${R.BASE_PATH}/img/custom-domain-off${e?.includes("dark")?"":"--light"}.svg`})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Current option:"}),(0,s.jsx)("p",{children:void 0!==ey?"Custom domain is enabled":"Custom domain is not enabled"}),(0,s.jsx)(f.default,{projectUpdateDisabled:ei,projectNotActive:!F,children:(0,s.jsx)(Q.Button,{type:"default",className:"mt-2 pointer-events-auto",onClick:()=>L("customDomain"),disabled:!F||ei,children:"Change custom domain"})})]})]})})]})})]})]}),(0,s.jsx)(eu,{}),(0,s.jsx)(er,{}),(0,s.jsx)(eo,{})]})};var em=e.i(448710),ep=e.i(865389);let ex=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ScaffoldContainer,{children:(0,s.jsxs)(v.ScaffoldHeader,{children:[(0,s.jsx)(v.ScaffoldTitle,{children:"Add ons"}),(0,s.jsx)(v.ScaffoldDescription,{children:"Level up your project with add-ons"})]})}),(0,s.jsx)(eh,{})]});ex.getLayout=e=>(0,s.jsx)(em.default,{children:(0,s.jsx)(ep.default,{title:"Add ons",children:e})}),e.s(["default",0,ex],768820)},634825,(e,s,i)=>{let t="/project/[ref]/settings/addons";(window.__NEXT_P=window.__NEXT_P||[]).push([t,()=>e.r(768820)]),s.hot&&s.hot.dispose(function(){window.__NEXT_P.push([t])})}]);

//# debugId=006dc498-2b3b-fd90-dcdc-96d9ee28f534
//# sourceMappingURL=7db075953d784eba.js.map