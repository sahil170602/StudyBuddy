;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="eb902426-e86a-aead-41d6-049b61b886d8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,534587,e=>{"use strict";var t=e.i(248593),s=e.i(242882),r=e.i(234745),i=e.i(878827);async function a({projectRef:e,connectionString:s},i){if(!e)throw Error("projectRef is required");let a=new Headers;s&&a.set("x-connection-encrypted",s);let{data:n,error:o}=await (0,r.get)("/platform/pg-meta/{ref}/triggers",{params:{header:{"x-connection-encrypted":s,"x-pg-application-name":t.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e},query:void 0},headers:a,signal:i});return o&&(0,r.handleError)(o),n}e.s(["useDatabaseHooksQuery",0,({projectRef:e,connectionString:t},{enabled:r=!0,...n}={})=>(0,s.useQuery)({queryKey:i.databaseTriggerKeys.list(e),queryFn:({signal:s})=>a({projectRef:e,connectionString:t},s),select:e=>e.filter(e=>"supabase_functions"===e.function_schema&&("net"!==e.schema||0===e.function_args.length)),enabled:r&&void 0!==e,...n}),"useDatabaseTriggersQuery",0,({projectRef:e,connectionString:t},{enabled:r=!0,...n}={})=>(0,s.useQuery)({queryKey:i.databaseTriggerKeys.list(e),queryFn:({signal:s})=>a({projectRef:e,connectionString:t},s),enabled:r&&void 0!==e,...n})])},804222,e=>{"use strict";var t=e.i(389959);e.s(["useStaticEffectEvent",0,e=>{let s=(0,t.useRef)(e);return(0,t.useLayoutEffect)(()=>{s.current=e}),(0,t.useCallback)((...e)=>s.current(...e),[])}])},82394,e=>{"use strict";let t=(0,e.i(388019).default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);e.s(["PlusCircle",()=>t],82394)},731228,e=>{"use strict";let t=(0,e.i(388019).default)("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);e.s(["MousePointer2",()=>t],731228)},111331,e=>{"use strict";var t=e.i(478902),s=e.i(902858),r=e.i(693241),i=e.i(2579),a=e.i(825713);e.s(["TableEditorLayout",0,({children:e})=>{let{can:n,isSuccess:o}=(0,i.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_READ,"tables");return o&&!n?(0,t.jsx)(a.ProjectLayoutWithAuth,{isBlocking:!1,children:(0,t.jsx)(r.default,{isFullPage:!0,resourceText:"view tables from this project"})}):e}])},73011,e=>{"use strict";var t=e.i(478902),s=e.i(389959);e.i(128328);var r=e.i(158639),i=e.i(188698),a=e.i(150671),n=e.i(70756),o=e.i(48189),l=e.i(908937),c=e.i(201461),d=e.i(837710),u=e.i(843778),p=e.i(672044),m=e.i(253214),h=e.i(500850),x=e.i(283606),g=e.i(314805),b=e.i(408279),f=e.i(710483);e.s(["ExportDialog",0,({table:e,filters:j=[],sorts:y=[],ignoreRoleImpersonation:w=!1,open:v,onOpenChange:S})=>{let{ref:T}=(0,r.useParams)(),_=(0,c.useRoleImpersonationStateSnapshot)(),[N,E]=(0,s.useState)("csv"),{data:C}=(0,a.useReadReplicasQuery)({projectRef:T}),R=(C??[]).find(e=>e.identifier===T),I=(0,o.pluckObjectFields)(R||{db_user:"",db_host:"",db_port:"",db_name:""},["db_host","db_name","db_port","db_user","inserted_at"]),{db_host:A,db_port:k,db_user:P,db_name:D}=I,L=(0,i.getConnectionStrings)({connectionInfo:I,metadata:{projectRef:T},poolingInfo:{connectionString:"",db_host:"",db_name:"",db_port:0,db_user:""}}),$=`${e?.name}_rows`,M=e?(0,n.getAllTableRowsSql)({table:e,sorts:y,filters:j}):void 0,O=M?w?M.sql.toSql():(0,l.wrapWithRoleImpersonation)(M.sql.toSql(),_):"",F=`
${L.direct.psql} -c "COPY (${O}) TO STDOUT WITH CSV HEADER DELIMITER ',';" > ${$}.csv`.trim(),B=`
pg_dump -h ${A} -p ${k} -d ${D} -U ${P} --table="${e?.schema}.${e?.name}" --data-only --column-inserts > ${$}.sql
  `.trim();return(0,t.jsx)(m.Dialog,{open:v,onOpenChange:S,children:(0,t.jsxs)(m.DialogContent,{children:[(0,t.jsx)(m.DialogHeader,{children:(0,t.jsx)(m.DialogTitle,{children:"Export table data via CLI"})}),(0,t.jsx)(m.DialogSectionSeparator,{}),(0,t.jsxs)(m.DialogSection,{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("p",{className:"text-sm",children:["We highly recommend using ",(0,t.jsx)("code",{children:"csv"===N?"psql":"pg_dump"})," to export your table data, in particular if your table is relatively large. This can be done via the following command that you can run in your terminal:"]}),(0,t.jsxs)(h.Tabs_Shadcn_,{value:N,onValueChange:E,children:[(0,t.jsxs)(g.TabsList_Shadcn_,{className:"gap-x-3",children:[(0,t.jsx)(b.TabsTrigger_Shadcn_,{value:"csv",children:"As CSV"}),(0,t.jsx)(b.TabsTrigger_Shadcn_,{value:"sql",children:"As SQL"})]}),(0,t.jsx)(x.TabsContent_Shadcn_,{value:"csv",children:(0,t.jsx)(p.CodeBlock,{hideLineNumbers:!0,wrapperClassName:(0,u.cn)("[&_pre]:px-4 [&_pre]:py-3"),language:"bash",value:F,className:"[&_code]:text-[12px] [&_code]:text-foreground"})}),(0,t.jsxs)(x.TabsContent_Shadcn_,{value:"sql",children:[(0,t.jsx)(p.CodeBlock,{hideLineNumbers:!0,wrapperClassName:(0,u.cn)("[&_pre]:px-4 [&_pre]:py-3"),language:"bash",value:B,className:"[&_code]:text-[12px] [&_code]:text-foreground"}),(0,t.jsx)(f.Admonition,{type:"note",className:"mt-2",title:"Filters are not supported when exporting as SQL via pg_dump",description:"If you'd like to export as SQL, we recommend creating a view first then exporting the data from there via pg_dump instead"})]})]}),(0,t.jsxs)("p",{className:"text-sm",children:["You will be prompted for your database password, and the output file"," ",(0,t.jsxs)("code",{children:[$,".",N]})," ","will be saved in the current directory that your terminal is in."]}),"sql"===N&&(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Note: ",(0,t.jsx)("code",{children:"pg_dump"})," needs to match your project's Postgres version. If you run into a server version mismatch error, you will need to update ",(0,t.jsx)("code",{children:"pg_dump"})," ","before running the command."]})]}),(0,t.jsx)(m.DialogFooter,{children:(0,t.jsx)(d.Button,{type:"default",onClick:()=>S(!1),children:"Close"})})]})})}])},503348,e=>{"use strict";let t=()=>{let e=Math.random().toString(36).substring(2,15);return`$x${e}$`},s=e=>{let r="ARRAY[";return e.forEach((i,a)=>{Array.isArray(i)?r+=s(i):"string"==typeof i?r+=`"${i.replace(/"/g,'""')}"`:i&&"object"==typeof i?r+=`${(e=>{let s=t(),r=0;for(;e.includes(s);){if(r>=100)throw Error("Unable to generate a unique dollar-quote tag after multiple attempts.");r++,s=t()}return`${s}${e}${s}`})(JSON.stringify(i))}::json`:r+=`${i}`,a<e.length-1&&(r+=",")}),r+="]"};e.s(["formatTableRowsToSQL",0,(e,t)=>{if(0===t.length)return"";let r=e.columns.map(e=>`"${e.name}"`).join(", "),i=t.map(t=>{let r={...t};"idx"in r&&delete r.idx;let i=Object.entries(r).map(([t,r])=>{let{dataType:i,format:a}=e.columns.find(e=>e.name===t)??{};if(null===r)return"null";if("ARRAY"===i){let e=Array.isArray(r)?r:JSON.parse(r);return`${s(e)}`}return a?.includes("json")?`${JSON.stringify(r).replace(/\\"/g,'"').replace(/'/g,"''").replace('"',"'").replace(/.$/,"'")}`:"string"==typeof a&&"string"==typeof r&&["text","varchar"].includes(a)?`'${r.replaceAll("'","''")}'`:`'${r}'`});return`(${i.join(", ")})`}).join(", ");return`INSERT INTO "${e.schema}"."${e.name}" (${r}) VALUES ${i};`},"getEntityLintDetails",0,(e,t,s,r,i)=>{let a=r?.find(r=>r?.metadata?.name===e&&r?.metadata?.schema===i&&r?.name===t&&s.includes(r?.level))||null;return{hasLint:null!==a,count:+!!a,matchingLint:a}}])},487164,e=>{"use strict";var t=e.i(242882),s=e.i(714403),r=e.i(440673),i=e.i(246230);async function a({projectRef:e,connectionString:t,id:i},a){if(!i)throw Error("id is required");let n=(({id:e})=>`
    ${r.CREATE_PG_GET_TABLEDEF_SQL}

    with table_info as (
      select 
        n.nspname::text as schema,
        c.relname::text as name
      from pg_class c
      join pg_namespace n on n.oid = c.relnamespace
      where c.oid = ${e}
    )
    select pg_temp.pg_get_tabledef (
      t.schema,
      t.name,
      false,
      'FKEYS_INTERNAL',
      'INCLUDE_TRIGGERS'
    ) as definition
    from table_info t;
  `.trim())({id:i}),{result:o}=await (0,s.executeSql)({projectRef:e,connectionString:t,sql:n,queryKey:["table-definition",i]},a);return o[0].definition.trim()}e.s(["getTableDefinition",()=>a,"useTableDefinitionQuery",0,({projectRef:e,connectionString:s,id:r},{enabled:n=!0,...o}={})=>(0,t.useQuery)({queryKey:i.databaseKeys.tableDefinition(e,r),queryFn:({signal:t})=>a({projectRef:e,connectionString:s,id:r},t),enabled:n&&void 0!==e&&void 0!==r&&!isNaN(r),...o})])},265394,600966,e=>{"use strict";var t=e.i(478902),s=e.i(902858),r=e.i(924115),i=e.i(250503),a=e.i(731228),n=e.i(82394),o=e.i(701087),l=e.i(215261),c=e.i(389959),d=e.i(355901);e.i(128328);var u=e.i(158639),p=e.i(847948),m=e.i(826843),h=e.i(284399),x=e.i(503348),g=e.i(525070),b=e.i(215312),f=e.i(302372),j=e.i(321605),y=e.i(587768),w=e.i(534587),v=e.i(438824),S=e.i(962217),T=e.i(847278),_=e.i(2579),N=e.i(912793),E=e.i(394058),C=e.i(635494),R=e.i(392491),I=e.i(10429),A=e.i(967052),k=e.i(4196),P=e.i(70255),D=e.i(837710),L=e.i(793912),$=e.i(135144),M=e.i(689805),O=e.i(613580),F=e.i(843778),B=e.i(466472),q=e.i(686415),Q=e.i(356003),z=e.i(242882),W=e.i(714403),V=e.i(246230);async function Y({projectRef:e,connectionString:t,id:s},r){let i=(({id:e})=>{if(!e)throw Error("id is required");return`
    with table_info as (
      select 
        n.nspname::text as schema,
        c.relname::text as name,
        to_regclass(concat('"', n.nspname, '"."', c.relname, '"')) as regclass
      from pg_class c
      join pg_namespace n on n.oid = c.relnamespace
      where c.oid = ${e}
    )
    select pg_get_viewdef(t.regclass, true) as definition
    from table_info t
  `.trim()})({id:s}),{result:a}=await (0,W.executeSql)({projectRef:e,connectionString:t,sql:i,queryKey:["view-definition",s]},r);return a[0].definition.trim()}let U=({projectRef:e,connectionString:t,id:s},{enabled:r=!0,...i}={})=>(0,z.useQuery)({queryKey:V.databaseKeys.viewDefinition(e,s),queryFn:({signal:r})=>Y({projectRef:e,connectionString:t,id:s},r),enabled:r&&void 0!==e&&void 0!==s&&!isNaN(s),...i});e.s(["useViewDefinitionQuery",0,U],600966);var K=e.i(915993),H=e.i(617361),G=e.i(396831),J=e.i(200243),X=e.i(108151);function Z({table:e,isAutofixViewSecurityModalOpen:s,setIsAutofixViewSecurityModalOpen:r}){let{data:i}=(0,C.useSelectedProjectQuery)(),a=(0,Q.useQueryClient)(),{isSuccess:n,isPending:o,data:l}=U({id:e?.id,projectRef:i?.ref,connectionString:i?.connectionString},{enabled:s&&(0,S.isViewLike)(e)}),{mutate:c}=(0,H.useExecuteSqlMutation)({onSuccess:async()=>{d.toast.success("View security changed successfully"),r(!1),await a.invalidateQueries({queryKey:K.lintKeys.lint(i?.ref)})},onError:e=>{d.toast.error(`Failed to autofix view security: ${e.message}`)}});return(0,S.isViewLike)(e)?(0,t.jsxs)(B.default,{visible:s,size:"xlarge",title:"Confirm autofixing view security",confirmLabel:"Confirm",onCancel:()=>r(!1),onConfirm:()=>{let t;return t=`
	ALTER VIEW "${e.schema}"."${e.name}" SET (security_invoker = on);
	`,void c({projectRef:i?.ref,connectionString:i?.connectionString,sql:t})},children:[(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Setting ",(0,t.jsx)("code",{children:"security_invoker=on"})," ensures the View runs with the permissions of the querying user, reducing the risk of unintended data exposure."]}),(0,t.jsxs)("div",{className:"flex items-center gap-8 mt-8",children:[(0,t.jsxs)("div",{className:" border rounded-md w-1/2",children:[(0,t.jsx)("div",{className:"p-4 pb-0 bg-200 font-mono text-sm font-semibold",children:"Existing query"}),(0,t.jsxs)(G.ScrollArea,{className:"h-[225px] px-4 py-2",children:[o&&(0,t.jsx)(X.GenericSkeletonLoader,{}),n&&(0,t.jsx)(J.SimpleCodeBlock,{children:`create view ${e.schema}.${e.name} as
 ${l}`})]})]}),(0,t.jsxs)("div",{className:" border rounded-md w-1/2",children:[(0,t.jsx)("div",{className:"p-4 pb-0 bg-200 font-mono text-sm font-semibold",children:"Updated query"}),(0,t.jsxs)(G.ScrollArea,{className:"h-[225px] px-4 py-2",children:[o&&(0,t.jsx)(X.GenericSkeletonLoader,{}),n&&(0,t.jsx)(J.SimpleCodeBlock,{children:`create view ${e.schema}.${e.name} with (security_invoker = on) as
 ${l}`})]})]})]})]}):null}e.s(["GridHeaderActions",0,({table:e,isRefetching:Q})=>{let{ref:z}=(0,u.useParams)(),{data:W}=(0,C.useSelectedProjectQuery)(),V=(0,A.useTrack)(),[Y,U]=(0,k.useQueryState)("showWarning",k.parseAsBoolean.withDefault(!1)),{data:K=[]}=(0,v.useProjectLintsQuery)({projectRef:W?.ref}),{isAvailable:H,isEnabled:G}=(0,m.useTableIndexAdvisor)(),J=(0,S.isTableLike)(e),X=(0,S.isForeignTable)(e),ee=(0,S.isView)(e),et=(0,S.isMaterializedView)(e),{realtimeAll:es}=(0,N.useIsFeatureEnabled)(["realtime:all"]),{isSchemaLocked:er}=(0,R.useIsProtectedSchema)({schema:e.schema}),{mutate:ei,isPending:ea}=(0,T.useTableUpdateMutation)({onError:e=>{d.toast.error(`Failed to toggle RLS: ${e.message}`)},onSettled:()=>{eL()}}),[en,eo]=(0,c.useState)(!1),[el,ec]=(0,c.useState)(!1),[ed,eu]=(0,c.useState)(!1),ep=0===(0,P.useTableEditorTableStateSnapshot)().selectedRows.size,em=W?.ref,{data:eh}=(0,f.useDatabasePoliciesQuery)({projectRef:W?.ref,connectionString:W?.connectionString}),ex=(eh??[]).filter(t=>t.schema===e.schema&&t.table===e.name),{data:eg}=(0,j.useDatabasePublicationsQuery)({projectRef:W?.ref,connectionString:W?.connectionString}),eb=(eg??[]).find(e=>"supabase_realtime"===e.name),ef=eb?.tables??[],ej=ef.some(t=>t.id===e?.id),{activeVariant:ey}=(0,E.useRealtimeExperiment)({projectInsertedAt:W?.inserted_at,isTable:J,isRealtimeEnabled:ej}),{mutate:ew,isPending:ev}=(0,y.useDatabasePublicationUpdateMutation)({onSuccess:()=>{eo(!1),V(ej?"table_realtime_disabled":"table_realtime_enabled",{method:"ui",schema_name:e.schema,table_name:e.name})},onError:t=>{d.toast.error(`Failed to toggle realtime for ${e.name}: ${t.message}`)}}),{data:eS}=(0,w.useDatabaseTriggersQuery)({projectRef:W?.ref,connectionString:W?.connectionString},{enabled:J}),eT=(eS??[]).filter(t=>t.schema===e.schema&&t.table===e.name).length,{can:e_,isLoading:eN}=(0,_.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_WRITE,"tables"),{can:eE}=(0,_.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_WRITE,"columns"),eC="public"===e.schema,{hasLint:eR,matchingLint:eI}=(0,x.getEntityLintDetails)(e.name,"security_definer_view",["ERROR","WARN"],K,e.schema),{hasLint:eA,matchingLint:ek}=(0,x.getEntityLintDetails)(e.name,"materialized_view_in_api",["ERROR","WARN"],K,e.schema),eP=`/project/${z}/database/triggers?schema=${e.schema}`,eD=async()=>{if(!W||!eb)return;let t=ef.some(t=>t.id===e.id),s=t?ef.filter(t=>t.id!==e.id).map(e=>`${e.schema}.${e.name}`):[`${e.schema}.${e.name}`].concat(ef.map(e=>`${e.schema}.${e.name}`));V("realtime_toggle_table_clicked",{newState:t?"disabled":"enabled",origin:"tableGridHeader"}),ew({projectRef:W?.ref,connectionString:W?.connectionString,id:eb.id,tables:s})},eL=()=>{ec(!1)},e$=async()=>{let t={id:e.id,rls_enabled:!(J&&e.rls_enabled)};ei({projectRef:W?.ref,connectionString:W?.connectionString,id:e.id,name:e.name,schema:e.schema,payload:t}),V("table_rls_enabled",{method:"table_editor",schema_name:e.schema,table_name:e.name})};return(0,t.jsxs)("div",{className:"sb-grid-header__inner",children:[ep&&(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[!eN&&!e_&&!eE&&(0,t.jsxs)(O.Tooltip,{children:[(0,t.jsx)(O.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"border border-strong rounded bg-overlay-hover px-3 py-1 text-xs",children:"Viewing as read-only"})}),(0,t.jsx)(O.TooltipContent,{side:"bottom",children:"You need additional permissions to manage your project's data"})]}),J&&!er?e.rls_enabled?(0,t.jsx)(t.Fragment,{children:ex.length<1&&!er?(0,t.jsx)(b.ButtonTooltip,{asChild:!0,type:"default",className:"group",icon:(0,t.jsx)(n.PlusCircle,{strokeWidth:1.5,className:"text-foreground-muted"}),tooltip:{content:{side:"bottom",className:"w-[280px]",text:"RLS is enabled for this table, but no policies are set. Select queries may return 0 results."}},children:(0,t.jsx)(l.default,{passHref:!0,href:`/project/${em}/auth/policies?search=${e.name}&schema=${e.schema}`,children:"Add RLS policy"})}):(0,t.jsx)(D.Button,{asChild:!0,type:ex.length<1&&!er?"warning":"default",className:"group",icon:er||ex.length>0?(0,t.jsx)("div",{className:(0,F.cn)("flex items-center justify-center rounded-full bg-border-stronger h-[16px]",ex.length>9?" px-1":"w-[16px]",""),children:(0,t.jsx)("span",{className:"text-[11px] text-foreground font-mono text-center",children:ex.length})}):(0,t.jsx)(n.PlusCircle,{strokeWidth:1.5}),children:(0,t.jsxs)(l.default,{passHref:!0,href:`/project/${em}/auth/policies?search=${e.name}&schema=${e.schema}`,children:["RLS ",ex.length>1?"policies":"policy"]})})}):(0,t.jsxs)(M.Popover_Shadcn_,{modal:!1,open:Y,onOpenChange:U,children:[(0,t.jsx)($.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(D.Button,{type:"warning",icon:(0,t.jsx)(i.Lock,{strokeWidth:1.5}),children:"RLS disabled"})}),(0,t.jsxs)(L.PopoverContent_Shadcn_,{portal:!0,className:"w-80 text-sm",align:"end",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Lock,{size:16})," Row Level Security (RLS)"]}),(0,t.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-xs",children:[(0,t.jsx)("p",{children:"You can restrict and control who can read, write and update data in this table using Row Level Security."}),(0,t.jsx)("p",{children:"With RLS enabled, anonymous users will not be able to read/write data in the table."}),!er&&(0,t.jsx)(D.Button,{type:"default",className:"mt-2 w-min",onClick:()=>ec(!el),children:"Enable RLS for this table"})]})]})]}):null,J&&H&&!G&&(0,t.jsxs)(M.Popover_Shadcn_,{modal:!1,children:[(0,t.jsx)($.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(D.Button,{type:"default",icon:(0,t.jsx)(r.Lightbulb,{strokeWidth:1.5}),children:"Index Advisor"})}),(0,t.jsxs)(L.PopoverContent_Shadcn_,{portal:!0,className:"w-80 text-sm",align:"end",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Lightbulb,{size:16})," Index Advisor"]}),(0,t.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-xs",children:[(0,t.jsx)("p",{children:"Index Advisor recommends indexes to improve query performance on this table."}),(0,t.jsx)("p",{children:"Enable Index Advisor to get recommendations based on your actual query patterns."}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(h.EnableIndexAdvisorButton,{})})]})]})]}),J&&ey===E.RealtimeButtonVariant.TRIGGERS?(0,t.jsx)(D.Button,{asChild:!0,type:"default",size:"tiny",icon:(0,t.jsx)("div",{className:(0,F.cn)("flex items-center justify-center rounded-full bg-border-stronger h-[16px]",eT>9?"px-1":"w-[16px]"),children:(0,t.jsx)("span",{className:"text-[11px] text-foreground font-mono text-center",children:eT})}),children:(0,t.jsx)(l.default,{href:eP,children:1===eT?"Trigger":"Triggers"})}):ey!==E.RealtimeButtonVariant.HIDE_BUTTON&&es&&(0,t.jsx)(b.ButtonTooltip,{type:"default",size:"tiny",icon:(0,t.jsx)(a.MousePointer2,{strokeWidth:1.5,className:ej?"text-brand":"text-foreground-muted"}),onClick:()=>eo(!0),className:(0,F.cn)(ej&&"w-7 h-7 p-0 text-brand hover:text-brand-hover"),tooltip:{content:{side:"bottom",text:ej?"Click to disable realtime for this table":"Click to enable realtime for this table"}},children:!ej&&"Enable Realtime"}),ee&&eR&&(0,t.jsxs)(M.Popover_Shadcn_,{modal:!1,open:Y,onOpenChange:U,children:[(0,t.jsx)($.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(D.Button,{type:"warning",icon:(0,t.jsx)(o.Unlock,{strokeWidth:1.5}),children:"Security Definer view"})}),(0,t.jsxs)(L.PopoverContent_Shadcn_,{portal:!0,className:"min-w-[395px] text-sm",align:"end",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Unlock,{size:16})," Secure your View"]}),(0,t.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,t.jsx)("p",{children:"This view is defined with the Security Definer property, giving it permissions of the view's creator (Postgres), rather than the permissions of the querying user."}),(0,t.jsx)("p",{children:"Since this view is in the public schema, it is accessible via your project's APIs."}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)(D.Button,{type:"secondary",onClick:()=>{eu(!0)},children:"Autofix"}),(0,t.jsx)(D.Button,{type:"default",asChild:!0,children:(0,t.jsx)(l.default,{target:"_blank",href:`/project/${z}/advisors/security?preset=${eI?.level}&id=${eI?.cache_key}`,children:"Learn more"})})]})]})]})]}),et&&eA&&(0,t.jsxs)(M.Popover_Shadcn_,{modal:!1,open:Y,onOpenChange:U,children:[(0,t.jsx)($.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(D.Button,{type:"warning",icon:(0,t.jsx)(o.Unlock,{strokeWidth:1.5}),children:"Security Definer view"})}),(0,t.jsxs)(L.PopoverContent_Shadcn_,{portal:!0,className:"min-w-[395px] text-sm",align:"end",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Unlock,{size:16})," Secure your View"]}),(0,t.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,t.jsx)("p",{children:"This view is defined with the Security Definer property, giving it permissions of the view's creator (Postgres), rather than the permissions of the querying user."}),(0,t.jsx)("p",{children:"Since this view is in the public schema, it is accessible via your project's APIs."}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(D.Button,{type:"default",asChild:!0,children:(0,t.jsx)(l.default,{target:"_blank",href:`/project/${z}/advisors/security?preset=${ek?.level}&id=${ek?.cache_key}`,children:"Learn more"})})})]})]})]}),X&&"public"===e.schema&&(0,t.jsxs)(M.Popover_Shadcn_,{modal:!1,open:Y,onOpenChange:U,children:[(0,t.jsx)($.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(D.Button,{type:"warning",icon:(0,t.jsx)(o.Unlock,{strokeWidth:1.5}),children:"Unprotected Data API access"})}),(0,t.jsxs)(L.PopoverContent_Shadcn_,{portal:!0,className:"min-w-[395px] text-sm",align:"end",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Unlock,{size:16})," Secure Foreign table"]}),(0,t.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,t.jsxs)("p",{children:["Foreign tables do not enforce RLS, which may allow unrestricted access. To secure them, either move foreign tables to a private schema not exposed by PostgREST, or ",(0,t.jsx)("a",{href:"",children:"disable PostgREST access"})," entirely."]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(D.Button,{type:"default",asChild:!0,children:(0,t.jsx)(l.default,{target:"_blank",href:`${I.DOCS_URL}/guides/database/extensions/wrappers/overview#security`,children:"Learn more"})})})]})]})]}),(0,t.jsx)(q.RoleImpersonationPopover,{serviceRoleLabel:"postgres"}),eC&&(0,t.jsx)(g.APIDocsButton,{section:["entities",e.name],source:"table_editor"}),(0,t.jsx)(p.RefreshButton,{tableId:e.id,isRefetching:Q})]}),(0,t.jsx)(B.default,{visible:en,loading:ev,title:`${ej?"Disable":"Enable"} realtime for ${e.name}`,confirmLabel:`${ej?"Disable":"Enable"} realtime`,confirmLabelLoading:`${ej?"Disabling":"Enabling"} realtime`,onCancel:()=>eo(!1),onConfirm:()=>eD(),children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm",children:["Once realtime has been ",ej?"disabled":"enabled",", the table will"," ",ej?"no longer ":"","broadcast any changes to authorized subscribers."]}),!ej&&(0,t.jsxs)("p",{className:"text-sm",children:["You may also select which events to broadcast to subscribers on the"," ",(0,t.jsx)(l.default,{href:`/project/${z}/database/publications`,className:"text-brand",children:"database publications"})," ","settings."]})]})}),(0,t.jsx)(Z,{table:e,isAutofixViewSecurityModalOpen:ed,setIsAutofixViewSecurityModalOpen:eu}),J&&(0,t.jsx)(B.default,{visible:el,variant:e.rls_enabled?"destructive":"default",title:`${e.rls_enabled?"Disable":"Enable"} Row Level Security`,description:`Are you sure you want to ${e.rls_enabled?"disable":"enable"} Row Level Security for this table?`,confirmLabel:`${e.rls_enabled?"Disable":"Enable"} RLS`,confirmLabelLoading:`${e.rls_enabled?"Disabling":"Enabling"} RLS`,loading:ea,onCancel:eL,onConfirm:e$})]})}],265394)},105417,e=>{"use strict";e.s(["Header",()=>Q,"MAX_EXPORT_ROW_COUNT",()=>B,"MAX_EXPORT_ROW_COUNT_MESSAGE",()=>q],105417);var t=e.i(478902),s=e.i(902858),r=e.i(749844),i=e.i(88816),a=e.i(291969),n=e.i(211570),o=e.i(215261),l=e.i(389959),c=e.i(355901),d=e.i(201844);e.i(128328);var u=e.i(158639),p=e.i(632459),m=e.i(821276),h=e.i(265394),x=e.i(503348),g=e.i(534517),b=e.i(215312),f=e.i(437893),j=e.i(70756),y=e.i(162082),w=e.i(2579),v=e.i(265735),S=e.i(635494),T=e.i(10429),_=e.i(201461),N=e.i(636047),E=e.i(70255),C=e.i(837710),R=e.i(843778),I=e.i(375761),A=e.i(874311),k=e.i(479095),P=e.i(73011),D=e.i(19583),L=e.i(816232);let $=({portal:e=!0})=>{let{urlFilters:s,onApplyFilters:r}=(0,p.useTableFilter)(),i=(0,l.useMemo)(()=>(0,D.formatFilterURLParams)(s??[]),[s]);return(0,t.jsx)(L.FilterPopoverPrimitive,{portal:e,filters:i,onApplyFilters:r})};var M=e.i(586468),O=e.i(626915);let F=({portal:e=!0,tableQueriesEnabled:s})=>{let{urlSorts:r,onApplySorts:i}=(0,m.useTableSort)(),a=(0,E.useTableEditorTableStateSnapshot)(),n=a.table?.name||"",o=(0,l.useMemo)(()=>n&&r?(0,D.formatSortURLParams)(n,r):[],[n,r]);return(0,t.jsx)(O.SortPopoverPrimitive,{portal:e,sorts:o,onApplySorts:i,tableQueriesEnabled:s})},B=5e5,q=(0,t.jsxs)(t.Fragment,{children:["Sorry! We're unable to support exporting row counts larger than"," ",B.toLocaleString("en-US")," at the moment. Alternatively, you may consider using"," ",(0,t.jsx)(o.default,{href:`${T.DOCS_URL}/reference/cli/supabase-db-dump`,target:"_blank",children:"pg_dump"})," ","via our CLI instead."]}),Q=({customHeader:e,isRefetching:s,tableQueriesEnabled:r=!0})=>{let i=(0,E.useTableEditorTableStateSnapshot)();return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex h-10 items-center justify-between bg-dash-sidebar dark:bg-surface-100 px-1.5 py-1.5 gap-2 overflow-x-auto ",children:[e||(i.selectedRows.size>0?(0,t.jsx)(W,{tableQueriesEnabled:r}):(0,t.jsx)(z,{tableQueriesEnabled:r})),(0,t.jsx)(h.GridHeaderActions,{table:i.originalTable,isRefetching:s})]})})},z=({tableQueriesEnabled:e=!0})=>{let{ref:n}=(0,u.useParams)(),{data:o}=(0,v.useSelectedOrganizationQuery)(),l=(0,E.useTableEditorTableStateSnapshot)(),c=(0,N.useTableEditorStateSnapshot)(),{can:d}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_WRITE,"columns"),{mutate:p}=(0,y.useSendEventMutation)(),m=l.editable&&(l.table.columns??[]).length>0?c.onAddRow:void 0,h=l.editable?c.onAddColumn:void 0,x=l.editable?c.onImportData:void 0;return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)($,{}),(0,t.jsx)(F,{tableQueriesEnabled:e})]}),(void 0!==m||void 0!==h)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-[20px] w-px border-r border-control"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:d&&(0,t.jsxs)(A.DropdownMenu,{children:[(0,t.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{"data-testid":"table-editor-insert-new-row",type:"primary",size:"tiny",icon:(0,t.jsx)(i.ChevronDown,{strokeWidth:1.5}),children:"Insert"})}),(0,t.jsx)(A.DropdownMenuContent,{side:"bottom",align:"start",children:[...void 0!==m?[(0,t.jsxs)(A.DropdownMenuItem,{className:"group space-x-2",onClick:m,children:[(0,t.jsxs)("div",{className:"-mt-2 pr-1.5",children:[(0,t.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px]"}),(0,t.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px] my-[2px]"}),(0,t.jsx)("div",{className:(0,R.cn)(["border border-foreground-light w-[15px] h-[4px] translate-x-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-x-0"])})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Insert row"}),(0,t.jsxs)("p",{className:"text-foreground-light",children:["Insert a new row into ",l.table.name]})]})]},"add-row")]:[],...void 0!==h?[(0,t.jsxs)(A.DropdownMenuItem,{className:"group space-x-2",onClick:h,children:[(0,t.jsxs)("div",{className:"flex -mt-2 pr-1.5",children:[(0,t.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px]"}),(0,t.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px] mx-[2px]"}),(0,t.jsx)("div",{className:(0,R.cn)(["border border-foreground-light w-[4px] h-[15px] -translate-y-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-y-0"])})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Insert column"}),(0,t.jsxs)("p",{className:"text-foreground-light",children:["Insert a new column into ",l.table.name]})]})]},"add-column")]:[],...void 0!==x?[(0,t.jsxs)(A.DropdownMenuItem,{className:"group space-x-2",onClick:()=>{x(),p({action:"import_data_button_clicked",properties:{tableType:"Existing Table"},groups:{project:n??"Unknown",organization:o?.slug??"Unknown"}})},children:[(0,t.jsxs)("div",{className:"relative -mt-2",children:[(0,t.jsx)(a.FileText,{size:18,strokeWidth:1.5,className:"-translate-x-[2px]"}),(0,t.jsx)(r.ArrowUp,{className:(0,R.cn)("transition duration-200 absolute bottom-0 right-0 translate-y-1 opacity-0 bg-brand-400 rounded-full","group-data-[highlighted]:translate-y-0 group-data-[highlighted]:text-brand group-data-[highlighted]:opacity-100"),strokeWidth:3,size:12})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Import data from CSV"}),(0,t.jsx)("p",{className:"text-foreground-light",children:"Insert new rows from a CSV"})]})]},"import-data")]:[]]})]})})]})]})},W=({tableQueriesEnabled:e=!0})=>{let{data:s}=(0,S.useSelectedProjectQuery)(),r=(0,N.useTableEditorStateSnapshot)(),a=(0,E.useTableEditorTableStateSnapshot)(),o=(0,_.useRoleImpersonationStateSnapshot)(),u=void 0!==o.role,{filters:h}=(0,p.useTableFilter)(),{sorts:y}=(0,m.useTableSort)(),[w,v]=(0,l.useState)(!1),[T,R]=(0,l.useState)(!1),{data:D}=(0,j.useTableRowsQuery)({projectRef:s?.ref,connectionString:s?.connectionString,tableId:a.table.id,sorts:y,filters:h,page:a.page,limit:r.rowsPerPage,roleImpersonationState:o},{enabled:e}),{data:L}=(0,f.useTableRowsCountQuery)({projectRef:s?.ref,connectionString:s?.connectionString,tableId:a.table.id,filters:h,enforceExactCount:a.enforceExactCount,roleImpersonationState:o},{placeholderData:d.keepPreviousData,enabled:e}),$=D?.rows??[],O=L?.count??0,F=e=>{let t=$.filter(e=>a.selectedRows.has(e.idx));if("csv"===e){let e=(({rows:e,columns:t})=>{let s=e.map(e=>(Object.keys(e).map(t=>{"object"==typeof e[t]&&null!==e[t]&&(e[t]=JSON.stringify(e[t]))}),e));return M.default.unparse(s,{columns:t})})({rows:t,columns:a.table.columns.map(e=>e.name)});(0,I.copyToClipboard)(e)}else if("sql"===e){let e=(0,x.formatTableRowsToSQL)(a.table,t);(0,I.copyToClipboard)(e)}else"json"===e&&(0,I.copyToClipboard)(JSON.stringify(t));c.toast.success("Copied rows to clipboard")},B=a.allRowsSelected?{type:"fetch_all",filters:h,sorts:y}:{type:"provided_rows",table:a.table,rows:$.filter(e=>a.selectedRows.has(e.idx))},{exportCsv:q,confirmationModal:Q}=(0,g.useExportAllRowsAsCsv)(s?{enabled:!0,projectRef:s.ref,connectionString:s?.connectionString??null,entity:a.table,totalRows:O,...B}:{enabled:!1}),z=async()=>{if(v(!0),!s)return c.toast.error("Project is required"),v(!1);q(),v(!1)},{exportSql:W,confirmationModal:V}=(0,g.useExportAllRowsAsSql)(s?{enabled:!0,projectRef:s.ref,connectionString:s?.connectionString??null,entity:a.table,...B}:{enabled:!1}),Y=async()=>{if(v(!0),!s)return c.toast.error("Project is required"),v(!1);W(),v(!1)},{exportJson:U,confirmationModal:K}=(0,g.useExportAllRowsAsJson)(s?{enabled:!0,projectRef:s.ref,connectionString:s?.connectionString??null,entity:a.table,...B}:{enabled:!1}),H=async()=>{if(!s)return c.toast.error("Project is required");v(!0),U(),v(!1)};return(0,_.useSubscribeToImpersonatedRole)(()=>{(a.allRowsSelected||a.selectedRows.size>0)&&a.setSelectedRows(new Set)}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[a.editable&&(0,t.jsx)(b.ButtonTooltip,{type:"default",size:"tiny",icon:(0,t.jsx)(n.Trash,{}),onClick:()=>{let e=a.allRowsSelected?O:a.selectedRows.size,t=Array.from(a.selectedRows),s=$.filter(e=>t.includes(e.idx));r.onDeleteRows(s,{allRowsSelected:a.allRowsSelected,numRows:e,callback:()=>{a.setSelectedRows(new Set)}})},disabled:a.allRowsSelected&&u,tooltip:{content:{side:"bottom",text:a.allRowsSelected&&u?"Table truncation is not supported when impersonating a role":void 0}},children:a.allRowsSelected?"Delete all rows in table":a.selectedRows.size>1?`Delete ${a.selectedRows.size} rows`:`Delete ${a.selectedRows.size} row`}),a.allRowsSelected?(0,t.jsx)(b.ButtonTooltip,{disabled:!0,type:"default",tooltip:{content:{side:"bottom",className:"w-64 text-center",text:"Copy to clipboard is not supported while all rows in the table are selected"}},children:"Copy"}):(0,t.jsxs)(A.DropdownMenu,{children:[(0,t.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{type:"default",size:"tiny",iconRight:(0,t.jsx)(i.ChevronDown,{}),loading:w,disabled:w,children:"Copy"})}),(0,t.jsxs)(A.DropdownMenuContent,{align:"start",className:"w-40",children:[(0,t.jsx)(A.DropdownMenuItem,{onClick:()=>F("csv"),children:"Copy as CSV"}),(0,t.jsx)(A.DropdownMenuItem,{onClick:()=>F("sql"),children:"Copy as SQL"}),(0,t.jsx)(A.DropdownMenuItem,{onClick:()=>F("json"),children:"Copy as JSON"})]})]}),(0,t.jsxs)(A.DropdownMenu,{children:[(0,t.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{type:"default",size:"tiny",iconRight:(0,t.jsx)(i.ChevronDown,{}),loading:w,disabled:w,children:"Export"})}),(0,t.jsxs)(A.DropdownMenuContent,{align:"start",className:a.allRowsSelected?"w-52":"w-40",children:[(0,t.jsx)(A.DropdownMenuItem,{onClick:z,children:"Export as CSV"}),(0,t.jsx)(A.DropdownMenuItem,{onClick:Y,children:"Export as SQL"}),a.allRowsSelected?(0,t.jsx)(A.DropdownMenuItem,{className:"group",onClick:()=>R(!0),children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"group-hover:text-foreground",children:"Export via CLI"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Recommended for large tables"})]})}):(0,t.jsx)(A.DropdownMenuItem,{onClick:H,children:"Export as JSON"})]})]}),!a.allRowsSelected&&O>$.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-6 ml-0.5",children:(0,t.jsx)(k.Separator,{orientation:"vertical"})}),(0,t.jsx)(C.Button,{type:"text",onClick:()=>void a.setSelectedRows(new Set($.map(e=>e.idx)),!0),children:"Select all rows in table"})]})]}),(0,t.jsx)(P.ExportDialog,{table:a.table,filters:h,sorts:y,open:T,onOpenChange:()=>R(!1)}),Q,V,K]})}},534517,e=>{"use strict";e.s(["useExportAllRowsAsCsv",()=>D,"useExportAllRowsAsJson",()=>$,"useExportAllRowsAsSql",()=>L],534517);var t=e.i(478902),s=e.i(616688),r=e.i(586468),i=e.i(389959),a=e.i(356003);e.i(128328);var n=e.i(86086),o=e.i(105417),l=e.i(19583),c=e.i(503348),d=e.i(311827),u=e.i(938343),p=e.i(415190),m=e.i(962217),h=e.i(70756),x=e.i(804222),g=e.i(466472);let b=e=>{if(e)return e instanceof Error?e:"object"==typeof e&&"message"in e?Error(String(e.message)):Error(String(e))};class f extends Error{cause;constructor(e,t={}){super(e,t)}}class j extends f{constructor(){super("No connection string provided for database connection."),this.name="NoConnectionStringError"}}class y extends f{constructor(e,t){super(`Failed to fetch table details from the database for table ${e}.`,{cause:b(t)}),this.name="TableDetailsFetchError"}}class w extends f{constructor(e){super(`The specified table "${e}" does not exist in the database.`),this.name="NoTableError"}}class v extends f{constructor(e){super(`There are no rows to export from the table "${e}".`),this.name="NoRowsToExportError"}}class S extends f{constructor(e,t,s){super(`The table "${e}" has ${t} rows, which exceeds the maximum allowed limit of ${s} rows for export.`),this.name="TableTooLargeError"}}class T extends f{constructor(e,t){super(`An error occurred while fetching rows from the table "${e}".`,{cause:b(t)}),this.name="FetchRowsError"}}class _ extends f{constructor(e){super("Failed to convert the fetched rows into the desired output format.",{cause:b(e)}),this.name="OutputConversionError"}}class N extends f{constructor(e){super("An error occurred while creating a Blob for the exported data.",{cause:b(e)}),this.name="BlobCreationError"}}class E extends f{constructor(e){super("An error occurred while saving the exported data to a file.",{cause:b(e)}),this.name="DownloadSaveError"}}var C=e.i(355901),R=e.i(474325);let I=async({queryClient:e,projectRef:t,connectionString:s,entity:r,bypassConfirmation:i,filters:a,sorts:c,roleImpersonationState:x,startCallback:g,progressCallback:b,convertToOutputFormat:f,convertToBlob:_,save:N})=>{let E,C;if(n.IS_PLATFORM&&!s)return{status:"error",error:new j};try{E=await e.ensureQueryData({queryKey:u.tableEditorKeys.tableEditor(t,r.id),queryFn:({signal:e})=>(0,p.getTableEditor)({projectRef:t,connectionString:s,id:r.id},e)})}catch(e){return{status:"error",error:new y(r.name,e)}}if(!E)return{status:"error",error:new w(r.name)};let R=E.entity_type;if(R===d.ENTITY_TYPE.VIEW&&!i)return{status:"require_confirmation",reason:"Exporting a view may cause consistency issues or performance issues on very large views. If possible, we recommend exporting the underlying table instead."};if(R===d.ENTITY_TYPE.MATERIALIZED_VIEW&&!i)return{status:"require_confirmation",reason:"Exporting a materialized view may cause performance issues on very large views. If possible, we recommend exporting the underlying table instead."};if(R===d.ENTITY_TYPE.FOREIGN_TABLE&&!i)return{status:"require_confirmation",reason:"Exporting a foreign table may cause consistency issues or performance issues on very large tables."};if((0,m.isTableLike)(E)&&E.live_rows_estimate>o.MAX_EXPORT_ROW_COUNT)return{status:"error",error:new S(E.name,E.live_rows_estimate,o.MAX_EXPORT_ROW_COUNT)};let I=(0,l.parseSupaTable)(E);if(!I.primaryKey&&!i)return{status:"require_confirmation",reason:"This table does not have a primary key defined, which may cause performance issues when exporting very large tables."};g?.();try{C=await (0,h.fetchAllTableRows)({projectRef:t,connectionString:s,table:I,filters:a,sorts:c,roleImpersonationState:x,progressCallback:b})}catch(e){return{status:"error",error:new T(I.name,e)}}return 0===C.length?{status:"error",error:new v(r.name)}:k(A(C,I),I,{convertToOutputFormat:f,convertToBlob:_,save:N})},A=(e,t)=>e.map(e=>{let s={...e};return Object.keys(e).map(r=>{"idx"!==r||t.columns.some(e=>"idx"===e.name)?"object"==typeof e[r]&&null!==e[r]&&(s[r]=JSON.stringify(s[r])):delete s[r]}),s}),k=(e,t,s)=>{let r,i;try{r=s.convertToOutputFormat(e,t)}catch(e){return{status:"error",error:new _(e)}}try{i=s.convertToBlob(r)}catch(e){return{status:"error",error:new N(e)}}try{s.save(i,t)}catch(e){return{status:"error",error:new E(e)}}return{status:"success",rowsExported:e.length}},P=e=>{let s,r,n,l,c=(0,a.useQueryClient)(),{startProgressTracker:d,trackPercentageProgress:u,stopTrackerWithError:p,dismissTrackerSilently:m,markTrackerComplete:h}=(s=(0,i.useRef)(new Map),r=(0,i.useCallback)(({id:e,name:r,trackPercentage:i=!1})=>{s.current.has(e)||(i?s.current.set(e,(0,C.toast)((0,t.jsx)(R.SonnerProgress,{progress:0,message:`Exporting ${r}...`}),{closeButton:!1,duration:1/0})):s.current.set(e,C.toast.loading(`Exporting ${r}...`)))},[]),n=(0,i.useCallback)(({id:e,name:r,value:i,totalRows:a})=>{let n=s.current.get(e),o=Math.min(i/a*100,100),l=(0,C.toast)((0,t.jsx)(R.SonnerProgress,{progress:o,message:`Exporting ${r}...`}),{id:n,closeButton:!1,duration:1/0});n||s.current.set(e,l)},[]),l=(0,i.useCallback)((e,t,r)=>{let i=s.current.get(e);i&&(C.toast.dismiss(i),s.current.delete(e)),C.toast.error(r??`There was an error exporting ${t}`)},[]),{startProgressTracker:r,trackPercentageProgress:n,stopTrackerWithError:l,dismissTrackerSilently:(0,i.useCallback)(e=>{let t=s.current.get(e);t&&(C.toast.dismiss(t),s.current.delete(e))},[]),markTrackerComplete:(0,i.useCallback)((e,t)=>{let r=s.current.get(e),i=()=>s.current.delete(e);C.toast.success(`Successfully exported ${t} rows`,{id:r,duration:4e3,onAutoClose:i,onDismiss:i})},[])}),{convertToOutputFormat:b,convertToBlob:f,save:j}=e,[y,w]=(0,i.useState)(null),T=(0,x.useStaticEffectEvent)(async({bypassConfirmation:t})=>{if(!e.enabled)return;let{projectRef:s,connectionString:r,entity:i,totalRows:a}=e,n="provided_rows"===e.type?k(A(e.rows,e.table),e.table,{convertToOutputFormat:b,convertToBlob:f,save:j}):await I({queryClient:c,projectRef:s,connectionString:r,entity:i,bypassConfirmation:t,filters:e.filters,sorts:e.sorts,roleImpersonationState:e.roleImpersonationState,startCallback:()=>{d({id:i.id,name:i.name,trackPercentage:void 0!==a})},progressCallback:a?e=>u({id:i.id,name:i.name,totalRows:a,value:e}):void 0,convertToOutputFormat:b,convertToBlob:f,save:j});if("error"===n.status){let e=n.error;return e instanceof v?p(i.id,i.name,`The table ${i.name} has no rows to export.`):e instanceof S?p(i.id,i.name,o.MAX_EXPORT_ROW_COUNT_MESSAGE):(console.error("Export All Rows > Error: %s%s%s",e.message,e.cause?.message?`
${e.cause.message}`:"",e.cause?.stack?`:
${e.cause.stack}`:""),p(i.id,i.name))}if("require_confirmation"===n.status)return w(n.reason);h(i.id,n.rowsExported)});return{exportInDesiredFormat:(0,i.useCallback)(()=>T({bypassConfirmation:!1}),[T]),confirmationModal:y?(0,t.jsx)(g.ConfirmationModal,{title:"Confirm to export data",visible:!0,onCancel:()=>{e.enabled&&(m(e.entity.id),w(null))},onConfirm:()=>{T({bypassConfirmation:!0}),w(null)},alert:{base:{className:"[&>div>div>h5]:font-normal border-x-0 border-t-0 rounded-none mb-0"},title:y}}):null}},D=e=>{let{exportInDesiredFormat:t,confirmationModal:i}=P({...e,convertToOutputFormat:(e,t)=>r.default.unparse(e,{columns:t.columns.map(e=>e.name)}),convertToBlob:e=>new Blob([e],{type:"text/csv;charset=utf-8;"}),save:(e,t)=>(0,s.default)(e,`${t.name}_rows.csv`)});return{exportCsv:t,confirmationModal:i}},L=e=>{let{exportInDesiredFormat:t,confirmationModal:r}=P({...e,convertToOutputFormat:(e,t)=>(0,c.formatTableRowsToSQL)(t,e),convertToBlob:e=>new Blob([e],{type:"text/sql;charset=utf-8;"}),save:(e,t)=>(0,s.default)(e,`${t.name}_rows.sql`)});return{exportSql:t,confirmationModal:r}},$=e=>{let{exportInDesiredFormat:t,confirmationModal:r}=P({...e,convertToOutputFormat:e=>JSON.stringify(e),convertToBlob:e=>new Blob([e],{type:"application/json;charset=utf-8;"}),save:(e,t)=>(0,s.default)(e,`${t.name}_rows.json`)});return{exportJson:t,confirmationModal:r}}},207831,e=>{"use strict";var t=e.i(478902),s=e.i(902858),r=e.i(532427),i=e.i(479232),a=e.i(389959);e.i(128328);var n=e.i(158639),o=e.i(232107),l=e.i(73011),c=e.i(19583),d=e.i(892277),u=e.i(556744),p=e.i(567558),m=e.i(215312),h=e.i(513933),x=e.i(300424),g=e.i(311827),b=e.i(740413),f=e.i(415190),j=e.i(2579),y=e.i(124416),w=e.i(983783),v=e.i(635494),S=e.i(392491),T=e.i(636047),_=e.i(837710),N=e.i(34411),E=e.i(9679),C=e.i(793912),R=e.i(135144),I=e.i(689805),A=e.i(498377),k=e.i(278889),P=e.i(816467),D=e.i(786741),L=e.i(53071),$=e.i(250503),M=e.i(471998),O=e.i(211570),F=e.i(215261),B=e.i(355901),q=e.i(632459),Q=e.i(503348),z=e.i(528462),W=e.i(937942),V=e.i(487164),Y=e.i(438824),U=e.i(941381),K=e.i(437893),H=e.i(887093),G=e.i(201461),J=e.i(63519),X=e.i(587433),Z=e.i(843778),ee=e.i(375761),et=e.i(874311),es=e.i(613580),er=e.i(792459),ei=e.i(534517);function ea(e){return e?.type===g.ENTITY_TYPE.TABLE||e?.type===g.ENTITY_TYPE.PARTITIONED_TABLE}let en=({entity:e,tableHasLints:s,viewHasLints:r,materializedViewHasLints:i,foreignTableHasLints:a})=>{let{ref:o}=(0,n.useParams)(),l=null,c="Data is publicly accessible via API",d=(0,t.jsx)(W.InlineLink,{href:`/project/${o}/editor/${e.id}?schema=${e.schema}&showWarning=true`,children:"Learn more"});switch(e.type){case g.ENTITY_TYPE.TABLE:s&&(l=(0,t.jsxs)(t.Fragment,{children:[c," as RLS is disabled. ",d,"."]}));break;case g.ENTITY_TYPE.VIEW:r&&(l=(0,t.jsxs)(t.Fragment,{children:[c," as this is a Security definer view. ",d,"."]}));break;case g.ENTITY_TYPE.MATERIALIZED_VIEW:i&&(l=(0,t.jsxs)(t.Fragment,{children:[c," as this is a Security definer view ",d,"."]}));break;case g.ENTITY_TYPE.FOREIGN_TABLE:a&&(l=(0,t.jsxs)(t.Fragment,{children:[c," as RLS is not enforced on foreign tables. ",d,"."]}))}return l?(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{className:"min-w-4",children:(0,t.jsx)(X.Badge,{variant:"destructive",children:"Unrestricted"})}),(0,t.jsx)(es.TooltipContent,{side:"right",className:"max-w-52 text-center",children:l})]}):null},eo=({id:e,projectRef:s,item:r,isLocked:i,isActive:a,style:n,onExportCLI:o})=>{var l;let d,{data:u}=(0,v.useSelectedProjectQuery)(),p=(0,T.useTableEditorStateSnapshot)(),{selectedSchema:m}=(0,w.useQuerySchemaState)(),h=(0,J.createTabId)(r.type,{id:r.id}),x=(0,J.useTabsStateSnapshot)(),b=x.previewTabId===h,f=Object.values(x.tabsMap).some(e=>e.metadata?.tableId===r.id),j=Number(e)===r.id,y=j&&!i,{filters:S}=(0,q.useTableFilter)(),N=(0,G.useRoleImpersonationStateSnapshot)(),{data:E}=(0,K.useTableRowsCountQuery)({projectRef:s,connectionString:u?.connectionString,tableId:r.id,filters:S,enforceExactCount:!1,roleImpersonationState:N},{enabled:ea(r)&&j}),C=E?.count,{data:R=[]}=(0,Y.useProjectLintsQuery)({projectRef:u?.ref}),I=(0,Q.getEntityLintDetails)(r.name,"rls_disabled_in_public",["ERROR"],R,m).hasLint,A=(0,Q.getEntityLintDetails)(r.name,"security_definer_view",["ERROR","WARN"],R,m).hasLint,k=(0,Q.getEntityLintDetails)(r.name,"materialized_view_in_api",["ERROR","WARN"],R,m).hasLint,W=(0,Q.getEntityLintDetails)(r.name,"foreign_table_in_api",["ERROR","WARN"],R,m).hasLint,{exportCsv:X,confirmationModal:eo}=(0,ei.useExportAllRowsAsCsv)({enabled:!0,projectRef:s,connectionString:u?.connectionString??null,entity:r,type:"fetch_all",totalRows:C}),{exportSql:el,confirmationModal:ec}=(0,ei.useExportAllRowsAsSql)({enabled:!0,projectRef:s,connectionString:u?.connectionString??null,entity:r,type:"fetch_all",totalRows:C});return(0,t.jsxs)(U.EditorTablePageLink,{title:r.name,style:n,id:String(r.id),href:`/project/${s}/editor/${r.id}?schema=${r.schema}&${c.LOAD_TAB_FROM_CACHE_PARAM}=true`,role:"button","aria-label":`View ${r.name}`,className:(0,Z.cn)((0,er.TreeViewItemVariant)({isSelected:j&&!b,isOpened:f&&!b,isPreview:b}),"pl-4 pr-1"),onDoubleClick:e=>{e.preventDefault();let t=(0,J.createTabId)(r.type,{id:r.id});x.makeTabPermanent(t)},children:[(0,t.jsxs)(t.Fragment,{children:[j&&(0,t.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,t.jsxs)(es.Tooltip,{disableHoverableContent:!0,children:[(0,t.jsx)(es.TooltipTrigger,{className:"min-w-4",children:(0,t.jsx)(z.EntityTypeIcon,{type:r.type,isActive:j})}),(0,t.jsx)(es.TooltipContent,{side:"bottom",children:(l=r.type,(d=Object.entries(g.ENTITY_TYPE).find(([,e])=>e===l)?.[0]?.toLowerCase()?.split("_")?.join(" ")||"").charAt(0).toUpperCase()+d.slice(1))})]}),(0,t.jsxs)("div",{className:(0,Z.cn)("truncate overflow-hidden text-ellipsis whitespace-nowrap flex items-center gap-2 relative w-full",j&&"text-foreground"),children:[(0,t.jsx)("span",{className:(0,Z.cn)(j?"text-foreground":"text-foreground-light group-hover:text-foreground","text-sm transition truncate"),children:r.name}),(0,t.jsx)("div",{children:(0,t.jsx)(en,{entity:r,tableHasLints:I,viewHasLints:A,materializedViewHasLints:k,foreignTableHasLints:W})})]}),y&&(0,t.jsxs)(et.DropdownMenu,{children:[(0,t.jsx)(et.DropdownMenuTrigger,{asChild:!0,className:"text-foreground-lighter transition-all text-transparent group-hover:text-foreground data-[state=open]:text-foreground",children:(0,t.jsx)(_.Button,{type:"text",className:"w-6 h-6",icon:(0,t.jsx)(M.MoreVertical,{size:14,strokeWidth:2}),onClick:e=>e.preventDefault()})}),(0,t.jsxs)(et.DropdownMenuContent,{side:"bottom",align:"start",className:"w-44",children:[(0,t.jsxs)(et.DropdownMenuItem,{className:"space-x-2",onClick:e=>{e.stopPropagation(),(0,ee.copyToClipboard)(r.name)},children:[(0,t.jsx)(P.Copy,{size:12}),(0,t.jsx)("span",{children:"Copy name"})]},"copy-name"),ea(r)&&(0,t.jsxs)(et.DropdownMenuItem,{className:"space-x-2",onClick:async e=>{e.stopPropagation();let t=B.toast.loading("Getting table schema..."),s=await (0,V.getTableDefinition)({id:r.id,projectRef:u?.ref,connectionString:u?.connectionString});if(!s)return B.toast.error("Failed to get table schema",{id:t});try{let e=(0,H.formatSql)(s);await (0,ee.copyToClipboard)(e),B.toast.success("Table schema copied to clipboard",{id:t})}catch(e){B.toast.error("Failed to copy schema: "+(e.message||e),{id:t})}},children:[(0,t.jsx)(P.Copy,{size:12}),(0,t.jsx)("span",{children:"Copy table schema"})]},"copy-schema"),r.type===g.ENTITY_TYPE.TABLE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et.DropdownMenuSeparator,{}),(0,t.jsxs)(et.DropdownMenuItem,{className:"space-x-2",onClick:e=>{e.stopPropagation(),p.onEditTable()},children:[(0,t.jsx)(L.Edit,{size:12}),(0,t.jsx)("span",{children:"Edit table"})]},"edit-table"),(0,t.jsxs)(et.DropdownMenuItem,{className:"space-x-2",onClick:e=>{e.stopPropagation(),p.onDuplicateTable()},children:[(0,t.jsx)(P.Copy,{size:12}),(0,t.jsx)("span",{children:"Duplicate table"})]},"duplicate-table"),(0,t.jsx)(et.DropdownMenuItem,{className:"space-x-2",asChild:!0,children:(0,t.jsxs)(F.default,{href:`/project/${s}/auth/policies?schema=${m}&search=${r.id}`,children:[(0,t.jsx)($.Lock,{size:12}),(0,t.jsx)("span",{children:"View policies"})]},"view-policies")},"view-policies"),(0,t.jsxs)(et.DropdownMenuSub,{children:[(0,t.jsxs)(et.DropdownMenuSubTrigger,{className:"gap-x-2",children:[(0,t.jsx)(D.Download,{size:12}),"Export data"]}),(0,t.jsxs)(et.DropdownMenuSubContent,{children:[(0,t.jsx)(et.DropdownMenuItem,{className:"space-x-2",onClick:e=>{e.stopPropagation(),X()},children:(0,t.jsx)("span",{children:"Export table as CSV"})},"download-table-csv"),(0,t.jsx)(et.DropdownMenuItem,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),el()},children:(0,t.jsx)("span",{children:"Export table as SQL"})},"download-table-sql"),(0,t.jsx)(et.DropdownMenuItem,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),o()},children:(0,t.jsx)("span",{children:"Export table via CLI"})},"download-table-cli")]})]}),(0,t.jsx)(et.DropdownMenuSeparator,{}),(0,t.jsxs)(et.DropdownMenuItem,{className:"gap-x-2",onClick:e=>{e.stopPropagation(),p.onDeleteTable()},children:[(0,t.jsx)(O.Trash,{size:12}),(0,t.jsx)("span",{children:"Delete table"})]},"delete-table")]})]})]})]}),eo,ec]})};var el=e.i(384706);let ec=()=>(0,t.jsx)(A.InnerSideBarEmptyPanel,{title:"No tables or views",description:"Any tables or views you create will be listed here.",className:"mx-4",children:(0,t.jsx)("div",{className:"top-0 left-6 flex flex-col opacity-50 cursor-not-allowed bg-dash-sidebar h-content -mb-7 pointer-events-none scale-75",children:(0,t.jsxs)("div",{className:"relative h-content",children:[(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-10",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent from-80% to-100% to-background-surface-100 dark:to-background-surface-75"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent from-50% to-100% to-background-surface-100 dark:to-background-surface-75"})]}),(0,t.jsx)("div",{className:"absolute left-[150px] bottom-[21px] text-foreground-muted z-10 pointer-events-none",children:(0,t.jsx)(el.Pointer,{size:16,className:"text-foreground-light",strokeWidth:1.5})}),[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"border-l pointer-events-none",children:(0,t.jsxs)("div",{className:(0,Z.cn)("group",(0,er.TreeViewItemVariant)({isSelected:2===s,isOpened:2===s,isPreview:!1}),"px-4 min-w-40"),"aria-selected":2===s,children:[2===s&&(0,t.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),(0,t.jsx)(z.EntityTypeIcon,{type:"r"}),`postgres_table_${s}`]})},`some-${s}`))]})})});var ed=e.i(201844);e.s(["TableEditorMenu",0,()=>{let{id:e,ref:P}=(0,n.useParams)(),D=e?Number(e):void 0,L=(0,T.useTableEditorStateSnapshot)(),{selectedSchema:$,setSelectedSchema:M}=(0,w.useQuerySchemaState)(),O=(0,o.useBreakpoint)(),[F,B]=(0,a.useState)(""),[q,Q]=(0,a.useState)(),[z,W]=(0,a.useState)(Object.values(g.ENTITY_TYPE)),[V,Y]=(0,y.useLocalStorage)("table-editor-sort","alphabetical"),{data:U}=(0,v.useSelectedProjectQuery)(),{data:K,isLoading:H,isSuccess:G,isError:J,error:X,hasNextPage:Z,isFetchingNextPage:ee,fetchNextPage:et}=(0,b.useEntityTypesQuery)({projectRef:U?.ref,connectionString:U?.connectionString,schemas:[$],search:F.trim()||void 0,sort:V,filterTypes:z},{placeholderData:F?ed.keepPreviousData:void 0}),es=(0,a.useMemo)(()=>K?.pages.flatMap(e=>e.data.entities),[K?.pages]),{can:er}=(0,j.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_WRITE,"tables"),{isSchemaLocked:ei}=(0,S.useIsProtectedSchema)({schema:$}),{data:ea}=(0,f.useTableEditorQuery)({projectRef:U?.ref,connectionString:U?.connectionString,id:D});ea?.schema&&!$&&M(ea.schema);let en=(0,k.useTableEditorTabsCleanUp)(),el=(0,a.useCallback)(async e=>{let t=await (0,f.getTableEditor)({id:e,projectRef:P,connectionString:U?.connectionString});Q(t&&(0,c.parseSupaTable)(t))},[U?.connectionString,P]),eu=(0,a.useCallback)(e=>{let t=es?.[e];return t?.id?String(t.id):`table-editor-entity-${e}`},[es]),ep=(0,a.useMemo)(()=>({projectRef:U?.ref,id:Number(D),isLocked:ei,onExportCLI:()=>el(Number(D))}),[U?.ref,D,ei,el]);return(0,a.useEffect)(()=>{es&&!F&&en({schemas:[$],entities:es})},[es,F,$,en]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col flex-grow gap-5 pt-5 h-full",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1.5",children:[(0,t.jsx)(x.default,{className:"mx-4",selectedSchemaName:$,onSelectSchema:e=>{B(""),M(e)},onSelectCreateSchema:()=>L.onAddSchema(),portal:!O}),(0,t.jsx)("div",{className:"grid gap-3 mx-4",children:ei?(0,t.jsx)(d.ProtectedSchemaWarning,{size:"sm",schema:$,entity:"table"}):(0,t.jsx)(m.ButtonTooltip,{block:!0,title:"Create a new table",name:"New table",disabled:!er,size:"tiny",icon:(0,t.jsx)(i.Plus,{size:14,strokeWidth:1.5,className:"text-foreground-muted"}),type:"default",className:"justify-start",onClick:()=>L.onAddTable(),tooltip:{content:{side:"bottom",text:er?void 0:"You need additional permissions to create tables"}},children:"New table"})})]}),(0,t.jsxs)("div",{className:"grow min-h-0 flex flex-col gap-2 pb-4",children:[(0,t.jsxs)(A.InnerSideBarFilters,{className:"mx-2",children:[(0,t.jsx)(A.InnerSideBarFilterSearchInput,{autoFocus:!O,name:"search-tables",value:F,placeholder:"Search tables...","aria-labelledby":"Search tables",onChange:e=>B(e.target.value),children:(0,t.jsxs)(A.InnerSideBarFilterSortDropdown,{value:V,onValueChange:e=>Y(e),children:[(0,t.jsx)(A.InnerSideBarFilterSortDropdownItem,{value:"alphabetical",className:"flex gap-2",children:"Alphabetical"},"alphabetical"),(0,t.jsx)(A.InnerSideBarFilterSortDropdownItem,{value:"grouped-alphabetical",children:"Entity Type"},"grouped-alphabetical")]})}),(0,t.jsxs)(I.Popover_Shadcn_,{children:[(0,t.jsx)(R.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(_.Button,{type:5!==z.length?"default":"dashed",className:"h-[32px] md:h-[28px] px-1.5",icon:(0,t.jsx)(r.Filter,{})})}),(0,t.jsx)(C.PopoverContent_Shadcn_,{className:"p-0 w-56",side:"bottom",align:"center",children:(0,t.jsxs)("div",{className:"px-3 pt-3 pb-2 flex flex-col gap-y-2",children:[(0,t.jsx)("p",{className:"text-xs",children:"Show entity types"}),(0,t.jsx)("div",{className:"flex flex-col",children:Object.entries(g.ENTITY_TYPE).map(([e,s])=>(0,t.jsxs)("div",{className:"group flex items-center justify-between py-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(N.Checkbox_Shadcn_,{id:e,name:e,checked:z.includes(s),onCheckedChange:()=>{z.includes(s)?W(z.filter(e=>e!==s)):W(z.concat([s]))}}),(0,t.jsx)(E.Label_Shadcn_,{htmlFor:e,className:"capitalize text-xs",children:e.toLowerCase().replace("_"," ")})]}),(0,t.jsx)(_.Button,{size:"tiny",type:"default",onClick:()=>W([s]),className:"transition opacity-0 group-hover:opacity-100 h-auto px-1 py-0.5",children:"Select only"})]},e))})]})})]})]}),H&&(0,t.jsx)(u.default,{}),J&&(0,t.jsx)("div",{className:"mx-4",children:(0,t.jsx)(p.default,{error:X??null,subject:"Failed to retrieve tables"})}),G&&(0,t.jsxs)(t.Fragment,{children:[0===F.length&&(es?.length??0)<=0&&(0,t.jsx)(ec,{}),F.length>0&&(es?.length??0)<=0&&(0,t.jsx)(A.InnerSideBarEmptyPanel,{className:"mx-2",title:"No results found",description:`Your search for "${F}" did not return any results`}),(es?.length??0)>0&&(0,t.jsx)("div",{className:"flex flex-1 min-h-0 w-full","data-testid":"tables-list",children:(0,t.jsx)(h.InfiniteListDefault,{className:"h-full w-full",items:es,ItemComponent:eo,LoaderComponent:h.LoaderForIconMenuItems,itemProps:ep,getItemKey:eu,getItemSize:e=>0!==e&&e===es.length?85:28,hasNextPage:Z,isLoadingNextPage:ee,onLoadNextPage:et})})]})]})]}),(0,t.jsx)(l.ExportDialog,{ignoreRoleImpersonation:!0,table:q,open:!!q,onOpenChange:e=>{e||Q(void 0)}})]})}],207831)}]);

//# debugId=eb902426-e86a-aead-41d6-049b61b886d8
//# sourceMappingURL=1286c35c4c2fd04e.js.map