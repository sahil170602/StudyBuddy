;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="da7425c1-3a0b-3c0f-ab69-be7ffb639c77")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,876298,e=>{"use strict";var t=e.i(991435),r=e.i(416785);e.i(128328);var s=e.i(947748);let i=(0,t.proxy)({activeDocsSection:["introduction"],docsLanguage:"js",showProjectApiDocs:!1,showCreateBranchModal:!1,showAiSettingsModal:!1,showConnectDialog:!1,ongoingQueriesPanelOpen:!1,mobileMenuOpen:!1,showSidebar:!0,showEditorPanel:!1,lastRouteBeforeVisitingAccountPage:"",activeDocsSection:["introduction"],docsLanguage:"js",showProjectApiDocs:!1,setShowProjectApiDocs:e=>{i.showProjectApiDocs=e},setActiveDocsSection:e=>{i.activeDocsSection=e},setDocsLanguage:e=>{i.docsLanguage=e},isOptedInTelemetry:!1,setIsOptedInTelemetry:e=>{i.isOptedInTelemetry=null!==e&&e,null!==e&&localStorage.setItem(s.LOCAL_STORAGE_KEYS.TELEMETRY_CONSENT,e.toString())},isMfaEnforced:!1,setIsMfaEnforced:e=>{i.isMfaEnforced=e},showCreateBranchModal:!1,setShowCreateBranchModal:e=>{i.showCreateBranchModal=e},showAiSettingsModal:!1,setShowAiSettingsModal:e=>{i.showAiSettingsModal=e},showSidebar:!0,setShowSidebar:e=>{i.showSidebar=e},showOngoingQueriesPanelOpen:!1,setOnGoingQueriesPanelOpen:e=>{i.ongoingQueriesPanelOpen=e},mobileMenuOpen:!1,setMobileMenuOpen:e=>{i.mobileMenuOpen=e},lastRouteBeforeVisitingAccountPage:"",setLastRouteBeforeVisitingAccountPage:e=>{i.lastRouteBeforeVisitingAccountPage=e}});e.s(["getAppStateSnapshot",0,()=>(0,t.snapshot)(i),"useAppStateSnapshot",0,e=>(0,r.useSnapshot)(i,e)])},597511,899242,e=>{"use strict";var t=e.i(478902),r=e.i(263787),s=e.i(774803),i=e.i(655605),n=e.i(896975),a=e.i(215261),o=e.i(898452),l=e.i(22194),c=e.i(10429),h=e.i(912793),u=e.i(432478),d=e.i(876298),p=e.i(837710),f=e.i(874311);let g=[{name:"Dark",value:"dark"},{name:"Light",value:"light"},{name:"Classic Dark",value:"classic-dark"},{name:"System",value:"system"}];e.s(["singleThemes",0,g],899242);var m=e.i(573375),b=e.i(920474),y=e.i(463333);function w(){let e=(0,o.useRouter)(),{theme:w,setTheme:v}=(0,n.useTheme)(),E=(0,d.useAppStateSnapshot)(),_=(0,h.useIsFeatureEnabled)("profile:show_email"),{username:S,avatarUrl:T,primaryEmail:k,isLoading:O}=(0,u.useProfileNameAndPicture)();(0,b.useSetCommandMenuOpen)(),(0,m.useCommandMenuOpenedTelemetry)();let{openFeaturePreviewModal:j}=(0,y.useFeaturePreviewModal)();return(0,t.jsxs)(f.DropdownMenu,{children:[(0,t.jsx)(f.DropdownMenuTrigger,{asChild:!0,className:"border flex-shrink-0 px-3",children:(0,t.jsx)(p.Button,{type:"default",className:"[&>span]:flex px-0 py-0 rounded-full overflow-hidden h-8 w-8",children:O?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(s.Loader2,{className:"animate-spin text-foreground-lighter",size:16})}):(0,t.jsx)(l.ProfileImage,{alt:S,src:T,className:"w-8 h-8 rounded-md"})})}),(0,t.jsxs)(f.DropdownMenuContent,{side:"bottom",align:"end",children:[c.IS_PLATFORM&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1 flex flex-col gap-0 text-sm",children:!!S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{title:S,className:"w-full text-left text-foreground truncate",children:S}),k!==S&&_&&(0,t.jsx)("span",{title:k,className:"w-full text-left text-foreground-light text-xs truncate",children:k})]})}),(0,t.jsx)(f.DropdownMenuSeparator,{}),(0,t.jsxs)(f.DropdownMenuGroup,{children:[(0,t.jsx)(f.DropdownMenuItem,{className:"flex gap-2",asChild:!0,children:(0,t.jsxs)(a.default,{href:"/account/me",onClick:()=>{"/account/me"!==e.pathname&&E.setLastRouteBeforeVisitingAccountPage(e.asPath)},children:[(0,t.jsx)(i.Settings,{size:14,strokeWidth:1.5,className:"text-foreground-lighter"}),"Account preferences"]})}),(0,t.jsxs)(f.DropdownMenuItem,{className:"flex gap-2",onClick:j,onSelect:j,children:[(0,t.jsx)(r.FlaskConical,{size:14,strokeWidth:1.5,className:"text-foreground-lighter"}),"Feature previews"]}),(0,t.jsx)(f.DropdownMenuSeparator,{})]})]}),(0,t.jsxs)(f.DropdownMenuGroup,{children:[(0,t.jsx)(f.DropdownMenuLabel,{children:"Theme"}),(0,t.jsx)(f.DropdownMenuRadioGroup,{value:w,onValueChange:e=>{v(e)},children:g.map(e=>(0,t.jsx)(f.DropdownMenuRadioItem,{value:e.value,children:e.name},e.value))})]}),c.IS_PLATFORM&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.DropdownMenuSeparator,{}),(0,t.jsx)(f.DropdownMenuGroup,{children:(0,t.jsx)(f.DropdownMenuItem,{onSelect:()=>{e.push("/logout")},children:"Log out"})})]})]})]})}e.s(["UserDropdown",()=>w],597511)},217561,e=>{"use strict";let t;var r=e.i(744541);let s=(t=0,()=>(t+=1,`u${`0000${(1679616*Math.random()|0).toString(36)}`.slice(-4)}${t}`));function i(e){let t=[];for(let r=0,s=e.length;r<s;r++)t.push(e[r]);return t}function n(e,t){let r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function a(e,t={}){let r,s,i,o;return{width:t.width||(r=n(e,"border-left-width"),s=n(e,"border-right-width"),e.clientWidth+r+s),height:t.height||(i=n(e,"border-top-width"),o=n(e,"border-bottom-width"),e.clientHeight+i+o)}}function o(e){return new Promise((t,r)=>{let s=new Image;s.decode=()=>t(s),s.onload=()=>t(s),s.onerror=r,s.crossOrigin="anonymous",s.decoding="async",s.src=e})}async function l(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function c(e,t,r){let s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),n=document.createElementNS(s,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${r}`),i.setAttribute("viewBox",`0 0 ${t} ${r}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),i.appendChild(n),n.appendChild(e),l(i)}let h=(e,t)=>{if(e instanceof t)return!0;let r=Object.getPrototypeOf(e);return null!==r&&(r.constructor.name===t.name||h(r,t))};function u(e,t,r){let n,a,o,l=window.getComputedStyle(e,r),c=l.getPropertyValue("content");if(""===c||"none"===c)return;let h=s();try{t.className=`${t.className} ${h}`}catch(e){return}let u=document.createElement("style");u.appendChild((n=`.${h}:${r}`,o=l.cssText?(a=l.getPropertyValue("content"),`${l.cssText} content: '${a.replace(/'|"/g,"")}';`):i(l).map(e=>{let t=l.getPropertyValue(e),r=l.getPropertyPriority(e);return`${e}: ${t}${r?" !important":""};`}).join(" "),document.createTextNode(`${n}{${o}}`))),t.appendChild(u)}let d="application/font-woff",p="image/jpeg",f={woff:d,woff2:d,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:p,jpeg:p,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function g(e){let t;return f[((t=/\.([^./]*?)$/g.exec(e))?t[1]:"").toLowerCase()]||""}function m(e){return -1!==e.search(/^(data:)/)}function b(e,t){return`data:${t};base64,${e}`}async function y(e,t,r){let s=await fetch(e,t);if(404===s.status)throw Error(`Resource "${s.url}" not found`);let i=await s.blob();return new Promise((e,t)=>{let n=new FileReader;n.onerror=t,n.onloadend=()=>{try{e(r({res:s,result:n.result}))}catch(e){t(e)}},n.readAsDataURL(i)})}let w={};async function v(e,t,r){var s,i,n;let a,o,l=(s=e,i=t,n=r.includeQueryParams,o=s.replace(/\?.*/,""),n&&(o=s),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),i?`[${i}]${o}`:o);if(null!=w[l])return w[l];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{let s=await y(e,r.fetchRequestInit,({res:e,result:r})=>(t||(t=e.headers.get("Content-Type")||""),r.split(/,/)[1]));a=b(s,t)}catch(s){a=r.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;s&&(t="string"==typeof s?s:s.message),t&&console.warn(t)}return w[l]=a,a}async function E(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):o(t)}async function _(e,t){if(e.currentSrc){let t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==r||r.drawImage(e,0,0,t.width,t.height),o(t.toDataURL())}let r=e.poster,s=g(r);return o(await v(r,s,t))}async function S(e){var t;try{if(null==(t=null==e?void 0:e.contentDocument)?void 0:t.body)return await j(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}async function T(e,t){return h(e,HTMLCanvasElement)?E(e):h(e,HTMLVideoElement)?_(e,t):h(e,HTMLIFrameElement)?S(e):e.cloneNode(!1)}async function k(e,t,r){var s,n;let a=[];return 0===(a=null!=e.tagName&&"SLOT"===e.tagName.toUpperCase()&&e.assignedNodes?i(e.assignedNodes()):h(e,HTMLIFrameElement)&&(null==(s=e.contentDocument)?void 0:s.body)?i(e.contentDocument.body.childNodes):i((null!=(n=e.shadowRoot)?n:e).childNodes)).length||h(e,HTMLVideoElement)||await a.reduce((e,s)=>e.then(()=>j(s,r)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function O(e,t){let r=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===r.length)return e;let s={};for(let i=0;i<r.length;i++){let n=r[i].getAttribute("xlink:href");if(n){let r=e.querySelector(n),i=document.querySelector(n);r||!i||s[n]||(s[n]=await j(i,t,!0))}}let i=Object.values(s);if(i.length){let t="http://www.w3.org/1999/xhtml",r=document.createElementNS(t,"svg");r.setAttribute("xmlns",t),r.style.position="absolute",r.style.width="0",r.style.height="0",r.style.overflow="hidden",r.style.display="none";let s=document.createElementNS(t,"defs");r.appendChild(s);for(let e=0;e<i.length;e++)s.appendChild(i[e]);e.appendChild(r)}return e}async function j(e,t,r){return r||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>T(e,t)).then(r=>k(e,r,t)).then(t=>(function(e,t){if(h(t,Element)&&(!function(e,t){let r=t.style;if(!r)return;let s=window.getComputedStyle(e);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):i(s).forEach(i=>{let n=s.getPropertyValue(i);if("font-size"===i&&n.endsWith("px")){let e=Math.floor(parseFloat(n.substring(0,n.length-2)))-.1;n=`${e}px`}h(e,HTMLIFrameElement)&&"display"===i&&"inline"===n&&(n="block"),"d"===i&&t.getAttribute("d")&&(n=`path(${t.getAttribute("d")})`),r.setProperty(i,n,s.getPropertyPriority(i))})}(e,t),u(e,t,":before"),u(e,t,":after"),h(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),h(e,HTMLInputElement)&&t.setAttribute("value",e.value),h(e,HTMLSelectElement))){let r=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}return t})(e,t)).then(e=>O(e,t)):null}let x=/url\((['"]?)([^'"]+?)\1\)/g,C=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,A=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function P(e,t,r,s,i){try{let n,a,o=r?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let r=document.implementation.createHTMLDocument(),s=r.createElement("base"),i=r.createElement("a");return r.head.appendChild(s),r.body.appendChild(i),t&&(s.href=t),i.href=e,i.href}(t,r):t,l=g(t);if(i){let e=await i(o);n=b(e,l)}else n=await v(o,l,s);return e.replace((a=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),RegExp(`(url\\(['"]?)(${a})(['"]?\\))`,"g")),`$1${n}$3`)}catch(e){}return e}function $(e){return -1!==e.search(x)}async function N(e,t,r){let s;if(!$(e))return e;let i=function(e,{preferredFontFormat:t}){return t?e.replace(A,e=>{for(;;){let[r,,s]=C.exec(e)||[];if(!s)return"";if(s===t)return`src: ${r};`}}):e}(e,r);return(s=[],i.replace(x,(e,t,r)=>(s.push(r),e)),s.filter(e=>!m(e))).reduce((e,s)=>e.then(e=>P(e,s,t,r)),Promise.resolve(i))}async function R(e,t,r){var s;let i=null==(s=t.style)?void 0:s.getPropertyValue(e);if(i){let s=await N(i,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function I(e,t){await R("background",e,t)||await R("background-image",e,t),await R("mask",e,t)||await R("mask-image",e,t)}async function L(e,t){let r=h(e,HTMLImageElement);if(!(r&&!m(e.src))&&!(h(e,SVGImageElement)&&!m(e.href.baseVal)))return;let s=r?e.src:e.href.baseVal,i=await v(s,g(s),t);await new Promise((t,s)=>{e.onload=t,e.onerror=s,e.decode&&(e.decode=t),"lazy"===e.loading&&(e.loading="eager"),r?(e.srcset="",e.src=i):e.href.baseVal=i})}async function D(e,t){let r=i(e.childNodes).map(e=>U(e,t));await Promise.all(r).then(()=>e)}async function U(e,t){h(e,Element)&&(await I(e,t),await L(e,t),await D(e,t))}let B={};async function M(e){let t=B[e];if(null!=t)return t;let r=await fetch(e);return t={url:e,cssText:await r.text()},B[e]=t,t}async function F(e,t){let r=e.cssText,s=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((r.match(/url\([^)]+\)/g)||[]).map(async i=>{let n=i.replace(s,"$1");return n.startsWith("https://")||(n=new URL(n,e.url).href),y(n,t.fetchRequestInit,({result:e})=>(r=r.replace(i,`url(${e})`),[i,e]))})).then(()=>r)}function V(e){if(null==e)return[];let t=[],r=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),s=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=s.exec(r);if(null===e)break;t.push(e[0])}r=r.replace(s,"");let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,n=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(r);if(null===e){if(null===(e=n.exec(r)))break;i.lastIndex=n.lastIndex}else n.lastIndex=i.lastIndex;t.push(e[0])}return t}async function H(e,t){let r=[],s=[];return e.forEach(r=>{if("cssRules"in r)try{i(r.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let n=i+1,a=e.href,o=M(a).then(e=>F(e,t)).then(e=>V(e).forEach(e=>{try{r.insertRule(e,e.startsWith("@import")?n+=1:r.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});s.push(o)}})}catch(n){let i=e.find(e=>null==e.href)||document.styleSheets[0];null!=r.href&&s.push(M(r.href).then(e=>F(e,t)).then(e=>V(e).forEach(e=>{i.insertRule(e,r.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",n)}}),Promise.all(s).then(()=>(e.forEach(e=>{if("cssRules"in e)try{i(e.cssRules||[]).forEach(e=>{r.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),r))}async function W(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let r=i(e.ownerDocument.styleSheets);return(await H(r,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>$(e.style.getPropertyValue("src")))}async function J(e,t){let r=await W(e,t);return(await Promise.all(r.map(e=>{let r=e.parentStyleSheet?e.parentStyleSheet.href:null;return N(e.cssText,r,t)}))).join("\n")}async function G(e,t){let r=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await J(e,t);if(r){let t=document.createElement("style"),s=document.createTextNode(r);t.appendChild(s),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function z(e,t={}){let{width:r,height:s}=a(e,t),i=await j(e,t,!0);return await G(i,t),await U(i,t),!function(e,t){let{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);let s=t.style;null!=s&&Object.keys(s).forEach(e=>{r[e]=s[e]})}(i,t),await c(i,r,s)}async function q(e,t={}){let{width:s,height:i}=a(e,t),n=await z(e,t),l=await o(n),c=document.createElement("canvas"),h=c.getContext("2d"),u=t.pixelRatio||function(){let e,t;try{t=r.default}catch(e){}let s=t&&t.env?t.env.devicePixelRatio:null;return s&&Number.isNaN(e=parseInt(s,10))&&(e=1),e||window.devicePixelRatio||1}(),d=t.canvasWidth||s,p=t.canvasHeight||i;return c.width=d*u,c.height=p*u,!t.skipAutoScale&&(c.width>16384||c.height>16384)&&(c.width>16384&&c.height>16384?c.width>c.height?(c.height*=16384/c.width,c.width=16384):(c.width*=16384/c.height,c.height=16384):c.width>16384?(c.height*=16384/c.width,c.width=16384):(c.width*=16384/c.height,c.height=16384)),c.style.width=`${d}`,c.style.height=`${p}`,t.backgroundColor&&(h.fillStyle=t.backgroundColor,h.fillRect(0,0,c.width,c.height)),h.drawImage(l,0,0,c.width,c.height),c}async function K(e,t={}){return(await q(e,t)).toDataURL()}e.s(["toPng",()=>K,"toSvg",()=>z],217561)},911298,e=>{"use strict";let t=(0,e.i(388019).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],911298)},275185,e=>{"use strict";let t=(0,e.i(388019).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],275185)},194213,e=>{"use strict";let t=(0,e.i(388019).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],194213)},361208,536841,e=>{"use strict";var t=e.i(242882),r=e.i(234745),s=e.i(10429);async function i({prompt:e},t){if(!e)return null;let i=await (0,r.constructHeaders)({"Content-Type":"application/json"}),n=await (0,r.fetchHandler)(`${s.BASE_PATH}/api/ai/feedback/classify`,{method:"POST",body:JSON.stringify({prompt:e}),headers:i,credentials:"include",signal:t});if(!n.ok){let{error:e}=await n.json();(0,r.handleError)("object"==typeof e?e:"string"==typeof e?{message:e}:{message:"Unknown error"})}return(await n.json()).feedback_category}e.s(["useFeedbackCategoryQuery",0,({prompt:e},{enabled:r=!0,...s}={})=>(0,t.useQuery)({queryKey:["feedback-category",e],queryFn:({signal:t})=>i({prompt:e},t),enabled:r&&!!e,...s})],361208);var n=e.i(38429),a=e.i(355901);async function o({message:e,pathname:t,projectRef:s,organizationSlug:i}){let{data:n,error:a}=await (0,r.post)("/platform/feedback/send",{body:{message:e,category:"Feedback",tags:["dashboard-feedback"],projectRef:s,organizationSlug:i,pathname:t}});return a&&(0,r.handleError)(a),n}e.s(["useSendFeedbackMutation",0,({onError:e,...t}={})=>(0,n.useMutation)({mutationFn:e=>o(e),async onError(t,r,s){void 0===e?a.toast.error(`Failed to submit feedback: ${t.message}`):e(t,r,s)},...t})],536841)},162530,e=>{"use strict";var t=e.i(767073);e.s(["PopoverSeparator_Shadcn_",()=>t.PopoverSeparator])},693745,e=>{"use strict";e.s([],726817),e.i(726817);var t,r,s=e.i(274466);class i extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class n extends i{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends i{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends i{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(t=r||(r={})).Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2";class l{constructor(e,{headers:t={},customFetch:s,region:i=r.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,s.__awaiter)(this,arguments,void 0,function*(e,t={}){var r;let s,i;try{let l,{headers:c,method:h,body:u,signal:d,timeout:p}=t,f={},{region:g}=t;g||(g=this.region);let m=new URL(`${this.url}/${e}`);g&&"any"!==g&&(f["x-region"]=g,m.searchParams.set("forceFunctionRegion",g)),u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?"undefined"!=typeof Blob&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",l=u):"string"==typeof u?(f["Content-Type"]="text/plain",l=u):"undefined"!=typeof FormData&&u instanceof FormData?l=u:(f["Content-Type"]="application/json",l=JSON.stringify(u)):l=u;let b=d;p&&(i=new AbortController,s=setTimeout(()=>i.abort(),p),d?(b=i.signal,d.addEventListener("abort",()=>i.abort())):b=i.signal);let y=yield this.fetch(m.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:l,signal:b}).catch(e=>{throw new n(e)}),w=y.headers.get("x-relay-error");if(w&&"true"===w)throw new a(y);if(!y.ok)throw new o(y);let v=(null!=(r=y.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===v?yield y.json():"application/octet-stream"===v||"application/pdf"===v?yield y.blob():"text/event-stream"===v?y:"multipart/form-data"===v?yield y.formData():yield y.text(),error:null,response:y}}catch(e){return{data:null,error:e,response:e instanceof o||e instanceof a?e.context:void 0}}finally{s&&clearTimeout(s)}})}}e.s(["FunctionRegion",()=>r,"FunctionsClient",()=>l,"FunctionsError",()=>i,"FunctionsFetchError",()=>n,"FunctionsHttpError",()=>o,"FunctionsRelayError",()=>a],693745)},334989,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},529550,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(274466).__importDefault(e.r(334989));r.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,i,n;let a=null,o=null,l=null,c=e.status,h=e.statusText;if(e.ok){if("HEAD"!==this.method){let r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(t=this.headers.get("Accept"))?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}let s=null==(r=this.headers.get("Prefer"))?void 0:r.match(/count=(exact|planned|estimated)/),n=null==(i=e.headers.get("content-range"))?void 0:i.split("/");s&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,h="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,c=200,h="OK")}catch(r){404===e.status&&""===t?(c=204,h="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null==(n=null==a?void 0:a.details)?void 0:n.includes("0 rows"))&&(a=null,c=200,h="OK"),a&&this.shouldThrowOnError)throw new s.default(a)}return{error:a,data:o,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s,i,n,a;let o="",l=null==e?void 0:e.cause;if(l){let n=null!=(t=null==l?void 0:l.message)?t:"",a=null!=(r=null==l?void 0:l.code)?r:"";o=`${null!=(s=null==e?void 0:e.name)?s:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(i=null==l?void 0:l.name)?i:"Error"}: ${n}`,a&&(o+=` (${a})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!=(n=null==e?void 0:e.stack)?n:"";return{error:{message:`${null!=(a=null==e?void 0:e.name)?a:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},871564,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(274466).__importDefault(e.r(529550));class i extends s.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let n=i?`${i}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let i=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:n="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.get("Accept"))?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}r.default=i},758043,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(274466).__importDefault(e.r(871564)),i=RegExp("[,()]");class n extends s.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&i.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=n},481128,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(274466).__importDefault(e.r(758043));r.default=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){let{head:r=!1,count:i}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new s.default({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(i=this.fetch)?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}}},797226,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(274466),i=s.__importDefault(e.r(481128)),n=s.__importDefault(e.r(758043));class a{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");let t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let o,l,c=new URL(`${this.url}/rpc/${e}`);r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{c.searchParams.append(e,t)})):(o="POST",l=t);let h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new n.default({method:o,url:c,headers:h,schema:this.schemaName,body:l,fetch:null!=(a=this.fetch)?a:fetch})}}r.default=a},84322,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let s=e.r(274466),i=s.__importDefault(e.r(797226));r.PostgrestClient=i.default;let n=s.__importDefault(e.r(481128));r.PostgrestQueryBuilder=n.default;let a=s.__importDefault(e.r(758043));r.PostgrestFilterBuilder=a.default;let o=s.__importDefault(e.r(871564));r.PostgrestTransformBuilder=o.default;let l=s.__importDefault(e.r(529550));r.PostgrestBuilder=l.default;let c=s.__importDefault(e.r(334989));r.PostgrestError=c.default,r.default={PostgrestClient:i.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},695677,990803,672549,212167,690601,e=>{"use strict";var t,r,s,i,n,a,o,l,c,h,u,d,p,f,g,m,b,y,w,v=e.i(744541);let E=class{constructor(){}static detectEnvironment(){var t;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==v.default){let e=v.default.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};e.s(["default",0,E],990803);let _="1.0.0";(t=h||(h={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",(r=u||(u={})).closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",(s=d||(d={})).close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token",(p||(p={})).websocket="websocket",(i=f||(f={})).Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed";class S{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,t,r){let s=e.topic,i=null!=(p=e.ref)?p:"",n=null!=(f=e.join_ref)?f:"",a=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(n.length>255)throw Error(`joinRef length ${n.length} exceeds maximum of 255`);if(i.length>255)throw Error(`ref length ${i.length} exceeds maximum of 255`);if(s.length>255)throw Error(`topic length ${s.length} exceeds maximum of 255`);if(a.length>255)throw Error(`userEvent length ${a.length} exceeds maximum of 255`);if(l.length>255)throw Error(`metadata length ${l.length} exceeds maximum of 255`);let c=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+s.length+a.length+l.length,h=new ArrayBuffer(this.HEADER_LENGTH+c),u=new DataView(h),d=0;u.setUint8(d++,this.KINDS.userBroadcastPush),u.setUint8(d++,n.length),u.setUint8(d++,i.length),u.setUint8(d++,s.length),u.setUint8(d++,a.length),u.setUint8(d++,l.length),u.setUint8(d++,t),Array.from(n,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(i,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(s,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(a,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(l,e=>u.setUint8(d++,e.charCodeAt(0)));var p,f,g=new Uint8Array(h.byteLength+r.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(r),h.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,s,i,n,a]=JSON.parse(e);return t({join_ref:r,ref:s,topic:i,event:n,payload:a})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,s)}_decodeUserBroadcast(e,t,r){let s=t.getUint8(1),i=t.getUint8(2),n=t.getUint8(3),a=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+s));o+=s;let c=r.decode(e.slice(o,o+i));o+=i;let h=r.decode(e.slice(o,o+n));o+=n;let u=e.slice(o,e.byteLength),d=a===this.JSON_ENCODING?JSON.parse(r.decode(u)):u,p={type:this.BROADCAST_EVENT,event:c,payload:d};return n>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class T{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(n=g||(g={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange";let k=(e,t,r={})=>{var s;let i=null!=(s=r.skipTypes)?s:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=O(s,e,t,i),r),{}):{}},O=(e,t,r,s)=>{let i=t.find(t=>t.name===e),n=null==i?void 0:i.type,a=r[e];return n&&!s.includes(n)?j(n,a):x(a)},j=(e,t)=>{if("_"===e.charAt(0))return $(t,e.slice(1,e.length));switch(e){case g.bool:return C(t);case g.float4:case g.float8:case g.int2:case g.int4:case g.int8:case g.numeric:case g.oid:return A(t);case g.json:case g.jsonb:return P(t);case g.timestamp:return N(t);case g.abstime:case g.date:case g.daterange:case g.int4range:case g.int8range:case g.money:case g.reltime:case g.text:case g.time:case g.timestamptz:case g.timetz:case g.tsrange:case g.tstzrange:default:return x(t)}},x=e=>e,C=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},A=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},P=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},$=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s,i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch(e){s=i?i.split(","):[]}return s.map(e=>j(t,e))}return e},N=e=>"string"==typeof e?e.replace(" ","T"):e,R=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class I{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(a=m||(m={})).SYNC="sync",a.JOIN="join",a.LEAVE="leave";class L{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=L.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=L.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=L.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){let i=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{let r=i[e];if(r){let s=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),n=t.filter(e=>0>i.indexOf(e.presence_ref)),l=r.filter(e=>0>s.indexOf(e.presence_ref));n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,s)}static syncDiff(e,t,r,s){let{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;let n=null!=(i=e[t])?i:[];if(e[t]=this.cloneDeep(s),n.length>0){let r=e[t].map(e=>e.presence_ref),s=n.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...s)}r(t,n,s)}),this.map(n,(t,r)=>{let i=e[t];if(!i)return;let n=r.map(e=>e.presence_ref);i=i.filter(e=>0>n.indexOf(e.presence_ref)),e[t]=i,s(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let s=e[r];return"metas"in s?t[r]=s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}e.s(["REALTIME_PRESENCE_LISTEN_EVENTS",()=>m,"default",()=>L],672549),(o=b||(b={})).ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE",(l=y||(y={})).BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system",(c=w||(w={})).SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR";let D=u;class U{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=u.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new I(this,d.join,this.params,this.timeout),this.rejoinTimer=new T(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=u.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=u.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=u.errored,this.rejoinTimer.scheduleTimeout())}),this._on(d.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new L(this),this.broadcastEndpointURL=R(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(i=null==(s=this.params.config)?void 0:s.broadcast)?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==u.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params,l=null!=(s=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?s:[],c=!!this.bindings[y.PRESENCE]&&this.bindings[y.PRESENCE].length>0||(null==(i=this.params.config.presence)?void 0:i.enabled)===!0,h={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(w.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(w.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(w.SUBSCRIBED);return}{let s=this.bindings.postgres_changes,i=null!=(r=null==s?void 0:s.length)?r:0,n=[];for(let r=0;r<i;r++){let i=s[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,h=t&&t[r];if(h&&h.event===a&&h.schema===o&&h.table===l&&h.filter===c)n.push(Object.assign(Object.assign({},i),{id:h.id}));else{this.unsubscribe(),this.state=u.errored,null==e||e(w.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=n,e&&e(w.SUBSCRIBED);return}}).receive("error",t=>{this.state=u.errored,null==e||e(w.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(w.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===u.joined&&e===y.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;let i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");let n={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!=(s=r.timeout)?s:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,i,n;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(n=null==(i=null==(s=this.params)?void 0:s.config)?void 0:i.broadcast)?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:i,payload:n}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:n,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=t.timeout)?r:this.timeout);return await (null==(s=e.body)?void 0:s.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=u.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(d.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{(r=new I(this,d.leave,{},e)).receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=u.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let s=new AbortController,i=setTimeout(()=>s.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new I(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;let n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=d;if(r&&[a,o,l,c].indexOf(n)>=0&&r!==this._joinRef())return;let h=this._onMessage(n,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null==(s=this.bindings.postgres_changes)||s.filter(e=>{var t,r,s;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(s=null==(r=e.filter)?void 0:r.event)?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(h,r)):null==(i=this.bindings[n])||i.filter(e=>{var r,s,i,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(n))return e.type.toLocaleLowerCase()===n;if("id"in e){let n=e.id,a=null==(r=e.filter)?void 0:r.event;return n&&(null==(s=t.ids)?void 0:s.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(i=t.data)?void 0:i.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof h&&"ids"in h){let e=h.data,{schema:t,table:r,commit_timestamp:s,type:i,errors:n}=e;h=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:s,eventType:i,new:{},old:{},errors:n}),this._getPayloadRecords(e))}e.callback(h,r)})}_isClosed(){return this.state===u.closed}_isJoined(){return this.state===u.joined}_isJoining(){return this.state===u.joining}_isLeaving(){return this.state===u.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null==(s=e.type)?void 0:s.toLocaleLowerCase())===r&&U.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(d.close,{},e)}_onError(e){this._on(d.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=u.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=k(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=k(e.columns,e.old_record)),t}}e.s(["REALTIME_CHANNEL_STATES",0,D,"REALTIME_LISTEN_TYPES",()=>y,"REALTIME_POSTGRES_CHANGES_LISTEN_EVENT",()=>b,"REALTIME_SUBSCRIBE_STATES",()=>w,"default",()=>U],212167);let B=()=>{},M=[1e3,2e3,5e3,1e4],F=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=B,this.ref=0,this.reconnectTimer=null,this.vsn=_,this.logger=B,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${p.websocket}`,this.httpEndpoint=R(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case h.connecting:return f.Connecting;case h.open:return f.Open;case h.closing:return f.Closing;default:return f.Closed}}isConnected(){return this.connectionState()===f.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{let r=new U(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:s,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:r,payload:s,ref:i}=e,n=i?`(${i})`:"",a=s.status||"";this.log("receive",`${a} ${t} ${r} ${n}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===h.open||this.conn.readyState===h.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(d.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([F],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:"realtime-js/2.87.0"}),e.joinedOnce&&e._isJoined()&&e._push(d.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new T(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,n,a,o,l,c,h,u,d;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(s=null==e?void 0:e.heartbeatIntervalMs)?s:25e3,this.worker=null!=(i=null==e?void 0:e.worker)&&i,this.accessToken=null!=(n=null==e?void 0:e.accessToken)?n:null,this.heartbeatCallback=null!=(a=null==e?void 0:e.heartbeatCallback)?a:B,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:_,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>M[e-1]||1e4,this.vsn){case _:this.encode=null!=(c=null==e?void 0:e.encode)?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(h=null==e?void 0:e.decode)?h:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!=(u=null==e?void 0:e.encode)?u:this.serializer.encode.bind(this.serializer),this.decode=null!=(d=null==e?void 0:e.decode)?d:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}e.s(["default",()=>V],690601),e.s([],695677)},500669,e=>{"use strict";e.i(695677);var t=e.i(690601),r=e.i(212167),s=e.i(672549),i=e.i(990803);e.s(["REALTIME_CHANNEL_STATES",()=>r.REALTIME_CHANNEL_STATES,"REALTIME_LISTEN_TYPES",()=>r.REALTIME_LISTEN_TYPES,"REALTIME_POSTGRES_CHANGES_LISTEN_EVENT",()=>r.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT,"REALTIME_PRESENCE_LISTEN_EVENTS",()=>s.REALTIME_PRESENCE_LISTEN_EVENTS,"REALTIME_SUBSCRIBE_STATES",()=>r.REALTIME_SUBSCRIBE_STATES,"RealtimeChannel",()=>r.default,"RealtimeClient",()=>t.default,"RealtimePresence",()=>s.default,"WebSocketFactory",()=>i.default])},981470,e=>{"use strict";e.s([],473467),e.i(473467);var t,r,s,i=e.i(781840),n=e.i(274466);class a extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function o(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class l extends a{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class c extends a{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}e.s(["StorageApiError",()=>l,"StorageError",()=>a,"StorageUnknownError",()=>c,"isStorageError",()=>o],533835);let h=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),u=e=>{if(Array.isArray(e))return e.map(e=>u(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=u(r)}),t},d=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)};function p(e,t,r,s,i,a){return(0,n.__awaiter)(this,void 0,void 0,function*(){return new Promise((o,h)=>{let u;e(r,(u={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!a?u:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(u.headers=Object.assign({"Content-Type":"application/json"},null==s?void 0:s.headers),u.body=JSON.stringify(a)):u.body=a,(null==s?void 0:s.duplex)&&(u.duplex=s.duplex),Object.assign(Object.assign({},u),i)))).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>(0,n.__awaiter)(void 0,void 0,void 0,function*(){e instanceof(yield Response)&&!(null==s?void 0:s.noResolveJson)?e.json().then(t=>{let r=e.status||500,s=(null==t?void 0:t.statusCode)||r+"";h(new l(d(t),r,s))}).catch(e=>{h(new c(d(e),e))}):h(new c(d(e),e))}))})})}function f(e,t,r,s){return(0,n.__awaiter)(this,void 0,void 0,function*(){return p(e,"GET",t,r,s)})}function g(e,t,r,s,i){return(0,n.__awaiter)(this,void 0,void 0,function*(){return p(e,"POST",t,s,i,r)})}function m(e,t,r,s,i){return(0,n.__awaiter)(this,void 0,void 0,function*(){return p(e,"PUT",t,s,i,r)})}function b(e,t,r,s,i){return(0,n.__awaiter)(this,void 0,void 0,function*(){return p(e,"DELETE",t,s,i,r)})}class y{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}}r=Symbol.toStringTag;let w=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[r]="BlobDownloadBuilder",this.promise=null}asStream(){return new y(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}},v={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},E={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=h(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let i,n=Object.assign(Object.assign({},E),s),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",n.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((i=r).has("cacheControl")||i.append("cacheControl",n.cacheControl),o&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(o))):(i=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!n.duplex&&(n.duplex="half")),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));let l=this._removeEmptyFolders(t),c=this._getFinalPath(l),h=yield("PUT"==e?m:g)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}upload(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return(0,n.__awaiter)(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),n=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e,t=Object.assign({upsert:E.upsert},s),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);let o=yield m(this.fetch,a.toString(),e,{headers:n});return{data:{path:i,fullPath:o.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");let i=yield g(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),n=new URL(this.url+i.url),o=n.searchParams.get("token");if(!o)throw new a("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:o},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}update(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}copy(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield g(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield g(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let s=yield g(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=s?`?${s}`:"",n=this._getFinalPath(e);return new w(()=>f(this.fetch,`${this.url}/${r}/${n}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield f(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:u(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}exists(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,s){return(0,n.__awaiter)(this,void 0,void 0,function*(){return p(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e)&&e instanceof c){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&s.push(i);let n=void 0!==(null==t?void 0:t.transform),a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n?"render/image":"object"}/public/${r}${o}`)}}}remove(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}list(e,t,r){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},v),t),{prefix:e||""});return{data:yield g(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}listV2(e,t){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield g(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==i.Buffer?i.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let S="2.87.0",T={"X-Client-Info":`storage-js/${S}`};class k{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T),t),this.fetch=h(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield f(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}createBucket(e){return(0,n.__awaiter)(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield g(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield m(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}emptyBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var O=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function j(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function x(e){return e.join("\x1f")}var C=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:x(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${x(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${x(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${x(e.namespace)}`}),!0}catch(e){if(e instanceof O&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof O&&409===e.status)return;throw e}}};function A(e){return e.join("\x1f")}var P=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${A(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof O&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof O&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},$=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:i,body:n,headers:a}){let o=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,s,i),l=await j(e.auth),c=await t(o,{method:r,headers:{...n?{"Content-Type":"application/json"}:{},...l,...a},body:n?JSON.stringify(n):void 0}),h=await c.text(),u=(c.headers.get("content-type")||"").includes("application/json"),d=u&&h?JSON.parse(h):h;if(!c.ok){let e=u?d:void 0,t=e?.error;throw new O(t?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:c.status,headers:c.headers,data:d}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new C(this.client,t),this.tableOps=new P(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class N{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T),t),this.fetch=h(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}listBuckets(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield f(this.fetch,s,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(o(e))return{data:null,error:e};throw e}})}from(e){if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new a("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let t=new $({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,n.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(e,t){let s=e[t];return"function"!=typeof s?s:(...t)=>(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield s.apply(e,t),error:null}}catch(e){if(r)throw e;return{data:null,error:e}}})}})}}let R={"X-Client-Info":`storage-js/${S}`,"Content-Type":"application/json"};class I extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function L(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class D extends I{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class U extends I{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}(t=s||(s={})).InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let B=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),M=()=>Response,F=e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},V=e=>Array.from(new Float32Array(e)),H=(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},W=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function J(e,t,r,s,i){return(0,n.__awaiter)(this,void 0,void 0,function*(){return function(e,t,r,s,i,a){return(0,n.__awaiter)(this,void 0,void 0,function*(){return new Promise((o,l)=>{let c;e(r,(c={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!a?c:(F(a)?(c.headers=Object.assign({"Content-Type":"application/json"},null==s?void 0:s.headers),c.body=JSON.stringify(a)):c.body=a,Object.assign(Object.assign({},c),i)))).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>o(e)).catch(e=>(0,n.__awaiter)(void 0,void 0,void 0,function*(){if(!(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status)||(null==s?void 0:s.noResolveJson))l(new U(W(e),e));else{let t=e.status||500;"function"==typeof e.json?e.json().then(e=>{let r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||t+"";l(new D(W(e),t,r))}).catch(()=>{l(new D(e.statusText||`HTTP ${t} error`,t,t+""))}):l(new D(e.statusText||`HTTP ${t} error`,t,t+""))}}))})})}(e,"POST",t,s,i,r)})}class G{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R),t),this.fetch=B(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield J(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}getIndex(e,t){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield J(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}listIndexes(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield J(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}deleteIndex(e,t){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield J(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}}class z{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R),t),this.fetch=B(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield J(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}getVectors(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield J(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}listVectors(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield J(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}queryVectors(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield J(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}deleteVectors(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield J(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}}class q{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R),t),this.fetch=B(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield J(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield J(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,n.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield J(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,n.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield J(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(L(e))return{data:null,error:e};throw e}})}}class K extends q{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Q(this.url,this.headers,e,this.fetch)}createBucket(e){let t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){let t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){let e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,n.__awaiter)(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){let t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class Q extends G{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,n.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Y(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Y extends z{constructor(e,t,r,s,i){super(e,t,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,n.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,n.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class X extends k{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new _(this.url,this.headers,e,this.fetch)}get vectors(){return new K(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new N(this.url+"/iceberg",this.headers,this.fetch)}}e.s([],577701),e.i(577701),e.i(533835),e.s([],417795),e.i(417795),e.s(["StorageVectorsApiError",()=>D,"StorageVectorsClient",()=>K,"StorageVectorsError",()=>I,"StorageVectorsErrorCode",()=>s,"StorageVectorsUnknownError",()=>U,"VectorBucketApi",()=>q,"VectorBucketScope",()=>Q,"VectorDataApi",()=>z,"VectorIndexApi",()=>G,"VectorIndexScope",()=>Y,"isPlainObject",0,F,"isStorageVectorsError",()=>L,"normalizeToFloat32",0,V,"resolveFetch",0,B,"resolveResponse",0,M,"validateVectorDimension",0,H],484829),e.i(484829),e.s(["StorageAnalyticsClient",()=>N,"StorageApiError",()=>l,"StorageClient",()=>X,"StorageError",()=>a,"StorageUnknownError",()=>c,"StorageVectorsApiError",()=>D,"StorageVectorsClient",()=>K,"StorageVectorsError",()=>I,"StorageVectorsErrorCode",()=>s,"StorageVectorsUnknownError",()=>U,"VectorBucketApi",()=>q,"VectorBucketScope",()=>Q,"VectorDataApi",()=>z,"VectorIndexApi",()=>G,"VectorIndexScope",()=>Y,"isPlainObject",0,F,"isStorageError",()=>o,"isStorageVectorsError",()=>L,"normalizeToFloat32",0,V,"resolveFetch",0,B,"resolveResponse",0,M,"validateVectorDimension",0,H],981470)},937199,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="2.87.0"},998457,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_REALTIME_OPTIONS=r.DEFAULT_AUTH_OPTIONS=r.DEFAULT_DB_OPTIONS=r.DEFAULT_GLOBAL_OPTIONS=r.DEFAULT_HEADERS=void 0;let s=e.r(937199),i="";i="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node",r.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${i}/${s.version}`},r.DEFAULT_GLOBAL_OPTIONS={headers:r.DEFAULT_HEADERS},r.DEFAULT_DB_OPTIONS={schema:"public"},r.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r.DEFAULT_REALTIME_OPTIONS={}},798391,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWithAuth=r.resolveHeadersConstructor=r.resolveFetch=void 0,r.resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),r.resolveHeadersConstructor=()=>Headers,r.fetchWithAuth=(e,t,s)=>{let i=(0,r.resolveFetch)(s),n=(0,r.resolveHeadersConstructor)();return async(r,s)=>{var a;let o=null!=(a=await t())?a:e,l=new n(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),i(r,Object.assign(Object.assign({},s),{headers:l}))}}},704434,(e,t,r)=>{"use strict";function s(e){return e.endsWith("/")?e:e+"/"}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowser=void 0,r.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},r.ensureTrailingSlash=s,r.applySettingDefaults=function(e,t){var r,s;let{db:i,auth:n,realtime:a,global:o}=e,{db:l,auth:c,realtime:h,global:u}=t,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!=(r=null==u?void 0:u.headers)?r:{}),null!=(s=null==o?void 0:o.headers)?s:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d},r.validateSupabaseUrl=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(s(t))}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}},r.isBrowser=()=>"undefined"!=typeof window},846470,e=>{"use strict";e.i(939853);var t=e.i(47243),r=e.i(783177),s=e.i(826098),i=e.i(301433),n=e.i(984317),a=e.i(912269),o=e.i(677422);e.s(["AuthAdminApi",()=>s.default,"AuthApiError",()=>a.AuthApiError,"AuthClient",()=>i.default,"AuthError",()=>a.AuthError,"AuthImplicitGrantRedirectError",()=>a.AuthImplicitGrantRedirectError,"AuthInvalidCredentialsError",()=>a.AuthInvalidCredentialsError,"AuthInvalidJwtError",()=>a.AuthInvalidJwtError,"AuthInvalidTokenResponseError",()=>a.AuthInvalidTokenResponseError,"AuthPKCEGrantCodeExchangeError",()=>a.AuthPKCEGrantCodeExchangeError,"AuthRetryableFetchError",()=>a.AuthRetryableFetchError,"AuthSessionMissingError",()=>a.AuthSessionMissingError,"AuthUnknownError",()=>a.AuthUnknownError,"AuthWeakPasswordError",()=>a.AuthWeakPasswordError,"CustomAuthError",()=>a.CustomAuthError,"GoTrueAdminApi",()=>t.default,"GoTrueClient",()=>r.default,"NavigatorLockAcquireTimeoutError",()=>o.NavigatorLockAcquireTimeoutError,"SIGN_OUT_SCOPES",()=>n.SIGN_OUT_SCOPES,"isAuthApiError",()=>a.isAuthApiError,"isAuthError",()=>a.isAuthError,"isAuthImplicitGrantRedirectError",()=>a.isAuthImplicitGrantRedirectError,"isAuthRetryableFetchError",()=>a.isAuthRetryableFetchError,"isAuthSessionMissingError",()=>a.isAuthSessionMissingError,"isAuthWeakPasswordError",()=>a.isAuthWeakPasswordError,"lockInternals",()=>o.internals,"navigatorLock",()=>o.navigatorLock,"processLock",()=>o.processLock])},716945,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SupabaseAuthClient=void 0;let s=e.r(846470);class i extends s.AuthClient{constructor(e){super(e)}}r.SupabaseAuthClient=i},999746,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(693745),i=e.r(84322),n=e.r(500669),a=e.r(981470),o=e.r(998457),l=e.r(798391),c=e.r(704434),h=e.r(716945);r.default=class{constructor(e,t,r){var s,n,h;this.supabaseUrl=e,this.supabaseKey=t;const u=(0,c.validateSupabaseUrl)(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:d}),global:o.DEFAULT_GLOBAL_OPTIONS},f=(0,c.applySettingDefaults)(null!=r?r:{},p);this.storageKey=null!=(s=f.auth.storageKey)?s:"",this.headers=null!=(n=f.global.headers)?n:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(h=f.auth)?h:{},this.headers,f.global.fetch),this.fetch=(0,l.fetchWithAuth)(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new i.PostgrestClient(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new a.StorageClient(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new s.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:n,flowType:a,lock:o,debug:l,throwOnError:c},u,d){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}},489759,(e,t,r)=>{"use strict";var s=e.i(744541),i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createClient=r.SupabaseClient=r.FunctionRegion=r.FunctionsError=r.FunctionsRelayError=r.FunctionsFetchError=r.FunctionsHttpError=r.PostgrestError=void 0;let o=a(e.r(999746));n(e.r(846470),r);var l=e.r(84322);Object.defineProperty(r,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var c=e.r(693745);Object.defineProperty(r,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(r,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(r,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(r,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(r,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),n(e.r(500669),r);var h=e.r(999746);Object.defineProperty(r,"SupabaseClient",{enumerable:!0,get:function(){return a(h).default}}),r.createClient=(e,t,r)=>new o.default(e,t,r),function(){if("undefined"!=typeof window||void 0===s.default)return!1;let e=s.default.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)}()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`)},842953,e=>{"use strict";var t=e.i(489759);let{PostgrestError:r,FunctionsHttpError:s,FunctionsFetchError:i,FunctionsRelayError:n,FunctionsError:a,FunctionRegion:o,SupabaseClient:l,createClient:c,GoTrueAdminApi:h,GoTrueClient:u,AuthAdminApi:d,AuthClient:p,navigatorLock:f,NavigatorLockAcquireTimeoutError:g,lockInternals:m,processLock:b,SIGN_OUT_SCOPES:y,AuthError:w,AuthApiError:v,AuthUnknownError:E,CustomAuthError:_,AuthSessionMissingError:S,AuthInvalidTokenResponseError:T,AuthInvalidCredentialsError:k,AuthImplicitGrantRedirectError:O,AuthPKCEGrantCodeExchangeError:j,AuthRetryableFetchError:x,AuthWeakPasswordError:C,AuthInvalidJwtError:A,isAuthError:P,isAuthApiError:$,isAuthSessionMissingError:N,isAuthImplicitGrantRedirectError:R,isAuthRetryableFetchError:I,isAuthWeakPasswordError:L,RealtimePresence:D,RealtimeChannel:U,RealtimeClient:B,REALTIME_LISTEN_TYPES:M,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:F,REALTIME_PRESENCE_LISTEN_EVENTS:V,REALTIME_SUBSCRIBE_STATES:H,REALTIME_CHANNEL_STATES:W}=t.default||t;t.default,e.s(["createClient",()=>c])},2824,e=>{"use strict";var t=e.i(842953);e.s(["createSupportStorageClient",0,()=>(0,t.createClient)("https://obuldanrptloktxcffvn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9idWxkYW5ycHRsb2t0eGNmZnZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTg2MTQ2ODUsImV4cCI6MjAzNDE5MDY4NX0.NFt49g6DFkc1X5khCzN5p01iAVo2TMxlx88cY1V0E2M",{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:e=>void 0,setItem:(e,t)=>{},removeItem:e=>{}}}})])},210801,e=>{"use strict";var t=e.i(38429),r=e.i(355901),s=e.i(234745),i=e.i(10429);async function n({bucket:e,filenames:t}){let r=await (0,s.constructHeaders)(),n=e?JSON.stringify({filenames:t,bucket:e}):JSON.stringify({filenames:t});try{let e=await fetch(`${i.BASE_PATH}/api/generate-attachment-url`,{method:"POST",headers:r,body:n});if(!e.ok){let t=e.status,r=await e.text();throw Error(`Failed to generate attachment URLs at endpoint: ${t} ${r}`)}return await e.json()}catch(e){return[]}}e.s(["generateAttachmentURLs",()=>n,"useGenerateAttachmentURLsMutation",0,({onSuccess:e,onError:s,...i}={})=>(0,t.useMutation)({mutationFn:e=>n(e),async onSuccess(t,r,s){await e?.(t,r,s)},async onError(e,t,i){void 0===s?r.toast.error(`Failed to generate attachment URLS: ${e.message}`):s(e,t,i)},...i})])},208466,e=>{"use strict";var t=e.i(478902),r=e.i(389959),s=e.i(837710),i=e.i(793912),n=e.i(135144),a=e.i(689805),o=e.i(202584),l=e.i(809323),c=e.i(265100),h=e.i(217561),u=e.i(911298),d=e.i(418341),p=e.i(382490),f=e.i(275185),g=e.i(194213),m=e.i(975924),b=e.i(898452),y=e.i(355901);e.i(128328);var w=e.i(947748),v=e.i(158639),E=e.i(196621),_=e.i(937942),S=e.i(361208),T=e.i(536841),k=e.i(162082),O=e.i(124416),j=e.i(265735),x=e.i(48189),C=e.i(432478),A=e.i(843778),P=e.i(874311),$=e.i(162530),N=e.i(398876),R=e.i(710483),I=e.i(2824),L=e.i(210801);let D=e=>{let t="image/png",r=atob(e.substr(`data:${t};base64,`.length)),s=[];for(let e=0;e<r.length;e+=1024){let t=r.slice(e,e+1024),i=Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);let n=new Uint8Array(i);s.push(n)}return new Blob(s,{type:t})},U=async({image:e,userId:t})=>{if(!t)return void console.error("[FeedbackWidget > uploadAttachment] Unable to upload screenshot, missing user ID");let r=(0,I.createSupportStorageClient)(),s=D(e),i=`${t}/${(0,x.uuidv4)()}.png`,{data:n,error:a}=await r.storage.from("feedback-attachments").upload(i,s,{cacheControl:"3600"});return a||!n?void console.error("Failed to upload screenshot attachment:",a):(await (0,L.generateAttachmentURLs)({bucket:"feedback-attachments",filenames:[n.path]}))[0]},B=({onClose:e})=>{let i=(0,b.useRouter)(),{profile:n}=(0,C.useProfile)(),{ref:a,slug:d}=(0,v.useParams)(),{data:p}=(0,j.useSelectedOrganizationQuery)(),I=(0,r.useRef)(null),[L,B]=(0,r.useState)(""),[F,V]=(0,r.useState)(!1),[H,W]=(0,r.useState)(!1),[J,G]=(0,r.useState)(!1),z=(0,o.useDebounce)(L,500),[q,K]=(0,O.useLocalStorageQuery)(w.LOCAL_STORAGE_KEYS.FEEDBACK_WIDGET_CONTENT,null),[Q,Y,{isSuccess:X}]=(0,O.useLocalStorageQuery)(w.LOCAL_STORAGE_KEYS.FEEDBACK_WIDGET_SCREENSHOT,null),{data:Z}=(0,S.useFeedbackCategoryQuery)({prompt:z}),ee=function(e){if(!e||0===e.trim().length)return!1;let t=e.toLowerCase();return[/need help/i,/having trouble/i,/having issues/i,/having problems/i,/can you help/i,/could you help/i,/please help/i,/need help/i,/how do/i,/how can/i,/how to/i,/why isn't/i,/why doesn't/i,/why won't/i,/why can't/i,/it's not working/i,/it doesn't work/i,/it won't work/i,/it can't work/i,/isn't working/i,/doesn't work/i,/won't work/i,/can't work/i,/not work/i,/i can't/i,/i cannot/i,/unable to/i,/wrong/i,/bad/i,/\bbug\b/i,/\bbroken\b/i,/\berror\b/i,/\berrors\b/i,/\bfailed\b/i,/\bfailure\b/i,/\bfailing\b/i,/\bcrash\b/i,/\bcrashed\b/i,/\bcrashing\b/i,/\bissue\b/i,/\bissues\b/i,/\bproblem\b/i,/\bproblems\b/i,/\btrouble\b/i,/\bdifficulty\b/i,/\bdifficulties\b/i,/support ticket/i,/contact support/i,/get help/i,/need assistance/i,/require assistance/i,/technical support/i].some(e=>e.test(t))}(L),{mutate:et}=(0,k.useSendEventMutation)(),{mutate:er}=(0,T.useSendFeedbackMutation)({onSuccess:()=>{G(!0),B(""),Y(null),V(!1)},onError:e=>{y.toast.error(`Failed to submit feedback: ${e.message}`),V(!1)}}),es=async()=>{W(!0),await (0,x.timeout)(100),(0,h.toPng)(document.body,{filter:function(e){return!((e?.children??[]).length>0)||"feedback-widget"!==e.children[0].id}}).then(e=>Y(e)).catch(()=>y.toast.error("Failed to capture screenshot")).finally(()=>W(!1))},ei=async e=>{e.persist();let[t]=e.target.files||e.dataTransfer.items,r=new FileReader;r.onload=function(e){let t=e.target?.result;"string"==typeof t&&Y(t)},r.readAsDataURL(t),e.target.value=""},en=async()=>{let[e]=await navigator.clipboard.read();if(void 0===Q&&"image/png"===e.types[0]){let t=await e.getType("image/png"),r=new FileReader;r.onload=function(e){let t=e.target?.result;"string"==typeof t&&Y(t)},r.readAsDataURL(t)}},ea=async()=>{if(0===L.length&&void 0!==Q)return y.toast.error("Please include a message in your feedback.");if(L.length>0){V(!0);let e=Q&&n?.gotrue_id?await U({image:Q,userId:n.gotrue_id}):void 0;er({projectRef:a,organizationSlug:d,message:void 0!==e?`${L}

Attachments:
${e}`:L,pathname:i.asPath})}};return(0,r.useEffect)(()=>{q&&B(q),Q&&Y(Q)},[X]),(0,r.useEffect)(()=>{z.length>0&&K(z)},[z]),J?(0,t.jsx)(M,{onClose:e}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(N.TextArea_Shadcn_,{placeholder:"My idea for improving Supabase is...",rows:6,value:L,onChange:e=>B(e.target.value),onPaste:en,className:"text-sm mb-1 resize-none"})}),(0,t.jsx)(l.AnimatePresence,{children:"support"===(Z??(ee?"support":null))&&(0,t.jsx)(c.motion.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},exit:{opacity:0,y:16},transition:{duration:.2},children:(0,t.jsx)(R.Admonition,{type:"caution",title:"This looks like an issue thats better handled by support",className:"rounded-none border-x-0 border-b-0",children:(0,t.jsxs)("p",{children:["Please"," ",(0,t.jsx)(E.SupportLink,{className:(0,A.cn)(_.InlineLinkClassName),queryParams:{projectRef:d,message:L},children:"open a support ticket"})," ","to get help, as we do not reply to all product feedback."]})})},"support-alert")}),(0,t.jsx)($.PopoverSeparator_Shadcn_,{}),(0,t.jsx)("div",{className:"p-4 flex flex-row justify-end items-start",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-row",children:[Q?(0,t.jsx)("div",{style:{backgroundImage:`url("${Q}")`},onClick:()=>{let e=D(Q),t=URL.createObjectURL(e);window.open(t,"_blank")},className:"cursor-pointer rounded h-[26px] w-[26px] border border-control relative bg-cover bg-center bg-no-repeat",children:(0,t.jsx)("button",{className:"cursor-pointer rounded-full bg-red-900 h-3 w-3 flex items-center justify-center absolute -top-1 -right-1",onClick:e=>{e.stopPropagation(),Y(null)},children:(0,t.jsx)(m.X,{size:8,strokeWidth:3})})}):(0,t.jsxs)(P.DropdownMenu,{children:[(0,t.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{type:"default",disabled:H,loading:H,className:"w-7",icon:(0,t.jsx)(f.Image,{size:14})})}),(0,t.jsxs)(P.DropdownMenuContent,{side:"bottom",align:"end",className:"w-fit",children:[(0,t.jsxs)(P.DropdownMenuItem,{className:"flex gap-2",onSelect:()=>{I.current&&I.current.click()},children:[(0,t.jsx)(g.Upload,{size:14}),"Upload screenshot"]},"upload-screenshot"),(0,t.jsx)(P.DropdownMenuSeparator,{}),(0,t.jsxs)(P.DropdownMenuItem,{className:"flex gap-2",onSelect:()=>es(),children:[(0,t.jsx)(u.Camera,{size:14}),"Capture screenshot"]},"capture-screenshot")]})]}),(0,t.jsx)("input",{type:"file",ref:I,className:"hidden",accept:"image/png",onChange:ei}),(0,t.jsx)(s.Button,{disabled:0===L.length||F,loading:F,onClick:()=>{ea(),et({action:"send_feedback_button_clicked",groups:{project:a,organization:p?.slug}})},children:"Send"})]})})]})},M=({onClose:e})=>(0,t.jsx)("div",{className:"px-0 pt-3 pb-0",children:(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("div",{className:"px-6 grid gap-4 py-3 text-center text-foreground-light",children:[(0,t.jsx)(d.CircleCheck,{className:"mx-auto text-brand-500",size:24}),(0,t.jsxs)("div",{className:"text-center flex flex-col",children:[(0,t.jsx)("p",{className:"text-foreground text-base",children:"Your feedback has been sent. Thanks!"}),(0,t.jsxs)("p",{className:"text-sm text-balance",children:["We dont always respond to feedback. If you require assistance, please contact support via the ",(0,t.jsx)(p.HelpCircle,{className:"inline-block",size:12,"aria-label":"Help"})," menu instead."]})]})]}),(0,t.jsx)($.PopoverSeparator_Shadcn_,{}),(0,t.jsx)("div",{className:"flex items-center justify-end px-4",children:(0,t.jsx)(s.Button,{type:"default",onClick:e,children:"Close"})})]})});e.s(["FeedbackDropdown",0,({className:e})=>{let[o,l]=(0,r.useState)(!1);return(0,t.jsxs)(a.Popover_Shadcn_,{modal:!1,open:o,onOpenChange:e=>{l(e)},children:[(0,t.jsx)(n.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(s.Button,{asChild:!0,onClick:()=>{l(e=>!e)},type:"text",className:"rounded-full h-[32px] text-foreground-light hover:text-foreground",children:(0,t.jsx)("span",{className:e,children:"Feedback"})})}),(0,t.jsx)(i.PopoverContent_Shadcn_,{side:"bottom",align:"end",className:"p-0 flex flex-col w-[22rem]",id:"feedback-widget",children:(0,t.jsx)(B,{onClose:()=>l(!1)})})]})}],208466)}]);

//# debugId=da7425c1-3a0b-3c0f-ab69-be7ffb639c77
//# sourceMappingURL=71c277557c6a930c.js.map