;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b3cfaa38-a640-0c29-6668-1677d3e935ac")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,167892,e=>{"use strict";var t=e.i(478902),a=e.i(389959),r=e.i(843778);let s="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-10",n=(0,a.forwardRef)(({className:e,bottomPadding:a,size:s="default",...n},o)=>(0,t.jsx)("div",{ref:o,...n,className:(0,r.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[s],i,a&&"pb-16",e)})),o=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("header",{...a,ref:s,className:(0,r.cn)("w-full","flex-col gap-3 py-6",e)})),l=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("h1",{ref:s,...a,className:(0,r.cn)(e)})),c=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("p",{ref:s,...a,className:(0,r.cn)("text-sm text-foreground-light",e)})),u=(0,a.forwardRef)(({className:e,isFullWidth:a,topPadding:s,...i},n)=>(0,t.jsx)("div",{ref:n,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",e)})),d=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("w-full h-px bg-border",e)})),m=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("h3",{ref:s,...a,className:(0,r.cn)("text-foreground text-xl",e)})),p=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("p",{ref:s,...a,className:(0,r.cn)("text-sm text-foreground-light",e)})),f=(0,a.forwardRef)(({className:e,children:a,title:s,...i},n)=>(0,t.jsxs)("div",{ref:n,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",e),children:[s&&(0,t.jsx)("h2",{children:s}),a]})),h=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",e)})),_=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("flex flex-col gap-3 items-center",e)})),g=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("flex w-full items-center",e)})),y=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("flex flex-row gap-3",e)})),x=(0,a.forwardRef)(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,...a,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",e)})),b=(0,a.forwardRef)(({className:e,...a},n)=>(0,t.jsx)("div",{ref:n,...a,className:(0,r.cn)(s,i,"my-8 flex flex-col gap-8",e)}));o.displayName="ScaffoldHeader",l.displayName="ScaffoldTitle",c.displayName="ScaffoldDescription",n.displayName="ScaffoldContainer",d.displayName="ScaffoldDivider",u.displayName="ScaffoldSection",x.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",h.displayName="ScaffoldSectionContent",_.displayName="ScaffoldFilterAndContent",g.displayName="ScaffoldActionsContainer",y.displayName="ScaffoldActionsGroup",b.displayName="ScaffoldContainerLegacy",m.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription",e.s(["MAX_WIDTH_CLASSES",0,s,"PADDING_CLASSES",0,i,"ScaffoldActionsContainer",0,g,"ScaffoldActionsGroup",0,y,"ScaffoldColumn",0,x,"ScaffoldContainer",0,n,"ScaffoldContainerLegacy",0,b,"ScaffoldDescription",0,c,"ScaffoldDivider",0,d,"ScaffoldFilterAndContent",0,_,"ScaffoldHeader",0,o,"ScaffoldSection",0,u,"ScaffoldSectionContent",0,h,"ScaffoldSectionDescription",0,p,"ScaffoldSectionDetail",0,f,"ScaffoldSectionTitle",0,m,"ScaffoldTitle",0,l])},102703,e=>{"use strict";var t=e.i(478902),a=e.i(17203),r=e.i(180148),s=e.i(699879),i=e.i(215261),n=e.i(389959),o=e.i(837710);let l=(0,n.forwardRef)(({icon:e,title:l,description:c,url:u,urlLabel:d="Read more",defaultVisibility:m=!1,hideCollapse:p=!1,button:f,className:h="",block:_=!1},g)=>{let[y,x]=(0,n.useState)(m);return(0,t.jsx)("div",{ref:g,role:"alert",className:`${_?"block w-full":""}
      block w-full rounded-md border bg-surface-300/25 py-3 ${h}`,children:(0,t.jsxs)("div",{className:"flex flex-col px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[e&&(0,t.jsx)("span",{className:"text-foreground-lighter",children:e}),(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)("h5",{className:"text-foreground",children:l})})]}),c&&!p?(0,t.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>x(!y),children:y?(0,t.jsx)(s.Minimize2,{size:14,strokeWidth:1.5}):(0,t.jsx)(r.Maximize2,{size:14,strokeWidth:1.5})}):null]}),(c||u||f)&&(0,t.jsxs)("div",{className:`flex flex-col space-y-3 overflow-hidden transition-all ${y?"mt-3":""}`,style:{maxHeight:500*!!y},children:[(0,t.jsx)("div",{className:"text-foreground-light text-sm",children:c}),u&&(0,t.jsx)("div",{children:(0,t.jsx)(o.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(a.ExternalLink,{}),children:(0,t.jsx)(i.default,{href:u,target:"_blank",rel:"noreferrer",children:d})})}),f&&(0,t.jsx)("div",{children:f})]})]})})});l.displayName="InformationBox",e.s(["default",0,l])},25123,e=>{"use strict";var t=e.i(265735);function a(){let{data:e}=(0,t.useSelectedOrganizationQuery)();return e?{plan:e?.plan,usageBillingEnabled:e?.usage_billing_enabled,isLoading:!1,isSuccess:!0}:{plan:null,usageBillingEnabled:null,isLoading:!0,isSuccess:!1}}e.s(["useCurrentOrgPlan",()=>a])},330287,e=>{"use strict";var t=e.i(242882),a=e.i(234745),r=e.i(10429),s=e.i(346691);async function i({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:r,error:s}=await (0,a.get)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:e}},signal:t});return s&&(0,a.handleError)(s),r}e.s(["useLoadBalancersQuery",0,({projectRef:e},{enabled:a=!0,...n}={})=>(0,t.useQuery)({queryKey:s.replicaKeys.loadBalancers(e),queryFn:({signal:t})=>i({projectRef:e},t),enabled:a&&void 0!==e&&r.IS_PLATFORM,...n})])},61187,e=>{"use strict";let t=(0,e.i(388019).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],61187)},520124,e=>{"use strict";var t=e.i(460988),a=e.i(389959);e.s(["useFillTimeseriesSorted",0,(...e)=>(0,a.useMemo)(()=>{let[a,r]=e;if(!a[0]?.[r])return{data:a,error:void 0,isError:!1};try{return{data:(0,t.fillTimeseries)(...e).sort((t,a)=>new Date(t[e[1]])-new Date(a[e[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(e[0]),...e])])},238921,e=>{"use strict";var t=e.i(478902),a=e.i(55956),r=e.i(389959),s=e.i(151675),i=e.i(942032),n=e.i(30772),o=e.i(214765),l=e.i(941327),c=e.i(462273),u=e.i(843778);let d="hsl(var(--background-overlay-hover))",m="hsl(var(--brand-default))",p="hsl(var(--destructive-default))",f="hsl(var(--warning-default))";e.s(["LogsBarChart",0,({data:e,onBarClick:h,EmptyState:_,DateTimeFormat:g="MMM D, YYYY, hh:mma",isFullHeight:y=!1})=>{let[x,b]=(0,r.useState)(null);if(0===e.length)return _||null;let v=(0,a.default)(e[0].timestamp).format(g),S=(0,a.default)(e[e?.length-1]?.timestamp).format(g);return(0,t.jsxs)("div",{"data-testid":"logs-bar-chart",className:(0,u.cn)("flex flex-col gap-y-3",y?"h-full":"h-24"),children:[(0,t.jsx)(c.ChartContainer,{className:"h-full",config:{error_count:{label:"Errors"},ok_count:{label:"Ok"},warning_count:{label:"Warnings"}},children:(0,t.jsxs)(n.BarChart,{data:e,onMouseMove:e=>{e.activeTooltipIndex!==x&&b(e.activeTooltipIndex)},onMouseLeave:()=>b(null),onClick:e=>{let t=e?.activePayload?.[0]?.payload;h&&h(t,e)},children:[(0,t.jsx)(l.YAxis,{tick:!1,width:0,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(o.XAxis,{dataKey:"timestamp",interval:e.length-2,tick:!1,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(c.ChartTooltip,{content:(0,t.jsx)(c.ChartTooltipContent,{className:"text-foreground-light -mt-5",labelFormatter:e=>(0,a.default)(e).format(g)})}),(0,t.jsx)(s.Bar,{dataKey:"error_count",fill:p,maxBarSize:24,stackId:"stack",children:e?.map((e,a)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:x===a||null===x?p:"hsl(var(--destructive-500))"},`error-${a}`))}),(0,t.jsx)(s.Bar,{dataKey:"warning_count",fill:f,maxBarSize:24,stackId:"stack",children:e?.map((e,a)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:x===a||null===x?f:"hsl(var(--warning-500))"},`warning-${a}`))}),(0,t.jsx)(s.Bar,{dataKey:"ok_count",fill:m,maxBarSize:24,stackId:"stack",children:e?.map((e,a)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:x===a||null===x?m:"hsl(var(--brand-500))"},`success-${a}`))})]})}),e&&(0,t.jsxs)("div",{className:"text-foreground-lighter -mt-10 flex items-center justify-between text-[10px] font-mono",children:[(0,t.jsx)("span",{children:v}),(0,t.jsx)("span",{children:S})]})]})}])},14703,e=>{"use strict";var t=e.i(242882),a=e.i(356003),r=e.i(234745),s=e.i(10429),i=e.i(389959),n=e.i(294285);async function o({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:s}=await (0,r.get)("/platform/auth/{ref}/config",{params:{path:{ref:e}},signal:t});return s&&(0,r.handleError)(s),a}e.s(["getProjectAuthConfig",()=>o,"useAuthConfigPrefetch",0,({projectRef:e})=>{let t=(0,a.useQueryClient)();return(0,i.useCallback)(()=>{e&&t.prefetchQuery({queryKey:n.authKeys.authConfig(e),queryFn:({signal:t})=>o({projectRef:e},t)})},[t,e])},"useAuthConfigQuery",0,({projectRef:e},{enabled:a=!0,...r}={})=>(0,t.useQuery)({queryKey:n.authKeys.authConfig(e),queryFn:({signal:t})=>o({projectRef:e},t),enabled:a&&s.IS_PLATFORM&&void 0!==e,...r})])},959076,e=>{"use strict";function t(e,t){let a="00000000-0000-0000-0000-000000000000".split("").map((t,a)=>"-"===t?t:e[a]??t);if(e.length>=a.length)return a.join("");if(e.length&&e.length<15&&(a[14]="4"),e.length&&e.length<20&&(a[19]=t?"b":"8"),t)for(let t=e.length;t<a.length;t+=1)"0"===a[t]&&(a[t]="f");return a.join("")}function a(e){if(!e)return[e,void 0];let t=e.charCodeAt(e.length-1);if(122===t)return[e,e+"~"];if(t>=126)return[e,e+" "];let a=e.substring(0,e.length-1)+String.fromCharCode(t+1);return[e,a]}e.s(["prefixToUUID",()=>t,"stringRange",()=>a])},302372,e=>{"use strict";var t=e.i(242882),a=e.i(248593),r=e.i(234745),s=e.i(635494);e.i(10429);var i=e.i(837508),n=e.i(509847);async function o({projectRef:e,connectionString:t,schema:s},i,n){if(!e)throw Error("projectRef is required");let o=new Headers(n);t&&o.set("x-connection-encrypted",t);let{data:l,error:c}=await (0,r.get)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":t,"x-pg-application-name":a.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e},query:{included_schemas:s||"",excluded_schemas:""}},headers:o,signal:i});return c&&(0,r.handleError)(c),l}e.s(["useDatabasePoliciesQuery",0,({projectRef:e,connectionString:a,schema:r},{enabled:l=!0,...c}={})=>{let{data:u}=(0,s.useSelectedProjectQuery)(),d=u?.status===i.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,t.useQuery)({queryKey:n.databasePoliciesKeys.list(e,r),queryFn:({signal:t})=>o({projectRef:e,connectionString:a,schema:r},t),enabled:l&&void 0!==e&&d,...c})}])},93472,165610,e=>{"use strict";var t=e.i(478902),a=e.i(389959),r=e.i(938933);let s=(0,e.i(388019).default)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);e.s(["AlertOctagon",()=>s],165610);var i=e.i(872646),n=e.i(217444),o=e.i(833655),l=e.i(975924);let c={danger:(0,t.jsx)(s,{strokeWidth:1.5,size:18}),success:(0,t.jsx)(i.CheckCircle,{strokeWidth:1.5,size:18}),warning:(0,t.jsx)(n.AlertTriangle,{strokeWidth:1.5,size:18}),info:(0,t.jsx)(o.Info,{strokeWidth:1.5,size:18}),neutral:(0,t.jsx)(t.Fragment,{})};function u({variant:e="neutral",className:s,title:i,withIcon:n,closable:o,children:u,icon:d,actions:m}){let p=(0,r.default)("alert"),[f,h]=(0,a.useState)(!0),_=[p.base];_.push(p.variant[e].base),s&&_.push(s);let g=[p.description,p.variant[e].description],y=[p.close];return(0,t.jsx)(t.Fragment,{children:f&&(0,t.jsxs)("div",{className:_.join(" "),children:[n?(0,t.jsx)("div",{className:p.variant[e].icon,children:n&&c[e]}):null,d&&d,(0,t.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:[p.variant[e].header,p.header].join(" "),children:i}),(0,t.jsx)("div",{className:g.join(" "),children:u})]}),m]}),o&&(0,t.jsx)("button",{"aria-label":"Close alert",onClick:()=>h(!1),className:y.join(" "),children:(0,t.jsx)(l.X,{strokeWidth:2,size:16})})]})})}e.s(["Alert",()=>u],93472)},101369,e=>{"use strict";var t=e.i(478902),a=e.i(843778);e.s(["default",0,({max:e=100,value:r=0,barClass:s="bg-foreground",bgClass:i="",type:n="vertical",borderClass:o="",labelBottom:l="",labelBottomClass:c="tabular-nums",labelTop:u="",labelTopClass:d=""})=>{if("horizontal"===n){let n=Number(r/e*100),m=`${n}%`,p=l||u;return(0,t.jsxs)("div",{className:"flex flex-col w-full",children:[p&&(0,t.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,t.jsx)("p",{className:(0,a.cn)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",c),children:l}),(0,t.jsx)("p",{className:(0,a.cn)("text-foreground-light text-sm",d),children:u})]}),(0,t.jsx)("div",{className:`relative rounded h-1 overflow-hidden w-full border p-0 ${i||"bg-surface-400"} ${o||"border-none"}`,children:(0,t.jsx)("div",{className:`absolute rounded inset-x-0 bottom-0 h-1 ${s} transition-all`,style:{width:m}})})]})}{let a=Number(r/e*35);return a<2&&(a=2),(0,t.jsx)("div",{className:`relative rounded w-5 overflow-hidden border p-1 ${i||"bg-gray-400"} ${o||"border-none"}`,style:{height:35},children:(0,t.jsx)("div",{className:`absolute inset-x-0 bottom-0 w-5 ${s}`,style:{height:a}})})}}])},900114,e=>{"use strict";let t=(0,e.i(388019).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["default",()=>t])},667042,e=>{"use strict";var t=e.i(900114);e.s(["Database",()=>t.default])},848616,(e,t,a)=>{var r=e.r(730007);t.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},331077,e=>{"use strict";var t=e.i(478902),a=e.i(172650),r=e.i(848616),s=e.i(389959),i=e.i(753515),n=e.i(440401),o=e.i(701823),l=e.i(938933),c=e.i(843778),u=e.i(140449);let d=(0,s.createContext)({onChange:e=>{},selected:void 0});var m=e.i(370410);function p({children:e,className:m,buttonClassName:p,descriptionText:f,error:h,icon:_,id:g="",name:y="",label:x,labelOptional:b,layout:v,value:S,onChange:j,onFocus:A,onBlur:k,style:N,size:E="medium",defaultValue:C,validation:I,disabled:T,optionsWidth:P}){let[w,q]=(0,s.useState)(void 0),[R,O]=(0,s.useState)({}),L=(0,l.default)("listbox"),D=(0,s.useRef)(null),{formContextOnChange:M,values:F,errors:$,handleBlur:B,touched:U,fieldLevelValidation:H}=(0,u.useFormContext)();F&&!S&&(S=F[g||y],C=F[g||y]),h||($&&!h&&(h=$[g||y]),h=U&&U[g||y]?h:void 0),(0,s.useEffect)(()=>{void 0!==S&&q(S)},[S]),(0,s.useEffect)(()=>{function e(){document.documentElement.style.setProperty("--width-listbox",`${P||D.current?.offsetWidth}px`)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{let t=(0,r.default)(e);function a(e){return t.find(t=>t.props.value===e)}if(S){q(S);let e=a(S);O(e?.props?e.props:void 0);return}if(w){let e=a(w);O(e?.props?e.props:void 0);return}if(!C)return void O(t[0]?.props);{q(C);let e=a(w);O(e?.props?e.props:void 0);return}},[w]);let z=[L.container,L.base,p],G=[L.addOnBefore];return h&&z.push(L.variants.error),h||z.push(L.variants.standard),_&&G.push(L.with_icon[E]),E&&z.push(L.size[E]),T&&z.push(L.disabled),(0,t.jsx)(i.FormLayout,{label:x,labelOptional:b,layout:v,id:g,error:h,descriptionText:f,className:m,style:N,size:E,children:(0,t.jsxs)(a.Root,{children:[(0,t.jsx)(a.Trigger,{asChild:!0,disabled:T,children:(0,t.jsxs)("button",{"data-size":E,ref:D,className:(0,c.cn)(z),onBlur:function(e){B&&B(e),k&&k(e)},onFocus:A,name:y,id:g,children:[(0,t.jsxs)("span",{className:(0,c.cn)(G),children:[_&&(0,t.jsx)(o.default,{size:E,icon:_}),R?.addOnBefore&&(0,t.jsx)(R.addOnBefore,{}),(0,t.jsx)("span",{className:L.label,children:R?.label})]}),(0,t.jsx)("span",{className:L.chevron_container,children:(0,t.jsx)("svg",{className:L.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),h&&(0,t.jsx)("div",{className:L.actions_container,children:h&&(0,t.jsx)(n.default,{size:E})})]})}),(0,t.jsx)(a.Content,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:L.options_container,children:(0,t.jsx)("div",{children:(0,t.jsx)(d.Provider,{value:{onChange:function(e){j&&j(e),q(e);let t={};t.target={type:"select",name:y,id:g,value:e,checked:void 0},M&&M(t),I&&H(g,I(e))},selected:w},children:e})})})]})})}p.Option=function({id:e,value:r,label:s,disabled:i=!1,children:n,className:o="",addOnBefore:u}){let p=(0,l.default)("listbox");return(0,t.jsx)(d.Consumer,{children:({onChange:s,selected:l})=>{let d=l===r;return(0,t.jsxs)(a.Item,{className:(0,c.cn)(p.option,d?p.option_active:" ",i?p.option_disabled:" ",o),onSelect:()=>i?{}:s(r),children:[(0,t.jsxs)("div",{className:p.option_inner,children:[u&&u({active:d,selected:l}),(0,t.jsx)("span",{children:"function"==typeof n?n({active:d,selected:l}):n})]}),d?(0,t.jsx)("span",{className:(0,c.cn)(p.option_check,d?p.option_check_active:""),children:(0,t.jsx)(m.Check,{className:p.option_check_icon,"aria-hidden":"true"})}):null]},e)}})},e.s(["Listbox",0,p],331077)},899850,e=>{"use strict";e.s(["COUNT_ESTIMATE_SQL",0,`
CREATE OR REPLACE FUNCTION pg_temp.count_estimate(
    query text
) RETURNS integer LANGUAGE plpgsql AS $$
DECLARE
    plan jsonb;
BEGIN
    EXECUTE 'EXPLAIN (FORMAT JSON)' || query INTO plan;
    RETURN plan->0->'Plan'->'Plan Rows';
END;
$$;
`.trim(),"THRESHOLD_COUNT",0,5e4])},494031,e=>{"use strict";var t=e.i(749199),a=e.i(820308),r=e.i(775159);e.s(["useQueryPerformanceQuery",0,({preset:e,orderBy:s,searchQuery:i="",roles:n,runIndexAdvisor:o=!1,minCalls:l,filterIndexAdvisor:c=!1})=>{let u=a.PRESET_CONFIG[r.Presets.QUERY_PERFORMANCE].queries[e],d=[void 0!==n&&n.length>0?`auth.rolname in (${n.map(e=>`'${e}'`).join(", ")})`:"",i.length>0?`statements.query ~* '${i}'`:"","number"==typeof l&&l>0?`statements.calls >= ${l}`:""].filter(e=>e.length>0).join(" AND "),m=s&&`ORDER BY ${s.column} ${s.order}`,p=u.sql([],d.length>0?`WHERE ${d}`:void 0,m,o,c);return(0,t.default)({sql:p,params:void 0,where:d,orderBy:m})}])},147545,193,e=>{"use strict";var t=e.i(389959),a=e.i(55956),r=e.i(242882),s=e.i(234745),i=e.i(510334);async function n({projectRef:e,attributes:t,startDate:a,endDate:r,interval:i="1h",databaseIdentifier:n},o){if(!e)throw Error("Project ref is required");if(!t?.length)throw Error("At least one attribute is required");if(!a)throw Error("Start date is required");if(!r)throw Error("End date is required");let{data:l,error:c}=await (0,s.get)("/platform/projects/{ref}/infra-monitoring",{params:{path:{ref:e},query:{attributes:t,startDate:a,endDate:r,interval:i,databaseIdentifier:n}},signal:o});return c&&(0,s.handleError)(c),l}let o=({projectRef:e,attributes:t,startDate:a,endDate:s,interval:o="1h",databaseIdentifier:l},{enabled:c=!0,...u}={})=>(0,r.useQuery)({queryKey:i.analyticsKeys.infraMonitoringGroup(e,{attributes:t,startDate:a,endDate:s,interval:o,databaseIdentifier:l}),queryFn:({signal:r})=>n({projectRef:e,attributes:t,startDate:a,endDate:s,interval:o,databaseIdentifier:l},r),enabled:c&&void 0!==e&&!!t?.length&&void 0!==a&&void 0!==s,staleTime:6e4,...u});function l(e,a,r,s,i,n,l,u){let d=e.length>0,m=o({projectRef:a,attributes:e,startDate:r,endDate:s,interval:i,databaseIdentifier:n},{enabled:void 0===l&&u&&d}),p=(0,t.useMemo)(()=>{if(m.data)return c(m.data,e)},[m.data,e]);return d?e.map(e=>({data:p?.[e],error:m.error,isError:m.isError,isFetching:m.isFetching,isLoading:m.isLoading,status:m.status})):[]}function c(e,t,r="HH:mm DD MMM"){if("series"in e)return t.reduce((t,s)=>{let i=e.series?.[s];if(!i)return t;let n=e.data.map(e=>{let t=e.values?.[s];return{period_start:e.period_start,periodStartFormatted:(0,a.default)(e.period_start).format(r),[s]:void 0===t?0:Number(t)}});return t[s]={data:n,format:i.format,total:i.total,yAxisLimit:i.yAxisLimit},t},{});let s=t[0];if(!s)return{};let i=e.data.map(e=>{let t=e[s];return{period_start:e.period_start,periodStartFormatted:(0,a.default)(e.period_start).format(r),[s]:void 0===t?0:Number(t)}});return{[s]:{data:i,format:e.format,total:e.total,yAxisLimit:e.yAxisLimit}}}e.s(["getInfraMonitoringAttributes",()=>n,"useInfraMonitoringAttributesQuery",0,o],193),e.s(["mapMultiResponseToAnalyticsData",0,c,"mapResponseToAnalyticsData",()=>c,"useInfraMonitoringQueries",()=>l],147545)},510334,e=>{"use strict";function t(e){return e?e.split("T")[0]:e}e.s(["analyticsKeys",0,{functionsCombinedStats:(e,{interval:t,functionId:a})=>["projects",e,"functions-combined-stats",{interval:t,functionId:a}],functionsInvStats:(e,{interval:t,functionId:a})=>["projects",e,"functions-inv-stats",{interval:t,functionId:a}],functionsReqStats:(e,{interval:t,functionId:a})=>["projects",e,"functions-req-stats",{interval:t,functionId:a}],functionsResourceUsage:(e,{interval:t,functionId:a})=>["projects",e,"functions-resource-usage",{interval:t,functionId:a}],orgDailyStats:(e,{startDate:a,endDate:r,projectRef:s})=>["organizations",e,"daily-stats",{startDate:t(a),endDate:t(r),projectRef:s}],infraMonitoring:(e,{attribute:t,startDate:a,endDate:r,interval:s,databaseIdentifier:i})=>["projects",e,"infra-monitoring",{attribute:t,startDate:a,endDate:r,interval:s,databaseIdentifier:i}],infraMonitoringGroup:(e,{attributes:t,startDate:a,endDate:r,interval:s,databaseIdentifier:i})=>["projects",e,"infra-monitoring","group",{attributes:t?[...t].sort():void 0,startDate:a,endDate:r,interval:s,databaseIdentifier:i}],projectMetrics:(e,{interval:t})=>["projects",e,"project.metrics",{interval:t}],usageApiCounts:(e,t)=>["projects",e,"usage.api-counts",t],usageApiRequestsCount:e=>["projects",e,"usage.api-requests-count"]}])},363269,e=>{"use strict";var t=e.i(389959),a=e.i(791576),r=e.i(439043),s=e.i(530053),i=e.i(408880),n=e.i(197649),o=e.i(818369),l=e.i(113939),c=e.i(557385),u=e.i(143109),d=e.i(165602),m=e.i(767799),p=e.i(877591),f=e.i(129405),h=e.i(447958),_=["type","layout","connectNulls","ref"],g=["key"];function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function b(){return(b=Object.assign.bind()).apply(this,arguments)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){I(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function j(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,void 0);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return A(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function k(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(N=function(){return!!e})()}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,a){return(t=T(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var P=function(e){var f,v;function A(){var e,t,a;if(!(this instanceof A))throw TypeError("Cannot call a class as a function");for(var r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return t=A,a=[].concat(s),t=E(t),I(e=function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var a=e;if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(this,N()?Reflect.construct(t,a||[],E(this).constructor):t.apply(this,a)),"state",{isAnimationFinished:!0,totalLength:0}),I(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),I(e,"getStrokeDasharray",function(t,a,r){var s=r.reduce(function(e,t){return e+t});if(!s)return e.generateSimpleStrokeDasharray(a,t);for(var i=Math.floor(t/s),n=t%s,o=a-t,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>n){l=[].concat(j(r.slice(0,c)),[n-u]);break}var d=l.length%2==0?[0,o]:[o];return[].concat(j(A.repeat(r,i)),j(l),d).map(function(e){return"".concat(e,"px")}).join(", ")}),I(e,"id",(0,m.uniqueId)("recharts-line-")),I(e,"pathRef",function(t){e.mainCurve=t}),I(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),I(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),e&&C(A,e),f=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}},{key:"renderErrorBar",value:function(e,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,s=r.points,i=r.xAxis,n=r.yAxis,o=r.layout,l=r.children,u=(0,p.findAllByType)(l,d.ErrorBar);if(!u)return null;var m=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:(0,h.getValueByDataKey)(e.payload,t)}};return t.default.createElement(c.Layer,{clipPath:e?"url(#clipPath-".concat(a,")"):null},u.map(function(e){return t.default.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:s,xAxis:i,yAxis:n,layout:o,dataPointFormatter:m})}))}},{key:"renderDots",value:function(e,a,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.dot,n=s.points,o=s.dataKey,l=(0,p.filterProps)(this.props,!1),u=(0,p.filterProps)(i,!0),d=n.map(function(e,t){var a=S(S(S({key:"dot-".concat(t),r:3},l),u),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:o,payload:e.payload,points:n});return A.renderDotItem(i,a)}),m={clipPath:e?"url(#clipPath-".concat(a?"":"dots-").concat(r,")"):null};return t.default.createElement(c.Layer,b({className:"recharts-line-dots",key:"dots"},m),d)}},{key:"renderCurveStatically",value:function(e,a,r,s){var i=this.props,n=i.type,l=i.layout,c=i.connectNulls,u=(i.ref,x(i,_)),d=S(S(S({},(0,p.filterProps)(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(r,")"):null,points:e},s),{},{type:n,layout:l,connectNulls:c});return t.default.createElement(o.Curve,b({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,r){var s=this,i=this.props,n=i.points,o=i.strokeDasharray,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,p=i.animationId,f=i.animateNewValues,h=i.width,_=i.height,g=this.state,y=g.prevPoints,x=g.totalLength;return t.default.createElement(a.default,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a,i=t.t;if(y){var l=y.length/n.length,c=n.map(function(e,t){var a=Math.floor(t*l);if(y[a]){var r=y[a],s=(0,m.interpolateNumber)(r.x,e.x),n=(0,m.interpolateNumber)(r.y,e.y);return S(S({},e),{},{x:s(i),y:n(i)})}if(f){var o=(0,m.interpolateNumber)(2*h,e.x),c=(0,m.interpolateNumber)(_/2,e.y);return S(S({},e),{},{x:o(i),y:c(i)})}return S(S({},e),{},{x:e.x,y:e.y})});return s.renderCurveStatically(c,e,r)}var u=(0,m.interpolateNumber)(0,x)(i);if(o){var d="".concat(o).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});a=s.getStrokeDasharray(u,x,d)}else a=s.generateSimpleStrokeDasharray(x,u);return s.renderCurveStatically(n,e,r,{strokeDasharray:a})})}},{key:"renderCurve",value:function(e,t){var a=this.props,r=a.points,s=a.isAnimationActive,n=this.state,o=n.prevPoints,l=n.totalLength;return s&&r&&r.length&&(!o&&l>0||!(0,i.default)(o,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,a=this.props,r=a.hide,i=a.dot,o=a.points,l=a.className,d=a.xAxis,m=a.yAxis,f=a.top,h=a.left,_=a.width,g=a.height,y=a.isAnimationActive,x=a.id;if(r||!o||!o.length)return null;var b=this.state.isAnimationFinished,v=1===o.length,S=(0,n.default)("recharts-line",l),j=d&&d.allowDataOverflow,A=m&&m.allowDataOverflow,k=j||A,N=(0,s.default)(x)?this.id:x,E=null!=(e=(0,p.filterProps)(i,!1))?e:{r:3,strokeWidth:2},C=E.r,I=E.strokeWidth,T=((0,p.hasClipDot)(i)?i:{}).clipDot,P=void 0===T||T,w=2*(void 0===C?3:C)+(void 0===I?2:I);return t.default.createElement(c.Layer,{className:S},j||A?t.default.createElement("defs",null,t.default.createElement("clipPath",{id:"clipPath-".concat(N)},t.default.createElement("rect",{x:j?h:h-_/2,y:A?f:f-g/2,width:j?_:2*_,height:A?g:2*g})),!P&&t.default.createElement("clipPath",{id:"clipPath-dots-".concat(N)},t.default.createElement("rect",{x:h-w/2,y:f-w/2,width:_+w,height:g+w}))):null,!v&&this.renderCurve(k,N),this.renderErrorBar(k,N),(v||i)&&this.renderDots(k,P,N),(!y||b)&&u.LabelList.renderCallByParent(this.props,o))}}],v=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var a=e.length%2!=0?[].concat(j(e),[0]):e,r=[],s=0;s<t;++s)r=[].concat(j(r),j(a));return r}},{key:"renderDotItem",value:function(e,a){var s;if(t.default.isValidElement(e))s=t.default.cloneElement(e,a);else if((0,r.default)(e))s=e(a);else{var i=a.key,o=x(a,g),c=(0,n.default)("recharts-line-dot","boolean"!=typeof e?e.className:"");s=t.default.createElement(l.Dot,b({key:i},o,{className:c}))}return s}}],f&&k(A.prototype,f),v&&k(A,v),Object.defineProperty(A,"prototype",{writable:!1}),A}(t.PureComponent);I(P,"displayName","Line"),I(P,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!f.Global.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),I(P,"getComposedData",function(e){var t=e.props,a=e.xAxis,r=e.yAxis,i=e.xAxisTicks,n=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout;return S({points:c.map(function(e,t){var c=(0,h.getValueByDataKey)(e,o);return"horizontal"===d?{x:(0,h.getCateCoordinateOfLine)({axis:a,ticks:i,bandSize:l,entry:e,index:t}),y:(0,s.default)(c)?null:r.scale(c),value:c,payload:e}:{x:(0,s.default)(c)?null:a.scale(c),y:(0,h.getCateCoordinateOfLine)({axis:r,ticks:n,bandSize:l,entry:e,index:t}),value:c,payload:e}}),layout:d},u)}),e.s(["Line",()=>P])},642184,e=>{"use strict";var t=e.i(242882),a=e.i(234745),r=e.i(510334);async function s({projectRef:e,attribute:t,startDate:r,endDate:s},i){if(!e)throw Error("Project ref is required");if(!t)throw Error("Attribute is required");if(!r)throw Error("Start date is required");if(!s)throw Error("End date is required");let{data:n,error:o}=await (0,a.get)("/platform/projects/{ref}/daily-stats",{params:{path:{ref:e},query:{attribute:t,startDate:r,endDate:s}},signal:i});return o&&(0,a.handleError)(o),n}e.s(["useProjectDailyStatsQuery",0,({projectRef:e,attribute:a,startDate:i,endDate:n},{enabled:o=!0,...l}={})=>(0,t.useQuery)({queryKey:r.analyticsKeys.infraMonitoring(e,{attribute:a,startDate:i,endDate:n}),queryFn:({signal:t})=>s({projectRef:e,attribute:a,startDate:i,endDate:n},t),enabled:o&&void 0!==e&&void 0!==a&&void 0!==i&&void 0!==n,staleTime:18e5,...l})])},119937,(e,t,a)=>{t.exports=function(e,t){for(var a,r=-1,s=e.length;++r<s;){var i=t(e[r]);void 0!==i&&(a=void 0===a?i:a+i)}return a}},983529,(e,t,a)=>{var r=e.r(320435),s=e.r(119937);t.exports=function(e,t){return e&&e.length?s(e,r(t,2)):0}},820308,775159,e=>{"use strict";var t,a,r=e.i(55956),s=((t={}).API="api",t.STORAGE="storage",t.AUTH="auth",t.QUERY_PERFORMANCE="query_performance",t.DATABASE="database",t);e.s(["Presets",()=>s],775159);var i=((a={}).LAST_10_MINUTES="Last 10 minutes",a.LAST_30_MINUTES="Last 30 minutes",a.LAST_60_MINUTES="Last 60 minutes",a.LAST_3_HOURS="Last 3 hours",a.LAST_24_HOURS="Last 24 hours",a.LAST_7_DAYS="Last 7 days",a.LAST_14_DAYS="Last 14 days",a.LAST_28_DAYS="Last 28 days",a);let n=[{text:"Last 10 minutes",calcFrom:()=>(0,r.default)().subtract(10,"minute").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["free","pro","team","enterprise","platform"]},{text:"Last 30 minutes",calcFrom:()=>(0,r.default)().subtract(30,"minute").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["free","pro","team","enterprise","platform"]},{text:"Last 60 minutes",calcFrom:()=>(0,r.default)().subtract(1,"hour").toISOString(),calcTo:()=>(0,r.default)().toISOString(),default:!0,availableIn:["free","pro","team","enterprise","platform"]},{text:"Last 3 hours",calcFrom:()=>(0,r.default)().subtract(3,"hour").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["free","pro","team","enterprise","platform"]},{text:"Last 24 hours",calcFrom:()=>(0,r.default)().subtract(1,"day").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["free","pro","team","enterprise","platform"]},{text:"Last 7 days",calcFrom:()=>(0,r.default)().subtract(7,"day").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["pro","team","enterprise"]},{text:"Last 14 days",calcFrom:()=>(0,r.default)().subtract(14,"day").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["team","enterprise"]},{text:"Last 28 days",calcFrom:()=>(0,r.default)().subtract(28,"day").toISOString(),calcTo:()=>(0,r.default)().toISOString(),availableIn:["team","enterprise"]}],o={iso_timestamp_start:n[0].calcFrom(),iso_timestamp_end:n[0].calcTo()},l=(e,t=!0)=>{if(0===e.length)return"";let a=e.map(e=>{let t=e.key.split("."),a=[t[t.length-2],t[t.length-1]].join("."),r=e.key.includes(".")?a:e.key,s=e.value.toString().includes('"')||e.value.toString().includes("'"),i=!isNaN(Number(e.value)),n=!i&&s?e.value:`'${e.value}'`,o=!i&&String(n).toLowerCase(),l=i?e.value:o;switch(e.compare){case"matches":return`REGEXP_CONTAINS(${r}, ${l})`;case"is":default:return`${r} = ${l}`;case"!=":return`${r} != ${l}`;case">=":return`${r} >= ${l}`;case"<=":return`${r} <= ${l}`;case">":return`${r} > ${l}`;case"<":return`${r} < ${l}`}}).filter(Boolean).join(" AND ");return""===a?"":t?"WHERE "+a:"AND "+a},c={[s.API]:{title:"API",queries:{totalRequests:{queryType:"logs",sql:e=>`
        -- reports-api-total-requests
        select
          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,
          count(t.id) as count
        FROM edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
          ${l(e)}
        GROUP BY
          timestamp
        ORDER BY
          timestamp ASC`},topRoutes:{queryType:"logs",sql:e=>`
        -- reports-api-top-routes
        select
          request.path as path,
          request.method as method,
          request.search as search,
          response.status_code as status_code,
          count(t.id) as count
        from edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
          ${l(e)}
        group by
          request.path, request.method, request.search, response.status_code
        order by
          count desc
        limit 10
        `},errorCounts:{queryType:"logs",sql:e=>`
        -- reports-api-error-counts
        select
          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,
          count(t.id) as count
        FROM edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
        WHERE
          response.status_code >= 400
        ${l(e,!1)}
        GROUP BY
          timestamp
        ORDER BY
          timestamp ASC
        `},topErrorRoutes:{queryType:"logs",sql:e=>`
        -- reports-api-top-error-routes
        select
          request.path as path,
          request.method as method,
          request.search as search,
          response.status_code as status_code,
          count(t.id) as count
        from edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
        where
          response.status_code >= 400
        ${l(e,!1)}
        group by
          request.path, request.method, request.search, response.status_code
        order by
          count desc
        limit 10
        `},responseSpeed:{queryType:"logs",sql:e=>`
        -- reports-api-response-speed
        select
          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,
          avg(response.origin_time) as avg
        FROM
          edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
          ${l(e)}
        GROUP BY
          timestamp
        ORDER BY
          timestamp ASC
      `},topSlowRoutes:{queryType:"logs",sql:e=>`
        -- reports-api-top-slow-routes
        select
          request.path as path,
          request.method as method,
          request.search as search,
          response.status_code as status_code,
          count(t.id) as count,
          avg(response.origin_time) as avg
        from edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
        ${l(e)}
        group by
          request.path, request.method, request.search, response.status_code
        order by
          avg desc
        limit 10
        `},networkTraffic:{queryType:"logs",sql:e=>`
        -- reports-api-network-traffic
        select
          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,
          coalesce(
            safe_divide(
              sum(
                cast(coalesce(headers.content_length, "0") as int64)
              ),
              1000000
            ),
            0
          ) as ingress_mb,
          coalesce(
            safe_divide(
              sum(
                cast(coalesce(resp_headers.content_length, "0") as int64)
              ),
              1000000
            ),
            0
          ) as egress_mb,
        FROM
          edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
          cross join unnest(response.headers) as resp_headers
          ${l(e)}
        GROUP BY
          timestamp
        ORDER BY
          timestamp ASC
        `},requestsByCountry:{queryType:"logs",sql:e=>`
        -- reports-api-requests-by-country
        select
          cf.country as country,
          count(t.id) as count
        from edge_logs t
          cross join unnest(metadata) as m
          cross join unnest(m.response) as response
          cross join unnest(m.request) as request
          cross join unnest(request.headers) as headers
          cross join unnest(request.cf) as cf
        where
          cf.country is not null
        ${l(e,!1)}
        group by
          cf.country
        `}}},[s.AUTH]:{title:"",queries:{}},[s.STORAGE]:{title:"Storage",queries:{cacheHitRate:{queryType:"logs",sql:e=>`
        -- reports-storage-cache-hit-rate
SELECT
  timestamp_trunc(timestamp, hour) as timestamp,
  countif( h.cf_cache_status in ('HIT', 'STALE', 'REVALIDATED', 'UPDATING') ) as hit_count,
  countif( h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC') ) as miss_count
from edge_logs f
  cross join unnest(f.metadata) as m
  cross join unnest(m.request) as r
  cross join unnest(m.response) as res
  cross join unnest(res.headers) as h
where starts_with(r.path, '/storage/v1/object') and r.method = 'GET'
  ${l(e,!1)}
group by timestamp
order by timestamp desc
`},topCacheMisses:{queryType:"logs",sql:e=>`
        -- reports-storage-top-cache-misses
SELECT
  r.path as path,
  r.search as search,
  count(id) as count
from edge_logs f
  cross join unnest(f.metadata) as m
  cross join unnest(m.request) as r
  cross join unnest(m.response) as res
  cross join unnest(res.headers) as h
where starts_with(r.path, '/storage/v1/object')
  and r.method = 'GET'
  and h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC')
  ${l(e,!1)}
group by path, search
order by count desc
limit 12
    `}}},[s.QUERY_PERFORMANCE]:{title:"Query performance",queries:{mostFrequentlyInvoked:{queryType:"db",sql:(e,t,a,r=!1,s=!1)=>`
        -- reports-query-performance-most-frequently-invoked
set search_path to public, extensions;

select
    auth.rolname,
    statements.query,
    statements.calls,
    -- -- Postgres 13, 14, 15
    statements.total_exec_time + statements.total_plan_time as total_time,
    statements.min_exec_time + statements.min_plan_time as min_time,
    statements.max_exec_time + statements.max_plan_time as max_time,
    statements.mean_exec_time + statements.mean_plan_time as mean_time,
    -- -- Postgres <= 12
    -- total_time,
    -- min_time,
    -- max_time,
    -- mean_time,
    statements.rows / statements.calls as avg_rows,
    statements.rows as rows_read,
    case 
      when (statements.shared_blks_hit + statements.shared_blks_read) > 0 
      then round(
        (statements.shared_blks_hit * 100.0) / 
        (statements.shared_blks_hit + statements.shared_blks_read), 
        2
      )
      else 0
    end as cache_hit_rate${r?`,
    case
      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')
      then (
        select json_build_object(
          'has_suggestion', array_length(index_statements, 1) > 0,
          'startup_cost_before', startup_cost_before,
          'startup_cost_after', startup_cost_after,
          'total_cost_before', total_cost_before,
          'total_cost_after', total_cost_after,
          'index_statements', index_statements
        )
        from index_advisor(statements.query)
      )
      else null
    end as index_advisor_result`:""}
  from pg_stat_statements as statements
    inner join pg_authid as auth on statements.userid = auth.oid
  ${t||""}
  ${a||"order by statements.calls desc"}
  limit 20`},mostTimeConsuming:{queryType:"db",sql:(e,t,a,r=!1,s=!1)=>`
        -- reports-query-performance-most-time-consuming
set search_path to public, extensions;

select
    auth.rolname,
    statements.query,
    statements.calls,
    statements.total_exec_time + statements.total_plan_time as total_time,
    statements.mean_exec_time + statements.mean_plan_time as mean_time,
    ((statements.total_exec_time + statements.total_plan_time)/sum(statements.total_exec_time + statements.total_plan_time) OVER()) * 100 as prop_total_time${r?`,
    case
      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')
      then (
        select json_build_object(
          'has_suggestion', array_length(index_statements, 1) > 0,
          'startup_cost_before', startup_cost_before,
          'startup_cost_after', startup_cost_after,
          'total_cost_before', total_cost_before,
          'total_cost_after', total_cost_after,
          'index_statements', index_statements
        )
        from index_advisor(statements.query)
      )
      else null
    end as index_advisor_result`:""}
  from pg_stat_statements as statements
    inner join pg_authid as auth on statements.userid = auth.oid
  ${t||""}
  ${a||"order by total_time desc"}
  limit 20`},slowestExecutionTime:{queryType:"db",sql:(e,t,a,r=!1,s=!1)=>`
        -- reports-query-performance-slowest-execution-time
set search_path to public, extensions;

select
    auth.rolname,
    statements.query,
    statements.calls,
    -- -- Postgres 13, 14, 15
    statements.total_exec_time + statements.total_plan_time as total_time,
    statements.min_exec_time + statements.min_plan_time as min_time,
    statements.max_exec_time + statements.max_plan_time as max_time,
    statements.mean_exec_time + statements.mean_plan_time as mean_time,
    -- -- Postgres <= 12
    -- total_time,
    -- min_time,
    -- max_time,
    -- mean_time,
    statements.rows / statements.calls as avg_rows${r?`,
    case
      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')
      then (
        select json_build_object(
          'has_suggestion', array_length(index_statements, 1) > 0,
          'startup_cost_before', startup_cost_before,
          'startup_cost_after', startup_cost_after,
          'total_cost_before', total_cost_before,
          'total_cost_after', total_cost_after,
          'index_statements', index_statements
        )
        from index_advisor(statements.query)
      )
      else null
    end as index_advisor_result`:""}
  from pg_stat_statements as statements
    inner join pg_authid as auth on statements.userid = auth.oid
  ${t||""}
  ${a||"order by max_time desc"}
  limit 20`},queryHitRate:{queryType:"db",sql:e=>`-- reports-query-performance-cache-and-index-hit-rate
select
    'index hit rate' as name,
    (sum(idx_blks_hit)) / nullif(sum(idx_blks_hit + idx_blks_read),0) as ratio
  from pg_statio_user_indexes
  union all
  select
    'table hit rate' as name,
    sum(heap_blks_hit) / nullif(sum(heap_blks_hit) + sum(heap_blks_read),0) as ratio
  from pg_statio_user_tables;`},unified:{queryType:"db",sql:(e,t,a,r=!1,s=!1)=>`
        -- reports-query-performance-unified
        set search_path to public, extensions;

        with query_results as (
          select
              auth.rolname,
              statements.query,
              statements.calls,
              -- -- Postgres 13, 14, 15
              statements.total_exec_time + statements.total_plan_time as total_time,
              statements.min_exec_time + statements.min_plan_time as min_time,
              statements.max_exec_time + statements.max_plan_time as max_time,
              statements.mean_exec_time + statements.mean_plan_time as mean_time,
              -- -- Postgres <= 12
              -- total_time,
              -- min_time,
              -- max_time,
              -- mean_time,
              statements.rows / statements.calls as avg_rows,
              statements.rows as rows_read,
              statements.shared_blks_hit as debug_hit,
              statements.shared_blks_read as debug_read,
              case 
                when (statements.shared_blks_hit + statements.shared_blks_read) > 0 
                then (statements.shared_blks_hit::numeric * 100.0) / 
                     (statements.shared_blks_hit + statements.shared_blks_read)
                else 0
              end as cache_hit_rate,
              ((statements.total_exec_time + statements.total_plan_time)/sum(statements.total_exec_time + statements.total_plan_time) OVER()) * 100 as prop_total_time${r?`,
              case
                when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')
                then (
                  select json_build_object(
                    'has_suggestion', array_length(index_statements, 1) > 0,
                    'startup_cost_before', startup_cost_before,
                    'startup_cost_after', startup_cost_after,
                    'total_cost_before', total_cost_before,
                    'total_cost_after', total_cost_after,
                    'index_statements', index_statements
                  )
                  from index_advisor(statements.query)
                )
                else null
              end as index_advisor_result`:""}
            from pg_stat_statements as statements
              inner join pg_authid as auth on statements.userid = auth.oid
            ${t||""}
          )
          select *
          from query_results
          ${s&&r?"where (index_advisor_result->>'has_suggestion')::boolean = true":""}
          ${a||"order by total_time desc"}
          limit 20`},slowQueriesCount:{queryType:"db",sql:()=>`
        -- reports-query-performance-slow-queries-count
        set search_path to public, extensions;

        -- Count of slow queries (> 1 second average)
        SELECT count(*) as slow_queries_count
        FROM pg_stat_statements 
        WHERE statements.mean_exec_time > 1000;`},queryMetrics:{queryType:"db",sql:(e,t,a,r=!1,s=!1)=>`
        -- reports-query-performance-metrics
        set search_path to public, extensions;
      
        SELECT 
          COALESCE(ROUND(AVG(statements.rows::numeric / NULLIF(statements.calls, 0)), 1), 0) as avg_rows_per_call,
          COUNT(*) FILTER (WHERE statements.total_exec_time + statements.total_plan_time > 1000) as slow_queries,
          COALESCE(
            ROUND(
              SUM(statements.shared_blks_hit) * 100.0 / 
              NULLIF(SUM(statements.shared_blks_hit + statements.shared_blks_read), 0), 
              2
            ), 0
          ) || '%' as cache_hit_rate
        FROM pg_stat_statements as statements
        WHERE statements.calls > 0
        ${t||""}
        ${a||""}`}}},[s.DATABASE]:{title:"database",queries:{largeObjects:{queryType:"db",sql:e=>`-- reports-database-large-objects
SELECT
        SCHEMA_NAME,
        relname,
        table_size
      FROM
        (SELECT
          pg_catalog.pg_namespace.nspname AS SCHEMA_NAME,
          relname,
          pg_total_relation_size(pg_catalog.pg_class.oid) AS table_size
        FROM pg_catalog.pg_class
        JOIN pg_catalog.pg_namespace ON relnamespace = pg_catalog.pg_namespace.oid
        ) t
      WHERE SCHEMA_NAME NOT LIKE 'pg_%'
      ORDER BY table_size DESC
      LIMIT 5;`}}}};e.s(["DEFAULT_QUERY_PARAMS",0,o,"DEPRECATED_REPORTS",0,["total_realtime_ingress","total_rest_options_requests","total_auth_ingress","total_auth_get_requests","total_auth_post_requests","total_auth_patch_requests","total_auth_options_requests","total_storage_options_requests","total_storage_patch_requests","total_options_requests","total_rest_ingress","total_rest_get_requests","total_rest_post_requests","total_rest_patch_requests","total_rest_delete_requests","total_storage_get_requests","total_storage_post_requests","total_storage_delete_requests","total_auth_delete_requests","total_get_requests","total_patch_requests","total_post_requests","total_ingress","total_delete_requests"],"EDGE_FUNCTION_REGIONS",0,[{key:"ap-northeast-1",label:"Tokyo"},{key:"ap-northeast-2",label:"Seoul"},{key:"ap-south-1",label:"Mumbai"},{key:"ap-southeast-1",label:"Singapore"},{key:"ap-southeast-2",label:"Sydney"},{key:"ca-central-1",label:"Canada Central"},{key:"us-east-1",label:"N. Virginia"},{key:"us-west-1",label:"N. California"},{key:"us-west-2",label:"Oregon"},{key:"eu-central-1",label:"Frankfurt"},{key:"eu-west-1",label:"Ireland"},{key:"eu-west-2",label:"London"},{key:"eu-west-3",label:"Paris"},{key:"sa-east-1",label:"So Paulo"}],"LAYOUT_COLUMN_COUNT",0,2,"PRESET_CONFIG",0,c,"REPORTS_DATEPICKER_HELPERS",0,n,"REPORT_DATERANGE_HELPER_LABELS",()=>i,"generateRegexpWhere",0,l],820308)},749199,e=>{"use strict";var t=e.i(242882),a=e.i(820308),r=e.i(150671),s=e.i(714403),i=e.i(635494),n=e.i(189329);e.s(["default",0,({sql:e,params:o=a.DEFAULT_QUERY_PARAMS,where:l,orderBy:c})=>{let{data:u}=(0,i.useSelectedProjectQuery)(),d=(0,n.useDatabaseSelectorStateSnapshot)(),{data:m}=(0,r.useReadReplicasQuery)({projectRef:u?.ref}),p=(m||[]).find(e=>e.identifier===d.selectedDatabaseId)?.connectionString,f=d.selectedDatabaseId,h="function"==typeof e?e([]):e,{data:_,error:g,isPending:y,isRefetching:x,refetch:b}=(0,t.useQuery)({queryKey:["projects",u?.ref,"db",{...o,sql:h,identifier:f},l,c],queryFn:({signal:e})=>(0,s.executeSql)({projectRef:u?.ref,connectionString:p||u?.connectionString,sql:h},e).then(e=>e.result),enabled:!!h,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return{error:g||("object"==typeof _?_?.error:""),data:_,isLoading:y,isRefetching:x,params:o,runQuery:b,resolvedSql:h}}])},870152,e=>{"use strict";var t=e.i(532480);e.s(["InfoIcon",()=>t.default])},744507,526038,282237,940336,e=>{"use strict";var t=e.i(102291);e.s(["BarChartIcon",()=>t.default],744507);var a=e.i(388019);let r=(0,a.default)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);e.s(["GitCommitHorizontalIcon",()=>r],526038);let s=(0,a.default)("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]);e.s(["SquareTerminal",()=>s],282237);var i=e.i(478902),n=e.i(55956),o=e.i(389959),l=e.i(751883),c=e.i(834869);let u=e=>String(e).includes("."),d=(e,t)=>{if(0===t)return String(Math.round(e));if(!u(e))return e.toLocaleString()+"."+"0".repeat(t);{let[a,r]=String(e).split(".");return Number(a).toLocaleString()+"."+r.slice(0,t)}};e.s(["numberFormatter",0,(e,t=2)=>u(e)?d(e,t):e.toLocaleString(),"precisionFormatter",0,d,"timestampFormatter",0,(e,t=c.DateTimeFormats.FULL,a=!1)=>a?n.default.utc(e).format(t):(0,n.default)(e).format(t),"useChartSize",0,(e="normal",t={tiny:76,small:96,normal:160,large:280})=>{let a=t[e];return{Container:(0,o.useMemo)(()=>({className:e,children:t})=>(0,i.jsx)(l.ResponsiveContainer,{className:e,height:a,minHeight:a,width:"100%",children:t}),[e]),minHeight:a}},"useStacked",0,({data:e,xAxisKey:t,yAxisKey:a,stackKey:r,variant:s="values"})=>{let i=(0,o.useMemo)(()=>e?Object.entries(e.reduce((e,s)=>{let i=s[t],n=s[a],o=s[r];return e[i]||(e[i]={}),e[i][o]=n,e},{})).map(([e,a])=>({...a,[t]:Number.isNaN(Number(e))?e:Number(e)})):[],[JSON.stringify(e)]),n=(0,o.useMemo)(()=>Object.keys(i[0]||{}).filter(e=>e!==t&&e!==a).sort(),[JSON.stringify(i[0]||{})]),l=(0,o.useMemo)(()=>{if("percentages"===s)return i.map(e=>{let t=Object.entries(e),a=t.filter(([e,t])=>n.includes(e)).reduce((e,[t,a])=>e+a,0);return t.reduce((e,[t,r])=>n.includes(t)?{...e,[t]:0!==r?r/a:0}:{...e,[t]:r},{})})},[JSON.stringify(i)]);return{dataKeys:n,stackedData:i,percentagesStackedData:l}}],940336)},150401,e=>{"use strict";var t=e.i(389959);let a="supabase-chart-hover-sync-enabled",r="supabase-chart-tooltip-sync-enabled",s={hoveredIndex:null,hoveredChart:null,syncHover:!0,syncTooltip:!0},i=new Set;try{{let e=localStorage.getItem(a),t=localStorage.getItem(r);null!==e&&(s.syncHover=JSON.parse(e)),null!==t&&(s.syncTooltip=JSON.parse(t))}}catch(e){console.warn("Failed to load chart sync settings from localStorage:",e)}function n(e){let t=s;if(s={...s,...e},void 0!==e.syncHover)try{localStorage.setItem(a,JSON.stringify(s.syncHover))}catch(e){console.warn("Failed to save chart hover sync setting to localStorage:",e)}if(void 0!==e.syncTooltip)try{localStorage.setItem(r,JSON.stringify(s.syncTooltip))}catch(e){console.warn("Failed to save chart tooltip sync setting to localStorage:",e)}JSON.stringify(t)!==JSON.stringify(s)&&i.forEach(e=>e(s))}function o(e){let[a,r]=(0,t.useState)(s);(0,t.useEffect)(()=>{let e=e=>{r(e)};return i.add(e),()=>{i.delete(e)}},[]);let o=(0,t.useCallback)(t=>{s.syncHover?n({hoveredIndex:t,hoveredChart:null!==t?e:null}):r(a=>({...a,hoveredIndex:t,hoveredChart:null!==t?e:null}))},[e]),l=(0,t.useCallback)(()=>{s.syncHover?n({hoveredIndex:null,hoveredChart:null}):r(e=>({...e,hoveredIndex:null,hoveredChart:null}))},[]),c=(0,t.useCallback)(e=>{n({syncHover:e,...!1===e&&{syncTooltip:!1}})},[]),u=(0,t.useCallback)(e=>{n({syncTooltip:e,...!0===e&&{syncHover:!0}})},[]),d=a.hoveredChart===e,m=a.syncHover&&null!==a.hoveredChart&&!d;return{hoveredIndex:m||d?a.hoveredIndex:null,syncHover:a.syncHover,syncTooltip:a.syncTooltip,hoveredChart:a.hoveredChart,setHover:o,clearHover:l,setSyncHover:c,setSyncTooltip:u,isHovered:null!==a.hoveredIndex&&(d||m),isCurrentChart:d}}e.s(["useChartHoverState",()=>o])},414833,682679,e=>{"use strict";var t=e.i(478902),a=e.i(536068),r=e.i(843778),s=e.i(55956),i=e.i(787845),n=e.i(744507),o=e.i(526038),l=e.i(870152),c=e.i(282237),u=e.i(215261),d=e.i(898452),m=e.i(389959);e.i(128328);var p=e.i(158639),f=e.i(215312),h=e.i(48189),_=e.i(940336),g=e.i(150401),y=e.i(252387),x=e.i(587433);let b=({format:e,highlightedValue:a,highlightedLabel:b,hideHighlightedValue:v=!1,hideHighlightedLabel:S=!1,hideHighlightArea:j=!1,title:A,minimalHeader:k=!1,hideChartType:N=!1,chartStyle:E="bar",onChartStyleChange:C,showMaxValue:I=!1,setShowMaxValue:T,docsUrl:P,syncId:w,data:q,xAxisKey:R,yAxisKey:O,xAxisIsDate:L=!0,displayDateInUtc:D,customDateFormat:M,valuePrecision:F=2,shouldFormatBytes:$=!1,isNetworkChart:B=!1,attributes:U,sql:H,titleTooltip:z,showNewBadge:G})=>{let{hoveredIndex:K,isHovered:Y,isCurrentChart:Q,setHover:W,clearHover:X}=(0,g.useChartHoverState)(w||"default"),[V,J]=(0,m.useState)(a),[Z,ee]=(0,m.useState)(b),{ref:et}=(0,p.useParams)();(0,d.useRouter)(),(0,m.useEffect)(()=>{if(w&&null!==K&&Y&&q&&R&&O){let e=q[K];if(e){let t=e[O];if(U&&U.length>1){let a=U?.filter(e=>e.omitFromTotal||e.isMaxValue||"reference-line"===e.provider)?.map(e=>e.attribute)??[];t=Object.entries(e).filter(([e,t])=>"number"==typeof t&&"timestamp"!==e&&"period_start"!==e&&!a.includes(e)&&U.some(t=>t.attribute===e&&!1!==t.enabled)).reduce((e,[t,a])=>e+a,0)}J(t);let a=b;if(L&&e[R]){let t;a=(t=e[R],D?(0,s.default)(t).utc():(0,s.default)(t)).format(M||"YYYY-MM-DD HH:mm:ss")}else e[R]&&(a=e[R]);ee(a)}}else J(a),ee(b)},[K,Y,w,q,R,O,L,D,M,a,b,U]);let ea=(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,t.jsx)("h3",{className:"text-foreground-lighter "+(k?"text-xs":"text-sm"),children:A}),z&&(0,t.jsx)(y.InfoTooltip,{children:z})]}),P&&(0,t.jsx)(f.ButtonTooltip,{type:"text",className:"px-1",asChild:!0,tooltip:{content:{side:"top",text:"Read docs"}},children:(0,t.jsx)(u.default,{href:P,target:"_blank",children:(0,t.jsx)(l.InfoIcon,{className:"w-4 h-4 text-foreground-lighter"})})})]}),er=(0,t.jsx)("h4",{className:`text-foreground text-xl font-normal ${k?"text-base":"text-2xl"}`,children:void 0!==V&&(t=>{if("number"!=typeof t)return t;if("function"==typeof e)return e(t);if($){let e=B?Math.abs(t):t;return(0,h.formatBytes)(e,F)}return(0,_.numberFormatter)(t,F)})(V)}),es=(0,t.jsx)("h4",{className:"text-foreground-lighter text-xs",children:Z});if(k)return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-row items-center gap-x-4",j&&"hidden"),style:{minHeight:"1.8rem"},children:[A&&ea,(0,t.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[void 0!==a&&!v&&er,!S&&es]})]});let ei=void 0!==a&&!v;return(0,t.jsxs)("div",{className:(0,r.cn)("flex-grow flex justify-between items-start min-h-16",j&&"hidden"),children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[A&&ea,G&&(0,t.jsx)(x.Badge,{variant:"success",children:"New"})]}),(0,t.jsxs)("div",{className:"h-4",children:[ei&&er,!S&&es]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[H?(0,t.jsx)(f.ButtonTooltip,{type:"default",className:"px-1.5",asChild:!0,tooltip:{content:{side:"top",text:"Open in Log Explorer"}},children:(0,t.jsx)(u.default,{href:`/project/${et}/logs/explorer?q=${encodeURIComponent(H)}`,children:(0,t.jsx)(c.SquareTerminal,{className:"w-4 h-4 text-foreground-lighter"})})}):null,!N&&C&&(0,t.jsx)(f.ButtonTooltip,{type:"default",className:"px-1.5",icon:"bar"===E?(0,t.jsx)(i.Activity,{}):(0,t.jsx)(n.BarChartIcon,{}),onClick:()=>C("bar"===E?"line":"bar"),tooltip:{content:{side:"top",text:`View as ${"bar"===E?"line chart":"bar chart"}`}}}),T&&(0,t.jsx)(f.ButtonTooltip,{type:I?"default":"dashed",className:"px-1.5",icon:(0,t.jsx)(o.GitCommitHorizontalIcon,{className:I?"text-foreground-light":"text-foreground-lighter"}),onClick:()=>T(!I),tooltip:{content:{side:"top",text:`${I?"Hide":"Show"} limit`}}})]})]})};e.s(["ChartHeader",0,b],682679),e.s(["default",0,({attribute:e,message:s="No data to show",description:i,format:n,className:o="",size:l,isFullHeight:c=!1,titleTooltip:u,hideTotalPlaceholder:d=!1})=>{let{minHeight:m}=(0,_.useChartSize)(l);return(0,t.jsxs)("div",{className:(0,r.cn)(c&&"h-full"),children:[void 0!==e&&(0,t.jsx)(b,{title:e,format:n,highlightedValue:d?void 0:0,titleTooltip:u}),(0,t.jsxs)("div",{className:(0,r.cn)("border-control flex flex-grow w-full flex-col items-center justify-center space-y-2 border border-dashed text-center",c&&"h-full",o),style:{minHeight:m+20},children:[(0,t.jsx)(a.BarChart2,{size:20,className:"text-border-stronger"}),(0,t.jsxs)("div",{className:"px-1",children:[(0,t.jsx)("p",{className:"text-foreground-light text-xs",children:s}),i&&(0,t.jsx)("p",{className:"text-foreground-lighter text-xs",children:i})]})]})]})}],414833)},886554,e=>{"use strict";var t=e.i(478902),a=e.i(389959),r=e.i(55956),s=e.i(151675),i=e.i(799108),n=e.i(942032),o=e.i(831266),l=e.i(30772),c=e.i(625198),u=e.i(214765),d=e.i(941327),m=e.i(834869),p=e.i(682679),f=e.i(940336),h=e.i(414833),_=e.i(150401);e.s(["default",0,({data:e,yAxisKey:g,xAxisKey:y,format:x,customDateFormat:b=m.DateTimeFormats.FULL,title:v,highlightedValue:S,highlightedLabel:j,displayDateInUtc:A,minimalHeader:k,valuePrecision:N,className:E="",size:C="normal",emptyStateMessage:I,onBarClick:T,showLegend:P=!1,xAxisIsDate:w=!0,XAxisProps:q,YAxisProps:R,showGrid:O=!1,syncId:L})=>{let{hoveredIndex:D,isHovered:M,isCurrentChart:F,setHover:$,clearHover:B}=(0,_.useChartHoverState)("default"),{Container:U}=(0,f.useChartSize)(C),[H,z]=(0,a.useState)(null),G=(0,a.useMemo)(()=>e.map(e=>({...e,[g]:"string"==typeof e[g]?Number(e[g]):e[g]})),[e,g]),K=q||{interval:e.length-2,angle:0,tick:!1},Y=R||{tickFormatter:e=>(0,f.numberFormatter)(e,N),tick:!1,width:0},Q=e=>A?(0,r.default)(e).utc():(0,r.default)(e),W=w?null!==H&&e&&void 0!==e[H]&&Q(e[H][y]).format(b)||j:H?e[H]?.[y]:j,X=null!==H?e[H]?.[g]:S;return 0===e.length?(0,t.jsx)(h.default,{message:I,description:"It may take up to 24 hours for data to refresh",size:C,className:E,attribute:v,format:x}):(0,t.jsxs)("div",{className:["flex flex-col gap-y-3",E].join(" "),children:[(0,t.jsx)(p.ChartHeader,{title:v,format:x,customDateFormat:b,highlightedValue:"number"==typeof X?(0,f.numberFormatter)(X,N):X,highlightedLabel:W,minimalHeader:k,syncId:L,data:e,xAxisKey:y,yAxisKey:g,xAxisIsDate:w,displayDateInUtc:A,valuePrecision:N,attributes:[]}),(0,t.jsx)(U,{children:(0,t.jsxs)(l.BarChart,{data:G,className:"overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==H&&z(e.activeTooltipIndex),$(e.activeTooltipIndex)},onMouseLeave:()=>{z(null),B()},onClick:e=>{let t=e?.activePayload?.[0]?.payload;T&&T(t,e)},children:[P&&(0,t.jsx)(o.Legend,{}),O&&(0,t.jsx)(i.CartesianGrid,{stroke:m.CHART_COLORS.AXIS}),(0,a.createElement)(d.YAxis,{...Y,axisLine:{stroke:m.CHART_COLORS.AXIS},tickLine:{stroke:m.CHART_COLORS.AXIS},key:g}),(0,a.createElement)(u.XAxis,{...K,axisLine:{stroke:m.CHART_COLORS.AXIS},tickLine:{stroke:m.CHART_COLORS.AXIS},key:y}),(0,t.jsx)(c.Tooltip,{content:a=>L&&M&&F&&null!==D?(0,t.jsxs)("div",{className:"bg-black/90 text-white p-2 rounded text-xs",children:[(0,t.jsx)("div",{className:"font-medium",children:(0,r.default)(e[D]?.[y]).format(b)}),(0,t.jsxs)("div",{children:[(0,f.numberFormatter)(Number(e[D]?.[g])||0,N),"string"==typeof x?x:""]})]}):null}),(0,t.jsx)(s.Bar,{dataKey:g,fill:m.CHART_COLORS.GREEN_1,animationDuration:300,maxBarSize:48,children:e?.map((e,a)=>(0,t.jsx)(n.Cell,{className:`transition-all duration-300 ${T?"cursor-pointer":""}`,fill:H===a||null===H?m.CHART_COLORS.GREEN_1:m.CHART_COLORS.GREEN_2,enableBackground:12},`cell-${a}`))})]})}),e&&(0,t.jsxs)("div",{className:"text-foreground-lighter -mt-9 flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{children:w?Q(e[0][y]).format(b):e[0][y]}),(0,t.jsx)("span",{children:w?Q(e[e?.length-1]?.[y]).format(b):e[e?.length-1]?.[y]})]})]})}])},669653,e=>{"use strict";var t=e.i(867088),a=e.i(234745),r=e.i(718727);async function s({projectRef:e,type:t,name:r,limit:s=10,sort:i,cursor:n},o){if(void 0===e)throw Error("projectRef is required for getContent");let{data:l,error:c}=await (0,a.get)("/platform/projects/{ref}/content",{params:{path:{ref:e},query:{type:t,name:r,sort_by:i,limit:s.toString(),cursor:n}},signal:o});return c&&(0,a.handleError)(c),{cursor:l.cursor,content:l.data}}e.s(["useContentInfiniteQuery",0,({projectRef:e,type:a,name:i,limit:n,sort:o},{enabled:l=!0,...c}={})=>(0,t.useInfiniteQuery)({queryKey:r.contentKeys.infiniteList(e,{type:a,name:i,limit:n,sort:o}),queryFn:({signal:t,pageParam:r})=>s({projectRef:e,type:a,name:i,limit:n,sort:o,cursor:r},t),enabled:l&&void 0!==e,initialPageParam:void 0,getNextPageParam:e=>e.cursor,...c})])},830734,e=>{"use strict";let t=(0,e.i(388019).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);e.s(["default",()=>t])},853322,e=>{"use strict";var t=e.i(242882),a=e.i(234745),r=e.i(718727);async function s({projectRef:e,id:t},r){if(void 0===e)throw Error("projectRef is required");if(void 0===t)throw Error("Content ID is required");let{data:s,error:i}=await (0,a.get)("/platform/projects/{ref}/content/item/{id}",{params:{path:{ref:e,id:t}},signal:r});if(i)throw(0,a.handleError)(i);return s}e.s(["getContentById",()=>s,"useContentIdQuery",0,({projectRef:e,id:a},{enabled:i=!0,...n}={})=>(0,t.useQuery)({queryKey:r.contentKeys.resource(e,a),queryFn:({signal:t})=>s({projectRef:e,id:a},t),enabled:i&&void 0!==e&&void 0!==a,...n})])},951684,e=>{"use strict";let t=(0,e.i(388019).default)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["default",()=>t])},300906,e=>{"use strict";var t=e.i(951684);e.s(["GitBranch",()=>t.default])},364850,e=>{"use strict";var t=e.i(867088),a=e.i(234745),r=e.i(718727);async function s({projectRef:e,cursor:t,sort:r,name:s},i){if(void 0===e)throw Error("projectRef is required");let{data:n,error:o}=await (0,a.get)("/platform/projects/{ref}/content/folders",{params:{path:{ref:e},query:{type:"sql",cursor:t,limit:"100",sort_by:r,sort_order:"name"===r?"asc":"desc",name:s,visibility:"user"}},signal:i});return o&&(0,a.handleError)(o),{...n.data,cursor:n.cursor}}e.s(["SNIPPET_PAGE_LIMIT",0,100,"useSQLSnippetFoldersQuery",0,({projectRef:e,name:a,sort:i},{enabled:n=!0,...o}={})=>(0,t.useInfiniteQuery)({queryKey:r.contentKeys.folders(e,{name:a,sort:i}),queryFn:({signal:t,pageParam:r})=>s({projectRef:e,cursor:r,name:a,sort:i},t),enabled:n&&void 0!==e,initialPageParam:void 0,getNextPageParam:e=>e.cursor,...o})])},624982,e=>{"use strict";var t=e.i(91810);e.s(["CheckCircle2",()=>t.default])},961753,e=>{"use strict";e.i(10429);var t=e.i(837508),a=e.i(819591);function r(e,a){let r=e.find(e=>"compute_instance"===e.type)?.variants.filter(e=>{if(!a)return!0;let t=e.meta;return!t.supported_cloud_providers||t.supported_cloud_providers.includes(a)})??[];return r.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:t.INSTANCE_NANO_SPECS.cpu_cores,cpu_dedicated:t.INSTANCE_NANO_SPECS.cpu_dedicated,memory_gb:t.INSTANCE_NANO_SPECS.memory_gb,baseline_disk_io_mbs:t.INSTANCE_NANO_SPECS.baseline_disk_io_mbs,max_disk_io_mbs:t.INSTANCE_NANO_SPECS.max_disk_io_mbs,connections_direct:t.INSTANCE_NANO_SPECS.connections_direct,connections_pooler:t.INSTANCE_NANO_SPECS.connections_pooler}}),r}e.s(["calculateComputeSizePrice",0,({availableOptions:e,oldComputeSize:t,newComputeSize:a,plan:r})=>{let s=t;"free"!==r&&"ci_nano"===t&&(s="ci_micro");let i=e?.find(e=>e.identifier===s)?.price??0,n=e?.find(e=>e.identifier===a)?.price??0;return{oldPrice:(720*i).toFixed(2),newPrice:(720*n).toFixed(2)}},"calculateComputeSizeRequiredForIops",0,e=>{let t=Object.entries(a.COMPUTE_BASELINE_IOPS).sort((e,t)=>e[1]-t[1]);for(let[a,r]of t)if(e<=r)return a;return t[t.length-1][0]},"calculateDiskSizePrice",0,({planId:e,oldSize:t,oldStorageType:r,newSize:s,newStorageType:i,numReplicas:n=0})=>{let o=a.DISK_PRICING[r]?.storage??0,l=a.DISK_PRICING[i]?.storage??0,{includedDiskGB:c}=a.PLAN_DETAILS?.[e],u=Math.max(t-c[r],0)*o,d=Math.max(s-c[i],0)*l;return{oldPrice:(u+1.25*t*o*n).toFixed(2),newPrice:(d+1.25*s*l*n).toFixed(2)}},"calculateDiskSizeRequiredForIopsWithGp3",0,e=>Math.max(1,Math.ceil(e/500)),"calculateDiskSizeRequiredForIopsWithIo2",0,e=>Math.max(4,Math.ceil(e/1e3)),"calculateIOPSPrice",0,({oldStorageType:e,oldProvisionedIOPS:t,newStorageType:r,newProvisionedIOPS:s,numReplicas:i=0})=>{if(r===a.DiskType.GP3){let n=Math.max(0,t-a.DISK_LIMITS[a.DiskType.GP3].includedIops),o=Math.max(0,s-a.DISK_LIMITS[a.DiskType.GP3].includedIops),l=n*(a.DISK_PRICING[e]?.iops??0),c=o*(a.DISK_PRICING[r]?.iops??0);return{oldPrice:(l*(1+i)).toFixed(2),newPrice:(c*(1+i)).toFixed(2)}}{let n="gp3"===e?(t-a.DISK_LIMITS[e].includedIops)*a.DISK_PRICING[e].iops:t*(a.DISK_PRICING[e]?.iops??0),o=s*(a.DISK_PRICING[r]?.iops??0);return{oldPrice:(n*(1+i)).toFixed(2),newPrice:(o*(1+i)).toFixed(2)}}},"calculateIopsRequiredForThroughput",0,e=>Math.max(125,Math.ceil(e/.256)),"calculateMaxIopsAllowedForComputeSize",0,e=>a.COMPUTE_BASELINE_IOPS[e]||0,"calculateMaxIopsAllowedForDiskSizeWithGp3",0,e=>Math.min(3e3*e,16e3),"calculateMaxIopsAllowedForDiskSizeWithio2",0,e=>Math.min(500*e,256e3),"calculateThroughputPrice",0,({storageType:e,newThroughput:t,oldThroughput:r,numReplicas:s=0})=>{if(e===a.DiskType.GP3&&t){let e=Math.max(0,r-a.DISK_LIMITS[a.DiskType.GP3].includedThroughput),i=Math.max(0,t-a.DISK_LIMITS[a.DiskType.GP3].includedThroughput),n=e*a.DISK_PRICING[a.DiskType.GP3].throughput,o=i*a.DISK_PRICING[a.DiskType.GP3].throughput;return{oldPrice:(n*(1+s)).toFixed(2),newPrice:(o*(1+s)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}},"formatNumber",0,e=>e.toLocaleString("en-US"),"getAvailableComputeOptions",()=>r,"mapAddOnVariantIdToComputeSize",0,(e="ci_nano")=>({ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL",ci_24xlarge:"24XL",ci_24xlarge_optimized_memory:"24XL - Optimized Memory",ci_24xlarge_optimized_cpu:"24XL - Optimized CPU",ci_24xlarge_high_memory:"24XL - High Memory",ci_48xlarge:"48XL",ci_48xlarge_optimized_memory:"48XL - Optimized Memory",ci_48xlarge_optimized_cpu:"48XL - Optimized CPU",ci_48xlarge_high_memory:"48XL - High Memory"})[e],"mapComputeSizeNameToAddonVariantId",0,e=>({pico:"ci_pico",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge","24xlarge":"ci_24xlarge","24xlarge_optimized_memory":"ci_24xlarge_optimized_memory","24xlarge_optimized_cpu":"ci_24xlarge_optimized_cpu","24xlarge_high_memory":"ci_24xlarge_high_memory","48xlarge":"ci_48xlarge","48xlarge_optimized_memory":"ci_48xlarge_optimized_memory","48xlarge_optimized_cpu":"ci_48xlarge_optimized_cpu","48xlarge_high_memory":"ci_48xlarge_high_memory"})[e??"nano"]])},876553,(e,t,a)=>{var r=e.r(525853),s=e.r(587250),i=Object.prototype.hasOwnProperty;t.exports=s(function(e,t,a){i.call(e,a)?e[a].push(t):r(e,a,[t])})},3251,e=>{"use strict";var t=e.i(478902);e.i(481541);var a=e.i(755191),r=e.i(360765),s=e.i(499536),i=e.i(215119),i=i,n=e.i(900114),n=n,o=e.i(830734),o=o,l=e.i(489084),l=l;let c={API:{label:"All API usage",icon:e=>(0,t.jsx)(i.default,{size:16,className:e}),key:"api"},API_DATABASE:{label:"Database API",icon:e=>(0,t.jsx)(n.default,{size:16,className:e}),key:"api_database"},API_AUTH:{label:"Authentication",icon:e=>(0,t.jsx)(a.Auth,{size:16,className:e}),key:"api_auth"},API_STORAGE:{label:"Storage",icon:e=>(0,t.jsx)(s.Storage,{size:16,className:e}),key:"api_storage"},API_REALTIME:{label:"Realtime",icon:e=>(0,t.jsx)(r.Realtime,{size:16,className:e}),key:"api_realtime"},INSTANCE:{label:"Instance health",icon:e=>(0,t.jsx)(o.default,{size:16,className:e}),key:"instance"},SUPAVISOR:{label:"Supavisor",icon:e=>(0,t.jsx)(l.default,{size:16,className:e}),key:"supavisor"}},u=[{key:"avg_cpu_usage",label:"Average CPU % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"max_cpu_usage",label:"Max CPU % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"disk_io_consumption",label:"Disk IO % Consumed",provider:"infra-monitoring",category:c.INSTANCE},{key:"disk_io_budget",label:"Disk IO % Remaining",provider:"infra-monitoring",category:c.INSTANCE},{key:"ram_usage",label:"Memory % Usage",provider:"infra-monitoring",category:c.INSTANCE},{key:"total_realtime_egress",label:"Realtime Connection Egress",provider:"daily-stats",category:c.API},{key:"total_realtime_requests",label:"Realtime Connection Requests",provider:"daily-stats",category:c.API_REALTIME},{key:"total_realtime_ingress",label:"Realtime Connection Ingress",provider:"daily-stats",category:c.API_REALTIME},{key:"total_rest_ingress",label:"API Ingress",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_egress",label:"API Egress",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_requests",label:"API Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_get_requests",label:"API GET Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_post_requests",label:"API POST Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_patch_requests",label:"API PATCH Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_delete_requests",label:"API DELETE Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_rest_options_requests",label:"API OPTIONS Requests",provider:"daily-stats",category:c.API_DATABASE},{key:"total_auth_billing_period_mau",label:"Auth Monthly Active User",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_billing_period_sso_mau",label:"Auth Monthly Active SSO User",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_ingress",label:"Auth Ingress",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_egress",label:"Auth Egress",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_requests",label:"Auth Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_get_requests",label:"Auth GET Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_post_requests",label:"Auth POST Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_patch_requests",label:"Auth PATCH Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_auth_options_requests",label:"Auth OPTIONS Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_storage_ingress",label:"Storage Ingress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_egress",label:"Storage Egress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_image_render_count",label:"Storage Image Transformations",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_requests",label:"Storage Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_get_requests",label:"Storage GET Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_post_requests",label:"Storage POST Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_delete_requests",label:"Storage DELETE Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_options_requests",label:"Storage OPTIONS Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_auth_delete_requests",label:"Auth DELETE Requests",provider:"daily-stats",category:c.API_AUTH},{key:"total_egress",label:"All Egress",provider:"daily-stats",category:c.API},{key:"total_get_requests",label:"All GET Requests",provider:"daily-stats",category:c.API},{key:"total_cached_egress",label:"All Cached Egress",provider:"daily-stats",category:c.API_STORAGE},{key:"total_storage_patch_requests",label:"Storage PATCH Requests",provider:"daily-stats",category:c.API_STORAGE},{key:"total_requests",label:"All Requests",provider:"daily-stats",category:c.API},{key:"total_patch_requests",label:"All PATCH Requests",provider:"daily-stats",category:c.API},{key:"total_post_requests",label:"All POST Requests",provider:"daily-stats",category:c.API},{key:"total_ingress",label:"All Ingress",provider:"daily-stats",category:c.API},{key:"total_delete_requests",label:"All DELETE Requests",provider:"daily-stats",category:c.API},{key:"total_options_requests",label:"All OPTIONS Requests",provider:"daily-stats",category:c.API},{key:"total_supavisor_egress_bytes",label:"Shared Pooler Egress",provider:"daily-stats",category:c.SUPAVISOR}];e.s(["METRICS",0,u,"METRIC_CATEGORIES",0,c,"TIME_PERIODS_BILLING",0,[{key:"currentBillingCycle",label:"Current billing cycle",interval:"1d"},{key:"previousBillingCycle",label:"Previous billing cycle",interval:"1d"}],"TIME_PERIODS_REPORTS",0,[{key:"7d",label:"Last 7 days",interval:"1d"},{key:"30d",label:"Last 30 days",interval:"1d"},{key:"startMonth",label:"This month",interval:"1d"}]],3251)},471880,e=>{"use strict";let t=(0,e.i(388019).default)("DatabaseBackup",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]]);e.s(["DatabaseBackup",()=>t],471880)},685509,e=>{"use strict";var t=e.i(242882),a=e.i(234745),r=e.i(635494),s=e.i(246230);async function i({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:r,error:s}=await (0,a.get)("/platform/database/{ref}/backups",{params:{path:{ref:e}},signal:t});return s&&(0,a.handleError)(s),r}e.s(["useBackupsQuery",0,({projectRef:e},{enabled:a=!0,...n}={})=>{let o=(0,r.useIsOrioleDbInAws)();return(0,t.useQuery)({queryKey:s.databaseKeys.backups(e),queryFn:({signal:t})=>i({projectRef:e},t),enabled:a&&!o&&void 0!==e,...n})}])},965371,871895,e=>{"use strict";e.i(10429);var t=e.i(837508);function a(e){switch(e){case t.PROVIDERS.AWS.id:return"ARM";case t.PROVIDERS.FLY.id:return"x86 64-bit";default:return""}}e.s(["getCloudProviderArchitecture",()=>a],965371);var r=e.i(478902),s=e.i(843778);function i({infraComputeSize:e,className:t,...a}){let i=e?.toLocaleLowerCase()==="micro"||e?.toLocaleLowerCase()==="nano",n=!!e;return(0,r.jsx)("div",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md text-center font-mono uppercase","whitespace-nowrap font-medium tracking-[0.06em] text-[11px] leading-[1.1] px-[5.5px] py-[3px]","transition-all",n?i?"bg-surface-75 text-foreground-light border border-strong bg-opacity-50":"bg-brand bg-opacity-10 text-brand-600 border border-brand-500":"bg-surface-75 text-foreground-light border border-strong","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20",i?"group-data-[state=open]:ring-foreground-muted group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",t),...a,children:e})}e.s(["ComputeBadge",()=>i],871895)},297306,e=>{"use strict";var t=e.i(478902),a=e.i(215261),r=e.i(389959),s=e.i(743371),i=e.i(540203),n=e.i(144676),o=e.i(965371);e.i(10429);var l=e.i(837508),c=e.i(837710),u=e.i(71049),d=e.i(479095),m=e.i(871895),p=e.i(642834);let f=({label:e,stat:a})=>(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-foreground-light w-16",children:e}),(0,t.jsx)("span",{className:"text-sm",children:a})]});e.s(["ComputeBadgeWrapper",0,({slug:e,projectRef:h,cloudProvider:_,computeSize:g})=>{let[y,x]=(0,r.useState)(!1),b=(0,o.getCloudProviderArchitecture)(_),{data:v,isPending:S}=(0,n.useProjectAddonsQuery)({projectRef:h},{enabled:y}),j=v?.selected_addons??[],{computeInstance:A}=(0,s.getAddons)(j),k=A?.variant?.meta,N=void 0===k&&"micro"===g?l.INSTANCE_MICRO_SPECS:k,E=v?.available_addons.find(e=>"Compute Instance"===e.name)?.variants,C=E?.[E.length-1].identifier,I=g===C?.replace("ci_",""),{data:T,isPending:P}=(0,i.useOrgSubscriptionQuery)({orgSlug:e},{enabled:y}),w=T?.plan.id!=="free"&&"nano"===g;return g?(0,t.jsxs)(u.HoverCard,{onOpenChange:()=>x(!y),openDelay:280,children:[(0,t.jsx)(u.HoverCardTrigger,{asChild:!0,className:"group",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(m.ComputeBadge,{infraComputeSize:g})})}),(0,t.jsxs)(u.HoverCardContent,{side:"bottom",align:"start",className:"p-0 overflow-hidden w-96",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"p-2 px-5 text-xs text-foreground-lighter",children:"Compute size"}),(0,t.jsx)(d.Separator,{}),(0,t.jsxs)("div",{className:"p-3 px-5 flex flex-row gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(m.ComputeBadge,{infraComputeSize:g})}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:S||P?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(p.default,{className:"h-[20px] py-0 w-32"}),(0,t.jsx)(p.default,{className:"h-[20px] py-0 w-32"})]})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:void 0!==N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{label:"CPU",stat:`${N.cpu_cores??"?"}-core ${b} ${N.cpu_dedicated?"(Dedicated)":"(Shared)"}`}),(0,t.jsx)(f,{label:"Memory",stat:`${N.memory_gb??"-"} GB`})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{label:"CPU",stat:"Shared"}),(0,t.jsx)(f,{label:"Memory",stat:"Up to 0.5 GB"})]})})})})]}),(!I||w)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Separator,{}),(0,t.jsxs)("div",{className:"p-3 px-5 text-sm flex flex-col gap-2 bg-studio",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"text-foreground",children:w?"Free upgrade to Micro available":"Unlock more compute"}),(0,t.jsx)("p",{className:"text-foreground-light",children:w?"Paid plans include a free upgrade to Micro compute.":"Scale your project up to 64 cores and 256 GB RAM."})]}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Button,{asChild:!0,type:"default",htmlType:"button",role:"button",children:(0,t.jsx)(a.default,{href:`/project/${h}/settings/compute-and-disk`,children:"Upgrade compute"})})})]})]})]})]}):null}])},42081,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},993720,e=>{"use strict";var t=e.i(242882),a=e.i(714403),r=e.i(246230);async function s({projectRef:e,connectionString:t},r){try{let{result:s}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:`
    select
      *
    from supabase_migrations.schema_migrations sm
    order by sm.version desc
  `.trim(),queryKey:["migrations"]},r);return s}catch(e){if(e.message.includes('relation "supabase_migrations.schema_migrations" does not exist'))return[];throw e}}e.s(["useMigrationsQuery",0,({projectRef:e,connectionString:a},{enabled:i=!0,...n}={})=>(0,t.useQuery)({queryKey:r.databaseKeys.migrations(e),queryFn:({signal:t})=>s({projectRef:e,connectionString:a},t),enabled:i&&void 0!==e,...n})])},745457,e=>{"use strict";var t=e.i(55956);function a(e){if(!e||!/^\d{14}$/.test(e))return;let a=(0,t.default)(e,"YYYYMMDDHHmmss",!0);return a.isValid()?a:void 0}e.s(["parseMigrationVersion",()=>a])},363246,e=>{"use strict";var t=e.i(478902),a=e.i(938933),r=e.i(843778);let s=(0,e.i(389959).createContext)({contextSize:"small",className:""});e.s(["default",0,function({className:e,size:i,type:n="Mail",color:o,strokeWidth:l,fill:c,stroke:u,background:d,src:m,icon:p,...f}){let h=(0,a.default)("icon");return(0,t.jsx)(s.Consumer,{children:({contextSize:a,className:s})=>{let n={tiny:14,small:18,medium:20,large:20,xlarge:24,xxlarge:30,xxxlarge:42},_=n.large,g=21;a&&(g=a?"string"==typeof a?n[a]:a:_),i&&(g=i?"string"==typeof i?n[i]:i:_);let y=!o&&!c&&!u,x=["sbui-icon",e];s&&x.push(s);let b=m?(0,t.jsx)("div",{className:"relative",style:{width:g+"px",height:g+"px"},children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",color:y?"currentColor":o,fill:y?"none":c||"none",stroke:y?"currentColor":u,className:(0,r.cn)(x),width:"100%",height:"100%",strokeWidth:l??void 0,...f,children:m})}):(0,t.jsx)(p,{color:y?"currentColor":o,stroke:y?"currentColor":u,className:(0,r.cn)(x),strokeWidth:l,size:g,fill:y?"none":c||"none",...f});return d?(0,t.jsx)("div",{className:h.container,children:b}):b}})}],363246)},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:r=3,redaction:s="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function u(e){let t=e;for(let{re:e}of l)t=t.replace(e,s);return t}function d(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return u(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=r)return i;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let r=[];c.set(t,r);for(let s=0;s<t.length;s++)r[s]=e(t[s],a+1);return r}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let r={};for(let[i,n]of(c.set(t,r),Object.entries(t)))d(i)?r[i]=s:r[i]=e(n,a+1);return r}if(t instanceof Map){let r=[];for(let[i,n]of(c.set(t,r),t.entries())){let t=d(i)?s:e(i,a+1),o=d(i)?s:e(n,a+1);r.push([t,o])}return r}if(t instanceof Set){let r=[];for(let s of(c.set(t,r),t.values()))r.push(e(s,a+1));return r}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:u(t.message),stack:i};return c.set(t,e),e}try{return u(String(t))}catch{return u(Object.prototype.toString.call(t))}}return u(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},432639,e=>{"use strict";let t=(0,e.i(388019).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],432639)},360608,e=>{"use strict";var t=e.i(899850),a=e.i(959076),r=e.i(479084),s=e.i(242882),i=e.i(714403),n=e.i(294285);async function o({projectRef:e,connectionString:s,keywords:n,filter:o,providers:l,forceExactCount:c,column:u},d){let m=(({filter:e,keywords:s,providers:i,forceExactCount:n=!1,column:o})=>{let l=s&&""!==s,c=[],u="select count(*) from auth.users";if(o&&l){if("email"===o){let e=(0,a.stringRange)(s),t=(0,r.literal)(e[0]),i=e[1]?(0,r.literal)(e[1]):null;c.push(`lower(email) >= ${t}${i?` and lower(email) < ${i}`:""} and instance_id = '00000000-0000-0000-0000-000000000000'::uuid`)}else if("phone"===o){let e=(0,a.stringRange)(s),t=(0,r.literal)(e[0]),i=e[1]?(0,r.literal)(e[1]):null;c.push(`phone >= ${t}${i?` and phone < ${i}`:""}`)}else if("id"===o){let e=(0,a.prefixToUUID)(s,!1);if(e===s)c.push(`id = ${(0,r.literal)(s)}`);else{let t=(0,a.prefixToUUID)(s,!0);c.push(`id >= ${(0,r.literal)(e)} and id < ${(0,r.literal)(t)}`)}}}else{if(l){let e=(0,r.literal)(`%${s}%`);c.push(`id::text ilike ${e} or email ilike ${e} or phone ilike ${e}`)}if("verified"===e?c.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===e?c.push("is_anonymous is true"):"unverified"===e&&c.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),i&&i.length>0)if(i.includes("saml 2.0")){let e=i.map(e=>"saml 2.0"===e?"sso":e);c.push(`(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[${(0,r.literal)(e)}]`.trim())}else c.push(`(raw_app_meta_data->>'providers')::jsonb ?| array[${(0,r.literal)(i)}]`)}let d=c.map(e=>`(${e})`).join(" and "),m=c.length>0?` where ${d}`:"";if(n)return`select (${u}${m}), false as is_estimate;`;{let e=`select * from auth.users${m}`,a=`${u}${m}`,s=(0,r.literal)(e);return`
${t.COUNT_ESTIMATE_SQL}

with approximation as (select reltuples as estimate from pg_class where oid = 'auth.users'::regclass)
select 
  case 
    when estimate = -1 then (select pg_temp.count_estimate(${s}))::int
    when estimate > ${t.THRESHOLD_COUNT} then ${c.length>0?`(select pg_temp.count_estimate(${s}))::int`:"estimate::int"}
    else (${a})
  end as count,
  estimate = -1 or estimate > ${t.THRESHOLD_COUNT} as is_estimate
from approximation;
`.trim()}})({filter:o,keywords:n,providers:l,forceExactCount:c,column:u}),{result:p}=await (0,i.executeSql)({projectRef:e,connectionString:s,sql:m,queryKey:["users-count"]},d),f=p?.[0]?.count,h=p?.[0]?.is_estimate;if("number"!=typeof f)throw Error("Error fetching users count");return{count:f,is_estimate:h??!0}}e.s(["useUsersCountQuery",0,({projectRef:e,connectionString:t,keywords:a,filter:r,providers:i,forceExactCount:l,column:c},{enabled:u=!0,...d}={})=>(0,s.useQuery)({queryKey:n.authKeys.usersCount(e,{keywords:a,filter:r,providers:i,forceExactCount:l,column:c}),queryFn:({signal:s})=>o({projectRef:e,connectionString:t,keywords:a,filter:r,providers:i,forceExactCount:l,column:c},s),enabled:u&&void 0!==e,...d})],360608)},238411,e=>{"use strict";var t=e.i(478902),a=e.i(242882),r=e.i(975924),s=e.i(389959),i=e.i(355901);e.i(128328);var n=e.i(158639),o=e.i(215312),l=e.i(344616),c=e.i(853322),u=e.i(150671),d=e.i(714403),m=e.i(21150),p=e.i(189329),f=e.i(820308),h=e.i(55956),_=e.i(898452),g=e.i(462273),y=e.i(414833),x=e.i(147545),b=e.i(193),v=e.i(642184),S=e.i(3251),j=e.i(787845),A=e.i(744507),k=e.i(774803),N=e.i(151675),E=e.i(30772),C=e.i(799108),I=e.i(363269),T=e.i(948610),P=e.i(214765),w=e.i(941327),q=e.i(451711),R=(0,T.generateCategoricalChart)({chartName:"LineChart",GraphicalChild:I.Line,axisComponents:[{axisType:"xAxis",AxisComp:P.XAxis},{axisType:"yAxis",AxisComp:w.YAxis}],formatAxisMap:q.formatAxisMap}),O=e.i(877555);let L={max_cpu_usage:{check:"gt",warning:75,danger:90},avg_cpu_usage:{check:"gt",warning:75,danger:90},ram_usage:{check:"gt",warning:75,danger:90},disk_io_consumption:{check:"gt",warning:75,danger:90},disk_io_budget:{check:"lt",warning:25,danger:10}};var D=e.i(989525);let M=({label:e,attribute:a,provider:r,startDate:i,endDate:n,interval:l="1d",defaultChartStyle:c="bar",isLoading:u=!1,actions:d,maxHeight:m,onUpdateChartConfig:f})=>{let{ref:T}=(0,_.useRouter)().query,q=(0,p.useDatabaseSelectorStateSnapshot)(),[M,F]=(0,s.useState)(c),[$,B]=(0,s.useState)(),U=q.selectedDatabaseId,{data:H,isFetching:z,isPending:G}=(0,v.useProjectDailyStatsQuery)({projectRef:T,attribute:a,startDate:(0,h.default)(i).format("YYYY-MM-DD"),endDate:(0,h.default)(n).format("YYYY-MM-DD")},{enabled:"daily-stats"===r}),{data:K,isFetching:Y,isPending:Q}=(0,b.useInfraMonitoringAttributesQuery)({projectRef:T,attributes:[a],startDate:i,endDate:n,interval:l,databaseIdentifier:U},{enabled:"infra-monitoring"===r}),W=(0,s.useMemo)(()=>{if(K)return(0,x.mapMultiResponseToAnalyticsData)(K,[a])[a]},[K,a]),X="infra-monitoring"===r?W:"daily-stats"===r?H:void 0,V=u||a.startsWith("new_snippet_")||("infra-monitoring"===r?Q:"daily-stats"===r?G:u),J=S.METRICS.find(e=>e.key===a),Z=J?.label??a,ee=X?.format==="%",et=(X?.data??[]).map(e=>{var t;let r,s=e[a],i=(t=e[a],(r=L[a])?"gt"===r.check?t>=r.danger?"hsl(var(--chart-destructive))":t>=r.warning?"hsl(var(--chart-warning))":"hsl(var(--chart-1))":t<=r.danger?"hsl(var(--chart-destructive))":t<=r.warning?"hsl(var(--chart-warning))":"hsl(var(--chart-1))":"hsl(var(--chart-1))");return{...e,period_start:(0,h.default)(e.period_start).utc().format("YYYY-MM-DD"),[a]:s,[Z]:s,fill:i,stroke:i}}),ea=(0,s.useCallback)(()=>{if(!X?.data?.length)return;let e=X.data[X.data.length-1][a];return ee?`${"number"==typeof e?e.toFixed(1):e}%`:"number"==typeof e?e.toLocaleString():e},[X?.data,X?.format,a]);return(0,s.useEffect)(()=>{c&&F(c)},[c]),(0,s.useEffect)(()=>{B(ea())},[X,ea]),(0,t.jsx)(D.ReportBlockContainer,{draggable:!0,showDragHandle:!0,loading:"infra-monitoring"===r?Y:"daily-stats"===r&&z,icon:J?.category?.icon("text-foreground-muted"),label:e,actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.ButtonTooltip,{type:"text",size:"tiny",disabled:V,className:"w-7 h-7",icon:"bar"===M?(0,t.jsx)(j.Activity,{}):(0,t.jsx)(A.BarChartIcon,{}),onClick:()=>{let e="bar"===M?"line":"bar";f&&f({chart:{chart_type:e}}),F(e)},tooltip:{content:{side:"bottom",className:"max-w-56 text-center",text:`View as ${"bar"===M?"line chart":"bar chart"}`}}}),d]}),children:V?(0,t.jsxs)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2 px-4",children:[(0,t.jsx)(k.Loader2,{size:18,className:"animate-spin text-border-strong"}),(0,t.jsxs)("p",{className:"text-xs text-foreground-lighter text-center",children:["Loading data for ",e]})]}):void 0===X?(0,t.jsxs)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2 px-4",children:[(0,t.jsx)(O.WarningIcon,{}),(0,t.jsxs)("p",{className:"text-xs text-foreground-lighter text-center",children:["Unable to load data for ",e]})]}):0===et.length?(0,t.jsx)("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-y-2",children:(0,t.jsx)(y.default,{size:"small",className:"border-0",description:"It may take up to 24 hours for data to refresh"})}):(0,t.jsxs)(t.Fragment,{children:[$&&(0,t.jsxs)("div",{className:"pt-2 px-3 w-full text-left leading-tight",children:[(0,t.jsx)("span",{className:"text-xs font-mono uppercase text-foreground-light",children:"Most recently"}),(0,t.jsx)("p",{className:"text-lg text",children:$})]}),(0,t.jsx)(g.ChartContainer,{className:"w-full aspect-auto px-3 py-2",style:{height:m?`${m}px`:void 0,minHeight:m?`${m}px`:void 0},children:"bar"===M?(0,t.jsxs)(E.BarChart,{accessibilityLayer:!0,margin:{left:0,right:0},data:et,children:[(0,t.jsx)(C.CartesianGrid,{vertical:!1}),(0,t.jsx)(P.XAxis,{dataKey:"period_start",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),(0,t.jsx)(w.YAxis,{hide:!0,domain:ee?[0,100]:void 0}),(0,t.jsx)(g.ChartTooltip,{content:(0,t.jsx)(g.ChartTooltipContent,{className:"w-[200px]",labelSuffix:ee?"%":"",labelFormatter:e=>(0,h.default)(e).format("DD MMM YYYY")})}),(0,t.jsx)(N.Bar,{dataKey:Z,radius:[2,2,1,1]})]}):(0,t.jsxs)(R,{accessibilityLayer:!0,margin:{left:0,right:0},data:et,children:[(0,t.jsx)(C.CartesianGrid,{vertical:!1}),(0,t.jsx)(P.XAxis,{dataKey:"period_start",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),(0,t.jsx)(w.YAxis,{hide:!0,domain:ee?[0,100]:void 0}),(0,t.jsx)(g.ChartTooltip,{content:(0,t.jsx)(g.ChartTooltipContent,{className:"w-[200px]",labelSuffix:X?.format==="%"?"%":"",labelFormatter:e=>(0,h.default)(e).format("DD MMM YYYY")})}),(0,t.jsx)(I.Line,{dataKey:Z,stroke:"hsl(var(--chart-1))",radius:4})]})})]})})};var F=e.i(937942);let $=({label:e,attribute:a,actions:r})=>{let{ref:s}=(0,n.useParams)(),i=S.METRICS.find(e=>e.key===a),o=i?.category?.label;return(0,t.jsx)(D.ReportBlockContainer,{draggable:!0,showDragHandle:!0,loading:!1,icon:i?.category?.icon("text-foreground-muted"),label:e,actions:r,children:(0,t.jsxs)("div",{className:"flex flex-col justify-center flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-foreground-lightr",children:"This chart is not longer available, and can be removed from your report"}),(0,t.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["You may view the equivalent of this data from the"," ",(0,t.jsxs)(F.InlineLink,{href:`/project/${s}/${(e=>{switch(e){case"Database API":return"/logs/postgrest-logs";case"All API usage":return"/logs/explorer";case"Realtime":return"/logs/realtime-logs";case"Storage":return"/logs/storage-logs";case"Authentication":return"/logs/auth-logs";default:return""}})(o)}`,children:[o," Logs"]})," ","instead"]})]})})};e.s(["ReportBlock",0,({item:e,startDate:h,endDate:_,interval:g,disableUpdate:y,isRefreshing:x,onRemoveChart:b,onUpdateChart:v})=>{let{ref:S}=(0,n.useParams)(),j=(0,p.useDatabaseSelectorStateSnapshot)(),[A,k]=(0,s.useState)(!1),N=e.attribute.startsWith("snippet_"),{data:E,error:C,isPending:I}=(0,c.useContentIdQuery)({projectRef:S,id:e.id},{enabled:N&&!!e.id,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!1,retry:e=>!(e>=2)}),T=N?E?.content?.sql:void 0,P={...l.DEFAULT_CHART_CONFIG,...e.chartConfig??{}},w=f.DEPRECATED_REPORTS.includes(e.attribute),q=C?.message.includes("Content not found"),{database:R}=(0,u.usePrimaryDatabase)({projectRef:S}),O=R?.connection_string_read_only,L=R?.connectionString,{data:D,error:F,isPending:B,refetch:U}=(0,a.useQuery)({queryKey:m.sqlKeys.query(S,[e.id,T,O,L]),queryFn:async()=>{if(!S||!T)return null;let e=O??L;return e?(0,d.executeSql)({projectRef:S,connectionString:e,sql:T}):(i.toast.error("Unable to establish a database connection for this project."),null)},enabled:!I&&null==C,refetchOnWindowFocus:!1}),H=D?.result;return(0,s.useEffect)(()=>{if(F){let e=String(F).toLowerCase();(e.includes("read-only transaction")||e.includes("permission denied")||e.includes("must be owner"))&&k(!0)}},[F]),(0,s.useEffect)(()=>{x&&U()},[x,U]),(0,t.jsx)(t.Fragment,{children:N?(0,t.jsx)(l.QueryBlock,{blockWriteQueries:!0,id:e.id,label:e.label,chartConfig:P,sql:T,results:H,initialHideSql:!0,errorText:q?"SQL snippet not found":F?String(F):void 0,isExecuting:B,isWriteQuery:A,actions:!I&&(0,t.jsx)(o.ButtonTooltip,{type:"text",icon:(0,t.jsx)(r.X,{}),className:"w-7 h-7",onClick:()=>b({metric:{key:e.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}}),onExecute:e=>{U()},onUpdateChartConfig:v,onRemoveChart:()=>b({metric:{key:e.attribute}}),disabled:I||q||!T}):w?(0,t.jsx)($,{attribute:e.attribute,label:`${e.label}${S!==j.selectedDatabaseId?"infra-monitoring"===e.provider?" of replica":" on project":""}`,actions:y?null:(0,t.jsx)(o.ButtonTooltip,{type:"text",icon:(0,t.jsx)(r.X,{}),className:"w-7 h-7",onClick:()=>b({metric:{key:e.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}})}):(0,t.jsx)(M,{startDate:h,endDate:_,interval:g,attribute:e.attribute,provider:e.provider,defaultChartStyle:e.chart_type,maxHeight:176,label:`${e.label}${S!==j.selectedDatabaseId?"infra-monitoring"===e.provider?" of replica":" on project":""}`,actions:y?null:(0,t.jsx)(o.ButtonTooltip,{type:"text",icon:(0,t.jsx)(r.X,{}),className:"w-7 h-7",onClick:()=>b({metric:{key:e.attribute}}),tooltip:{content:{side:"bottom",text:"Remove chart"}}}),onUpdateChartConfig:v})})}],238411)},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},587525,e=>{e.v(t=>Promise.all(["static/chunks/da2f61ca91d09b7f.js"].map(t=>e.l(t))).then(()=>t(127351)))},168845,e=>{e.v(t=>Promise.all(["static/chunks/99714db866f77205.js"].map(t=>e.l(t))).then(()=>t(238625)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/da7f9b3c361ed775.js","static/chunks/82dddbda1a808189.js","static/chunks/d3a06a9a43f3833e.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=b3cfaa38-a640-0c29-6668-1677d3e935ac
//# sourceMappingURL=90fe286d8c2f5fd2.js.map