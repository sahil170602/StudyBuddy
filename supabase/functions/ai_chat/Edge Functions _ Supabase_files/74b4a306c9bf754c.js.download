;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6c78e6b1-921f-9445-4d93-106430f150f9")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,280590,e=>{"use strict";var t=e.i(242882),s=e.i(234745),a=e.i(711950);async function r({slug:e},t){if(!e)throw Error("slug is required");let{data:a,error:r}=await (0,s.get)("/platform/organizations/{slug}/entitlements",{params:{path:{slug:e}},signal:t});return r&&(0,s.handleError)(r),a}var o=e.i(10429),i=e.i(389959),n=e.i(265735);function l(e,s,l){let u=!s&&l?.enabled!==!1,{data:d,isPending:c,isSuccess:m}=(0,n.useSelectedOrganizationQuery)({enabled:u}),p=s||d?.slug,g=!!o.IS_PLATFORM&&l?.enabled!==!1&&!!p,{data:h,isPending:_,isSuccess:f}=(({slug:e},{enabled:s=!0,...o}={})=>(0,t.useQuery)({queryKey:[a.organizationKeys.entitlements(e)],queryFn:({signal:t})=>r({slug:e},t),enabled:s&&void 0!==e,...o,staleTime:18e5}))({slug:p},{enabled:g}),{entitlement:b}=(0,i.useMemo)(()=>p?{entitlement:h?.entitlements.find(t=>t.feature.key===e)??null}:{entitlement:null},[h,e,p]),y=u?c:_,v=u?m&&f:f;return{hasAccess:!o.IS_PLATFORM||(b?.hasAccess??!1),isLoading:y,isSuccess:v,getEntitlementNumericValue:()=>{let e;return(e=b?.config)&&b.type&&"numeric"===b.type?e.value:void 0},isEntitlementUnlimited:()=>{let e;return!!((e=b?.config)&&b.type&&"numeric"===b.type)&&e.unlimited},getEntitlementSetValues:()=>{let e;return(e=b?.config)&&b.type&&"set"===b.type?e.set:[]}}}e.s(["useCheckEntitlements",()=>l],280590)},753515,e=>{"use strict";var t=e.i(478902),s=e.i(305551),a=e.i(843778);function r({align:e="left",children:r,className:o,descriptionText:i,error:n,id:l,label:u,labelOptional:d,layout:c="vertical",style:m,labelLayout:p,responsive:g=!0,size:h="medium",beforeLabel:_,afterLabel:f,nonBoxInput:b=!u}){let y=s.default.form_layout,v="flex"===c,S=[];S.push(y.size[h]);let x=[],E=[];"horizontal"===c||p||v?"horizontal"===p?x.push(y.labels_horizontal_layout):x.push(y.labels_vertical_layout):x.push(y.labels_horizontal_layout),"horizontal"!==c?E.push(y.data_input_horizontal_layout):(E.push(y.data_input_vertical_layout),"right"===e&&E.push(y.data_input_vertical_layout__align_right)),v?(S.push(y.flex[e].base),"left"===e&&(x.push(y.flex.left.labels),E.push(y.flex.left.data_input)),"right"===e&&(x.push(y.flex.right.labels),E.push(y.flex.right.data_input))):S.push(y.container,g?y.responsive:y.non_responsive),o&&S.push(o);let j=!!(u||_||f),N=n&&(0,t.jsx)("p",{"data-state":n?"show":"hide",className:[y.error.base,y.error.size[h]].join(" "),children:n}),T=i&&(0,t.jsx)("div",{className:[y.description.base,y.description.size[h]].join(" "),id:l+"-description",children:i});return(0,t.jsxs)("div",{className:S.join(" "),children:[v&&(0,t.jsx)("div",{className:y.flex[e].content,children:r}),j||d||"horizontal"===c?(0,t.jsxs)("div",{className:x.join(" "),children:[j&&(0,t.jsxs)("label",{className:(0,a.cn)(y.label.base,y.label.size[h],"break-all"),htmlFor:l,children:[_&&(0,t.jsx)("span",{className:[y.label_before.base,y.label_before.size[h]].join(" "),id:l+"-before",children:_}),u,f&&(0,t.jsx)("span",{className:[y.label_after.base,y.label_after.size[h]].join(" "),id:l+"-after",children:f})]}),d&&(0,t.jsx)("span",{className:[y.label_optional.base,y.label_optional.size[h]].join(" "),id:l+"-optional",children:d}),v&&(0,t.jsxs)(t.Fragment,{children:[T,N]})]}):null,!v&&(0,t.jsx)("div",{className:E.join(" "),style:m,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:b&&u&&"vertical"===c?y.non_box_data_input_spacing_vertical:b&&u&&"horizontal"===c?y.non_box_data_input_spacing_horizontal:"",children:r}),N,T]})})]})}e.s(["FormLayout",()=>r])},140449,e=>{"use strict";var t=e.i(478902),s=e.i(389959);let a=(0,s.createContext)({formContextOnChange:null,values:null,errors:null,handleBlur:null,touched:null,fieldLevelValidation:null});e.s(["FormContextProvider",0,e=>{let{formContextOnChange:s,values:r,errors:o,handleBlur:i,touched:n,fieldLevelValidation:l}=e;return(0,t.jsx)(a.Provider,{value:{formContextOnChange:s,values:r,errors:o,handleBlur:i,touched:n,fieldLevelValidation:l},children:e.children})},"useFormContext",0,()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useFormContextOnChange must be used within a FormContextProvider.");return e}])},440401,701823,e=>{"use strict";var t=e.i(478902),s=e.i(938933),a=e.i(867637);let r={tiny:14,small:16,medium:20,large:24,xlarge:32};function o({style:e,size:o="medium"}){let i=(0,s.default)("inputErrorIcon");return(0,t.jsx)("div",{className:i.base,style:e,children:(0,t.jsx)(a.AlertCircle,{size:r[o],strokeWidth:2})})}e.s(["default",()=>o],440401);var i=e.i(843778);function n({icon:e,className:a,size:r}){let o=(0,s.default)("inputIconContainer");return(0,t.jsx)("div",{className:(0,i.cn)(o.base,o.size[r],a),children:e})}e.s(["default",()=>n],701823)},171997,e=>{"use strict";var t=e.i(478902),s=e.i(389959),a=e.i(816467),r=e.i(753515),o=e.i(440401),i=e.i(701823),n=e.i(282410),l=e.i(938933),u=e.i(375761),d=e.i(843778),c=e.i(837710),m=e.i(140449);function p({autoComplete:e,autoFocus:p,className:g,inputClassName:h,iconContainerClassName:_,copy:f,defaultValue:b,descriptionText:y,disabled:v,error:S,icon:x,id:E="",name:j="",inputRef:N,label:T,afterLabel:C,beforeLabel:I,labelOptional:O,layout:w,onChange:P,onBlur:R,onCopy:A,placeholder:k,type:$="text",value:L,style:q,reveal:F=!1,actions:D,size:M="medium",borderless:z=!1,validation:G,...U}){let[H,B]=(0,s.useState)("Copy"),[X,K]=(0,s.useState)(!0),Q=(0,l.default)("input"),{formContextOnChange:W,values:V,errors:Y,handleBlur:J,touched:Z,fieldLevelValidation:ee}=(0,m.useFormContext)();V&&!L&&(L=V[E||j]),S||(Y&&!S&&(S=Y[E||j]),S=Z&&Z[E]?S:void 0),(0,s.useEffect)(()=>{G&&ee(E,G(L))},[]);let et=["peer/input",Q.base];return S&&et.push(Q.variants.error),S||et.push(Q.variants.standard),M&&et.push(Q.size[M]),x&&et.push(Q.with_icon[M]),v&&et.push(Q.disabled),h&&et.push(h),(0,t.jsx)(r.FormLayout,{label:T,afterLabel:C,beforeLabel:I,labelOptional:O,layout:w,id:E,error:S,descriptionText:y,style:q,size:M,className:g,children:(0,t.jsxs)("div",{className:Q.container,children:[(0,t.jsx)("input",{"data-size":M,autoComplete:e,autoFocus:p,defaultValue:b,disabled:v,id:E,name:j,onChange:function(e){P&&P(e),W&&W(e),G&&ee(E,G(e.target.value))},onBlur:function(e){J&&setTimeout(()=>{J(e)},100),R&&R(e)},onCopy:A,placeholder:k,ref:N,type:$,value:F&&X?n.HIDDEN_PLACEHOLDER:L,className:(0,d.cn)(et),...U}),x&&(0,t.jsx)(i.default,{size:M,icon:x,className:_}),f||S||D?(0,t.jsxs)("div",{className:Q.actions_container,children:[S&&(0,t.jsx)(o.default,{size:M}),f&&!(F&&X)?(0,t.jsx)(c.Button,{size:"tiny",type:"default",icon:(0,t.jsx)(a.Copy,{}),onClick:()=>{var e;return e=L,void(0,u.copyToClipboard)(e,()=>{B("Copied"),setTimeout(()=>{B("Copy")},3e3),A?.()})},children:H}):null,F&&X?(0,t.jsx)(c.Button,{size:"tiny",type:"default",onClick:function(){K(!1)},children:"Reveal"}):null,D&&D]}):null]})})}p.TextArea=function({className:e,textAreaClassName:i,descriptionText:n,disabled:d,error:p,icon:g,id:h="",name:_="",label:f,afterLabel:b,beforeLabel:y,labelOptional:v,layout:S,onChange:x,onBlur:E,placeholder:j,value:N,style:T,rows:C=4,limit:I,size:O="medium",borderless:w=!1,validation:P,copy:R=!1,onCopy:A,actions:k,...$}){let[L,q]=(0,s.useState)(0),[F,D]=(0,s.useState)("Copy"),{formContextOnChange:M,values:z,errors:G,handleBlur:U,touched:H,fieldLevelValidation:B}=(0,m.useFormContext)();z&&!N&&(N=z[h||_]),p||(G&&!p&&(p=G[h||_]),p=H&&H[h||_]?p:void 0),(0,s.useEffect)(()=>{P&&B(h,P(N))},[]);let X=(0,l.default)("input"),K=[X.base];return p&&K.push(X.variants.error),p||K.push(X.variants.standard),g&&K.push(X.with_icon[O]),O&&K.push(X.size[O]),d&&K.push(X.disabled),i&&K.push(i),(0,t.jsx)(r.FormLayout,{className:e,label:f,afterLabel:b,beforeLabel:y,labelOptional:v,layout:S,id:h,error:p,descriptionText:n,style:T,size:O,children:(0,t.jsxs)("div",{className:X.container,children:[(0,t.jsx)("textarea",{disabled:d,id:h,name:_,rows:C,cols:100,placeholder:j,onChange:function(e){q(e.target.value.length),x&&x(e),M&&M(e),P&&B(h,P(e.target.value))},onBlur:function(e){U&&setTimeout(()=>{U(e)},100),E&&E(e)},onCopy:A,value:N,className:K.join(" "),maxLength:I,...$}),R||p||k?(0,t.jsx)("div",{className:X.textarea_actions_container,children:(0,t.jsxs)("div",{className:X.textarea_actions_container_items,children:[p&&(0,t.jsx)(o.default,{size:O}),R&&(0,t.jsx)(c.Button,{size:"tiny",type:"default",onClick:()=>{var e;return e=N,void(0,u.copyToClipboard)(e,()=>{D("Copied"),setTimeout(()=>{D("Copy")},3e3),A?.()})},icon:(0,t.jsx)(a.Copy,{}),children:F}),k&&k]})}):null]})})},e.s(["Input",0,p],171997)},539013,e=>{"use strict";var t=e.i(478902),s=e.i(217027),a=e.i(837710),r=e.i(613580),o=e.i(938933);let i=({id:e,disabled:i,className:n,children:l,header:u,visible:d,open:c,size:m="medium",loading:p,align:g="right",hideFooter:h=!1,customFooter:_,onConfirm:f,onCancel:b,confirmText:y="Confirm",cancelText:v="Cancel",triggerElement:S,defaultOpen:x,tooltip:E,...j})=>{let N=(0,o.default)("sidepanel"),T=_||(0,t.jsxs)("div",{className:N.footer,children:[(0,t.jsx)("div",{children:(0,t.jsx)(a.Button,{disabled:p,type:"default",onClick:()=>b?b():null,children:v})}),!!f&&(0,t.jsxs)(r.Tooltip,{children:[(0,t.jsx)(r.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-block",children:(0,t.jsx)(a.Button,{htmlType:"submit",disabled:i||p,loading:p,onClick:f,children:y})})}),void 0!==E&&(0,t.jsx)(r.TooltipContent,{side:"bottom",children:E})]})]});c=c||d;let{onOpenAutoFocus:C,onCloseAutoFocus:I,onEscapeKeyDown:O,onPointerDownOutside:w,onInteractOutside:P}=j;return(0,t.jsxs)(s.Root,{open:c,onOpenChange:function(e){void 0!==d&&!e&&b&&b()},defaultOpen:x,children:[S&&(0,t.jsx)(s.Trigger,{asChild:!0,children:S}),(0,t.jsxs)(s.Portal,{children:[(0,t.jsx)(s.Overlay,{className:N.overlay}),(0,t.jsxs)(s.Content,{className:[N.base,N.size[m],N.align[g],n&&n].join(" "),onOpenAutoFocus:C,onCloseAutoFocus:I,onEscapeKeyDown:O,onPointerDownOutside:w,onInteractOutside:e=>{e.target?.closest("#toast")&&e.preventDefault(),P&&P(e)},...j,children:[u&&(0,t.jsx)("header",{className:N.header,children:u}),(0,t.jsx)("div",{className:N.contents,children:l}),!h&&T]})]})]})};i.Content=function({children:e,className:s}){let a=(0,o.default)("sidepanel");return(0,t.jsx)("div",{className:[a.content,s].join(" ").trim(),children:e})},i.Separator=function(){let e=(0,o.default)("sidepanel");return(0,t.jsx)("div",{className:e.separator})},e.s(["SidePanel",0,i],539013)},707843,e=>{"use strict";var t=e.i(478902);function s({body:e,head:s,className:a,containerClassName:r,borderless:o,headTrClasses:i,bodyClassName:n,style:l}){let u=["table-container"];r&&u.push(r),o&&u.push("table-container--borderless");let d=["table"];return a&&d.push(a),(0,t.jsx)("div",{className:u.join(" "),children:(0,t.jsxs)("table",{className:d.join(" "),style:l,children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{className:i,children:s})}),(0,t.jsx)("tbody",{className:n,children:e})]})})}s.th=({children:e,className:s,style:a})=>{let r=["p-3 px-4 text-left"];return s&&r.push(s),(0,t.jsx)("th",{className:r.join(" "),style:a,children:e})},s.td=({children:e,colSpan:s,className:a,style:r,...o})=>(0,t.jsx)("td",{className:a,colSpan:s,style:r,...o,children:e}),s.tr=({children:e,className:s,onClick:a,style:r,hoverable:o})=>{let i=[s];return(a||o)&&i.push("tr--link"),(0,t.jsx)("tr",{className:i.join(" "),onClick:a,style:r,children:e})},e.s(["default",0,s])},993394,e=>{"use strict";var t,s=e.i(55956),a=e.i(10429);e.i(128328);var r=e.i(86086);let o=`${a.DOCS_URL}/guides/platform/logs#querying-with-the-logs-explorer`,i=[{label:"Recent Errors",mode:"simple",searchString:"[Ee]rror|\\s[45][0-9][0-9]\\s",for:["api"]},{label:"Commits",mode:"simple",searchString:"COMMIT",for:["database"]},{label:"Commits By User",description:"Count of commits made by users on the database",mode:"custom",searchString:`select
  p.user_name,
  count(*) as count
from postgres_logs
  left join unnest(metadata) as m on true
  left join unnest(m.parsed) as p on true
where
  regexp_contains(event_message, 'COMMIT')
group by
  p.user_name
  `,for:["database"]},{label:"Metadata IP",description:"List all IP addresses that used the Supabase API",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  h.x_real_ip
from edge_logs
  left join unnest(metadata) as m on true
  left join unnest(m.request) as r on true
  left join unnest(r.headers) as h on true
where h.x_real_ip is not null
`,for:["api"]},{label:"Requests by Geography",description:"List all ISO 3166-1 alpha-2 country codes that used the Supabase API",mode:"custom",searchString:`select
  cf.country,
  count(*) as count
from edge_logs
  left join unnest(metadata) as m on true
  left join unnest(m.request) as r on true
  left join unnest(r.cf) as cf on true
group by
  cf.country
order by
  count desc
`,for:["api"]},{label:"Slow Response Time",mode:"custom",description:"List all Supabase API requests that are slow",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message,
  r.origin_time
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.response) as r
where
  r.origin_time > 1000
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"500 Request Codes",description:"List all Supabase API requests that responded witha 5XX status code",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message,
  r.status_code
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.response) as r
where
  r.status_code >= 500
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"Top Paths",description:"List the most requested Supabase API paths",mode:"custom",searchString:`select
  r.path as path,
  r.search as params,
  count(timestamp) as c
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) as r
group by
  path,
  params
order by
  c desc
limit 100
`,for:["api"]},{label:"REST Requests",description:"List all PostgREST requests",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) as r
where
  path like '%rest/v1%'
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"Errors",description:"List all Postgres error messages with ERROR, FATAL, or PANIC severity",mode:"custom",searchString:`select
  cast(t.timestamp as datetime) as timestamp,
  p.error_severity,
  event_message
from postgres_logs as t
  cross join unnest(metadata) as m
  cross join unnest(m.parsed) as p
where
  p.error_severity in ('ERROR', 'FATAL', 'PANIC')
order by
  timestamp desc
limit 100
`,for:["database"]},{label:"Error Count by User",description:"Count of errors by users",mode:"custom",searchString:`select
  count(t.timestamp) as count,
  p.user_name,
  p.error_severity
from postgres_logs as t
  cross join unnest(metadata) as m
  cross join unnest(m.parsed) as p
where
  p.error_severity in ('ERROR', 'FATAL', 'PANIC')
group by
  p.user_name,
  p.error_severity
order by
  count desc
limit 100
`,for:["database"]},{label:"Auth Endpoint Events",description:"Endpoint events filtered by path",mode:"custom",searchString:`select
  t.timestamp,
  event_message
from auth_logs as t
where
  regexp_contains(event_message,"level.{3}(info|warning||error|fatal)")
  -- and regexp_contains(event_message,"path.{3}(/token|/recover|/signup|/otp)")
limit 100
`,for:["database"]},{label:"Auth Audit Logs",description:"Audit logs for auth events",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message, metadata 
from auth_audit_logs 
limit 10
`,for:["database"]},{label:"Storage Object Requests",description:"Number of requests done on Storage Objects",mode:"custom",searchString:`select
  r.method as http_verb,
  r.path as filepath,
  count(*) as num_requests
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) AS r
  cross join unnest(r.headers) AS h
where
  path like '%storage/v1/object/%'
group by
  r.path, r.method
order by
  num_requests desc
limit 100
`,for:["api"]},{label:"Storage Egress Requests",description:"Check the number of requests done on Storage Affecting Egress",mode:"custom",searchString:`select
  request.method as http_verb,
  request.path as filepath,
  (responseHeaders.cf_cache_status = 'HIT') as cached,
  count(*) as num_requests
from
  edge_logs
  cross join unnest(metadata) as metadata
  cross join unnest(metadata.request) as request
  cross join unnest(metadata.response) as response
  cross join unnest(response.headers) as responseHeaders
where
  (path like '%storage/v1/object/%' or path like '%storage/v1/render/%')
  and request.method = 'GET'
group by 1, 2, 3
order by num_requests desc
limit 100;
`,for:["api"]},{label:"Storage Top Cache Misses",description:"The top Storage requests that miss caching",mode:"custom",searchString:`select
  r.path as path,
  r.search as search,
  count(id) as count
from edge_logs f
  cross join unnest(f.metadata) as m
  cross join unnest(m.request) as r
  cross join unnest(m.response) as res
  cross join unnest(res.headers) as h
where starts_with(r.path, '/storage/v1/object')
  and r.method = 'GET'
  and h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC')
group by path, search
order by count desc
limit 100;
`,for:["api"]}],n={search_query:e=>`regexp_contains(event_message, '${e}')`},l={postgres_logs:{...n,database:e=>`identifier = '${e}'`,"severity.error":"parsed.error_severity in ('ERROR', 'FATAL', 'PANIC')","severity.noError":"parsed.error_severity not in ('ERROR', 'FATAL', 'PANIC')","severity.log":"parsed.error_severity = 'LOG'"},edge_logs:{...n,database:e=>`identifier = '${e}'`,"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499","product.database":"request.path like '/rest/%' or request.path like '/graphql/%'","product.storage":"request.path like '/storage/%'","product.auth":"request.path like '/auth/%'","product.realtime":"request.path like '/realtime/%'","method.get":"request.method = 'GET'","method.post":"request.method = 'POST'","method.put":"request.method = 'PUT'","method.patch":"request.method = 'PATCH'","method.delete":"request.method = 'DELETE'","method.options":"request.method = 'OPTIONS'"},function_edge_logs:{...n,"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499"},function_logs:{...n,"severity.error":"metadata.level = 'error'","severity.notError":"metadata.level != 'error'","severity.log":"metadata.level = 'log'","severity.info":"metadata.level = 'info'","severity.debug":"metadata.level = 'debug'","severity.warn":"metadata.level = 'warn'"},auth_logs:{...n,"severity.error":"metadata.level = 'error' or metadata.level = 'fatal'","severity.warning":"metadata.level = 'warning'","severity.info":"metadata.level = 'info'","status_code.server_error":"cast(metadata.status as int64) between 500 and 599","status_code.client_error":"cast(metadata.status as int64) between 400 and 499","status_code.redirection":"cast(metadata.status as int64) between 300 and 399","status_code.success":"cast(metadata.status as int64) between 200 and 299","endpoints.admin":'REGEXP_CONTAINS(metadata.path, "/admin")',"endpoints.signup":'REGEXP_CONTAINS(metadata.path, "/signup|/invite|/verify")',"endpoints.authentication":'REGEXP_CONTAINS(metadata.path, "/token|/authorize|/callback|/otp|/magiclink")',"endpoints.recover":'REGEXP_CONTAINS(metadata.path, "/recover")',"endpoints.user":'REGEXP_CONTAINS(metadata.path, "/user")',"endpoints.logout":'REGEXP_CONTAINS(metadata.path, "/logout")'},realtime_logs:{...n},storage_logs:{...n},postgrest_logs:{...n,database:e=>`identifier = '${e}'`},pgbouncer_logs:{...n},supavisor_logs:{...n,database:e=>`m.project like '${e}%'`},pg_upgrade_logs:{...n},pg_cron_logs:{...n},etl_replication_logs:{...n,pipeline_id:e=>`pipeline_id = ${e}`}};var u=((t={}).EDGE="edge_logs",t.POSTGRES="postgres_logs",t.FUNCTIONS="function_logs",t.FN_EDGE="function_edge_logs",t.AUTH="auth_logs",t.AUTH_AUDIT="auth_audit_logs",t.REALTIME="realtime_logs",t.STORAGE="storage_logs",t.POSTGREST="postgrest_logs",t.SUPAVISOR="supavisor_logs",t.PGBOUNCER="pgbouncer_logs",t.PG_UPGRADE="pg_upgrade_logs",t.PG_CRON="pg_cron_logs",t.ETL="etl_replication_logs",t);let d={postgres_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events with ERROR, PANIC, or FATAL"},{key:"noError",label:"No Error",description:"Show all non-error events"},{key:"log",label:"Log",description:"Show all events that are log severity"}]}},edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]},product:{label:"Product",key:"product",options:[{key:"database",label:"Database",description:""},{key:"auth",label:"Auth",description:""},{key:"storage",label:"Storage",description:""},{key:"realtime",label:"Realtime",description:""}]},method:{label:"Method",key:"method",options:[{key:"get",label:"GET",description:""},{key:"options",label:"OPTIONS",description:""},{key:"put",label:"PUT",description:""},{key:"post",label:"POST",description:""},{key:"patch",label:"PATCH",description:""},{key:"delete",label:"DELETE",description:""}]}},...r.IS_PLATFORM?{function_edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]}}}:{},function_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:'Show all events that are "error" severity'},{key:"warn",label:"Warning",description:'Show all events that are "warn" severity'},{key:"info",label:"Info",description:'Show all events that are "info" severity'},{key:"debug",label:"Debug",description:'Show all events that are "debug" severity'},{key:"log",label:"Log",description:'Show all events that are "log" severity'}]}},auth_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events that have error or fatal severity"},{key:"warning",label:"Warning",description:"Show all events that have warning severity"},{key:"info",label:"Info",description:"Show all events that have info severity"}]},status_code:{label:"Status Code",key:"status_code",options:[{key:"server_error",label:"Server Error",description:"Show all requests with 5XX status code"},{key:"client_error",label:"Client Error",description:"Show all requests with 4XX status code"},{key:"redirection",label:"Redirection",description:"Show all requests that have 3XX status code"},{key:"success",label:"Success",description:"Show all requests that have 2XX status code"}]},endpoints:{label:"Endpoints",key:"endpoints",options:[{key:"admin",label:"Admin",description:"Show all admin requests"},{key:"signup",label:"Sign up",description:"Show all signup and authorization requests"},{key:"recover",label:"Password Recovery",description:"Show all password recovery requests"},{key:"authentication",label:"Authentication",description:"Show all authentication flow requests (login, otp, and Oauth2)"},{key:"user",label:"User",description:"Show all user data requests"},{key:"logout",label:"Logout",description:"Show all logout requests"}]}}},c=[{text:"Last 15 minutes",calcFrom:()=>(0,s.default)().subtract(15,"minute").toISOString(),calcTo:()=>""},{text:"Last 30 minutes",calcFrom:()=>(0,s.default)().subtract(30,"minute").toISOString(),calcTo:()=>""},{text:"Last hour",calcFrom:()=>(0,s.default)().subtract(1,"hour").toISOString(),calcTo:()=>"",default:!0},{text:"Last 3 hours",calcFrom:()=>(0,s.default)().subtract(3,"hour").toISOString(),calcTo:()=>""},{text:"Last 24 hours",calcFrom:()=>(0,s.default)().subtract(1,"day").toISOString(),calcTo:()=>""},{text:"Last 2 days",calcFrom:()=>(0,s.default)().subtract(2,"day").toISOString(),calcTo:()=>""},{text:"Last 3 days",calcFrom:()=>(0,s.default)().subtract(3,"day").toISOString(),calcTo:()=>""},{text:"Last 5 days",calcFrom:()=>(0,s.default)().subtract(5,"day").toISOString(),calcTo:()=>""}],m=[{text:"Last hour",calcFrom:()=>(0,s.default)().subtract(1,"hour").toISOString(),calcTo:()=>"",default:!0},{text:"Last 3 hours",calcFrom:()=>(0,s.default)().subtract(3,"hour").toISOString(),calcTo:()=>""},{text:"Last 24 hours",calcFrom:()=>(0,s.default)().subtract(1,"day").toISOString(),calcTo:()=>""},{text:"Last 3 days",calcFrom:()=>(0,s.default)().subtract(3,"day").toISOString(),calcTo:()=>""},{text:"Last 7 days",calcFrom:()=>(0,s.default)().subtract(7,"day").toISOString(),calcTo:()=>""}];e.s(["EXPLORER_DATEPICKER_HELPERS",0,m,"FILTER_OPTIONS",0,d,"LOGS_EXPLORER_DOCS_URL",0,o,"LOGS_LARGE_DATE_RANGE_DAYS_THRESHOLD",0,2,"LOGS_SOURCE_DESCRIPTION",0,{edge_logs:"Logs obtained from the network edge, containing all API requests",postgres_logs:"Database logs obtained directly from Postgres",function_logs:"Function logs generated from runtime execution",function_edge_logs:"Function call logs, containing the request and response",auth_logs:"Errors, warnings, and performance details from the auth service",auth_audit_logs:"Audit records of user signups, logins, and account changes",realtime_logs:"Realtime server for Postgres logical replication broadcasting",storage_logs:"Object storage logs",postgrest_logs:"RESTful API web server logs",supavisor_logs:"Shared connection pooler logs for PostgreSQL",pgbouncer_logs:"Dedicated connection pooler for PostgreSQL",pg_upgrade_logs:"Logs generated by the Postgres version upgrade process",pg_cron_logs:"Postgres logs from pg_cron cron jobs",etl_replication_logs:"Logs from the replication process"},"LOGS_TABLES",0,{api:"edge_logs",database:"postgres_logs",functions:"function_logs",fn_edge:"function_edge_logs",auth:"auth_logs",realtime:"realtime_logs",storage:"storage_logs",postgrest:"postgrest_logs",supavisor:"supavisor_logs",pg_upgrade:"pg_upgrade_logs",pg_cron:"postgres_logs",pgbouncer:"pgbouncer_logs",etl:"etl_replication_logs"},"LOG_ROUTES_WITH_REPLICA_SUPPORT",0,["/project/[ref]/logs/edge-logs","/project/[ref]/logs/pooler-logs","/project/[ref]/logs/postgres-logs","/project/[ref]/logs/postgrest-logs"],"LogsTableName",()=>u,"PREVIEWER_DATEPICKER_HELPERS",0,c,"SQL_FILTER_TEMPLATES",0,l,"TEMPLATES",0,i,"TIER_QUERY_LIMITS",0,{FREE:{text:"1 day",value:1,unit:"day",promptUpgrade:!0},PRO:{text:"7 days",value:7,unit:"day",promptUpgrade:!0},PAYG:{text:"7 days",value:7,unit:"day",promptUpgrade:!0},TEAM:{text:"28 days",value:28,unit:"day",promptUpgrade:!0},ENTERPRISE:{text:"90 days",value:90,unit:"day",promptUpgrade:!1},PLATFORM:{text:"1 day",value:1,unit:"day",promptUpgrade:!1}},"getDefaultHelper",0,e=>e.find(e=>e.default)||e[0]])},884892,e=>{"use strict";let t=class{_line;_text;_lines;model;offset;lineNumber;constructor(e,t,s){this.model=e,this.offset=t,this.lineNumber=s,this._text=e.getValue(),this._lines=this._text.split(/\r?\n/g),this._line=this._lines[s]}hasNext(){return this.lineNumber>=0||this.offset>=0}isFowardDQuote(){return!!this.hasForward()&&34===this.peekForward()}isNextDQuote(){return!!this.hasNext()&&34===this.peekNext()}isNextPeriod(){return!!this.hasNext()&&46===this.peekNext()}peekNext(){return this.offset<0?10*(this.lineNumber>0):this._line.charCodeAt(this.offset)}hasForward(){return this.lineNumber<this._lines.length||this.offset<this._line.length}peekForward(){return this.offset===this._line.length?10*(this.lineNumber!==this._lines.length):this._line.charCodeAt(this.offset+1)}next(){if(this.offset<0)return this.lineNumber>0?(this.lineNumber--,this._line=this._lines[this.lineNumber],this.offset=this._line.length-1,10):(this.lineNumber=-1,0);let e=this._line.charCodeAt(this.offset);return this.offset--,e}readArguments(){let e=0,t=0,s=0,a=0;for(;this.hasNext();){let r=this.next();switch(r){case 40:if(--e<0)return a;break;case 41:e++;break;case 123:s--;break;case 125:s++;break;case 91:t--;break;case 93:t++;break;case 34:case 39:for(;this.hasNext()&&r!==this.next(););break;case 44:!e&&!t&&!s&&a++}}return -1}readIdent(){let e=!1,t=!1,s="";for(;this.hasNext();){let a=this.peekNext();if(e&&!t&&!this._isIdentPart(a))break;if(a=this.next(),!e&&t&&34===a){e=!0;continue}if(e||32!==a&&9!==a&&10!=a){if(!e&&(34===a||this._isIdentPart(a)))e=!0,t=34===a,s=String.fromCharCode(a)+s;else if(e)if(t){if(0===a||(s=String.fromCharCode(a)+s,34===a))break}else s=String.fromCharCode(a)+s}}return s}readIdents(e){let t=[];for(;e>0;){e--;let s=this.readIdent();if(!s||(t.push(s),!this.isNextPeriod()))break}return t.reverse()}_isIdentPart(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}};e.s(["default",0,t])},460988,e=>{"use strict";var t=e.i(156054),s=e.i(55956),a=e.i(807162),r=e.i(228598),o=e.i(389959);e.i(128328);var i=e.i(86086),n=e.i(884892),l=e.i(857054),u=e.i(993394);let d=e=>s.default.utc(Number(e)/1e3).toISOString(),c=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},m=(e,t)=>Object.keys(e).filter(t=>e[t]).flatMap(s=>{let a=t?`${t}.${s}`:s;return"object"==typeof e[s]?m(e[s],a):[a]}),p=(e,t)=>{let s=Object.keys(t),r=u.SQL_FILTER_TEMPLATES[e],o=e=>{let s=r[e],o=(0,a.default)(t,e);if(void 0!==o&&"function"==typeof s)return s(o);if(void 0===s)if("string"==typeof o)return`${e} = '${o}'`;else return`${e} = ${o}`;return void 0===o&&"function"==typeof s?null:s&&!1===o?null:s},i=s.map(e=>{if(void 0===t[e]||"string"==typeof t[e]&&0===t[e].length)return null;if("object"==typeof t[e]){let s=m(t[e],e).map(o).filter(Boolean);return s.length>0?`(${s.join(" or ")})`:null}{let t=o(e);return null===t?null:`(${t})`}}).filter(Boolean).join(" and ");return i?"where "+i:""},g=e=>{switch(e){case"edge_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.request) as request
  cross join unnest(m.response) as response`;case"pg_cron_logs":case"postgres_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.parsed) as parsed`;case"function_logs":case"auth_logs":return"cross join unnest(metadata) as metadata";case"function_edge_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.response) as response
  cross join unnest(m.request) as request`;case"supavisor_logs":return"cross join unnest(metadata) as m";default:return""}},h=i.IS_PLATFORM?"where ( parsed.application_name = 'pg_cron' or regexp_contains(event_message, 'cron job') )":"where ( parsed.application_name = 'pg_cron' or event_message::text LIKE '%cron job%' )",_=e=>{let t=e.reduce((e,t)=>{let s=f(t);return e[s]+=1,e},{second:0,minute:0,hour:0,day:0});return Object.keys(t).reduce((e,s)=>t[e]>t[s]?e:s)},f=e=>({0:"second",1:"minute",2:"hour",3:"day"})[["second","minute","hour"].map(t=>e.get(t)).reduce((e,t)=>(0===t&&(e+=1),e),0)];function b(e){let t=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"");return/\b(WITH)\b(?=(?:[^']*'[^']*')*[^']*$)/i.test(t)}function y(e){let t=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"");return/\b(ILIKE)\b(?=(?:[^']*'[^']*')*[^']*$)/i.test(t)}function v(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.jwt?.[0]?.apikey?.[0];if(!t)return;if(t.invalid)return"<invalid>";let s=t?.payload?.[0];return s&&"HS256"===s.algorithm&&"supabase"===s.issuer&&["anon","service_role"].includes(s.role)&&!s.subject?s.role:"<unrecognized>"}function S(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.apikey?.[0]?.apikey?.[0];if(t)return t.error?`${t.prefix}... <invalid: ${t.error}>`:`${t.prefix}...`}function x(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.jwt?.[0]?.authorization?.[0];if(!t||t.invalid)return;let s=t?.payload?.[0];if(s&&s.role)return s.role}e.s(["apiKey",()=>S,"checkForILIKEClause",()=>y,"checkForWithClause",()=>b,"fillTimeseries",0,(e,t,a,r,o,i,n=20,l)=>{let u;if(0===e.length&&!(o&&i))return[];if(e.length>n)return e.map(e=>{let a=e[t],r=c(a)?d(a):s.default.utc(a).toISOString();return e[t]=r,e});if(e.length<=1&&!(o&&i))return e;let m=e.map(e=>s.default.utc(e[t])),p=i?s.default.utc(i):s.default.utc(Math.max.apply(null,m)),g=o?s.default.utc(o):s.default.utc(Math.min.apply(null,m)),h=e.length>0?m:[g,p],f=1;if(l){let e=l.match(/^(\d+)(m|h|d|s)$/);e?(f=parseInt(e[1],10),u=({s:"second",m:"minute",h:"hour",d:"day"})[e[2]]):u=_(h)}else u=_(h);0!==e.length||l||(u="minute");let b=e.map(e=>{let r=e[t],o=c(r)?d(r):s.default.utc(r).toISOString();return Array.isArray(a)&&0===a.length?{[t]:o}:(e[t]=o,e)}),y=g;for(;y.isBefore(p)||y.isSame(p);){if(!m.find(e=>e.year()===y.year()&&e.month()===y.month()&&e.date()===y.date()&&e.hour()===y.hour()&&e.minute()===y.minute()&&e.second()===y.second())){let e=("string"==typeof a?[a]:a).reduce((e,t)=>({...e,[t]:r}),{});b.push({[t]:y.toISOString(),...e})}y=y.add(f,u)}return b},"genChartQuery",0,(e,t,a)=>{let r,o,i,n,l,d,[c,m]=(r=t.iso_timestamp_end?(0,s.default)(t.iso_timestamp_end):(0,s.default)(),o=t.iso_timestamp_start?(0,s.default)(t.iso_timestamp_start):(0,s.default)(),i="minute",n=360,l=r.diff(o,"minute"),d=r.diff(o,"hour"),l>720?(i="hour",n=120):d>72&&(i="day",n=7),[o.add(-n,i),i]),_=p(e,a),f=function(e){switch(e){case"edge_logs":case"function_edge_logs":return"response.status_code >= 500";case"postgres_logs":case"pg_cron_logs":return"parsed.error_severity IN ('ERROR', 'FATAL', 'PANIC')";case"auth_logs":return"metadata.level = 'error' OR SAFE_CAST(metadata.status AS INT64) >= 400";case"function_logs":return"metadata.level IN ('error', 'fatal')";default:return"false"}}(e),b=function(e){switch(e){case"edge_logs":case"function_edge_logs":return"response.status_code >= 400 AND response.status_code < 500";case"postgres_logs":return"parsed.error_severity IN ('WARNING')";case"auth_logs":return"metadata.level = 'warning'";case"function_logs":return"metadata.level IN ('warning')";default:return"false"}}(e);e===u.LogsTableName.PG_CRON&&(e=u.LogsTableName.POSTGRES,_=h);let y=g(e);return`
SELECT
-- log-event-chart
  timestamp_trunc(t.timestamp, ${m}) as timestamp,
  count(CASE WHEN NOT (${f} OR ${b}) THEN 1 END) as ok_count,
  count(CASE WHEN ${f} THEN 1 END) as error_count,
  count(CASE WHEN ${b} THEN 1 END) as warning_count,
FROM
  ${e} t
  ${y}
  ${_?_+` and t.timestamp > '${c.toISOString()}'`:`where t.timestamp > '${c.toISOString()}'`}
GROUP BY
timestamp
ORDER BY
  timestamp ASC
  `},"genCountQuery",0,(e,t)=>{let s=p(e,t);e===u.LogsTableName.PG_CRON&&(e=u.LogsTableName.POSTGRES,s=h);let a=g(e);return`SELECT count(*) as count FROM ${e} ${a} ${s}`},"genDefaultQuery",0,(e,t,s=100)=>{let a=p(e,t),r=g(e),o="order by timestamp desc";switch(e){case"edge_logs":if(!i.IS_PLATFORM)return`
-- local dev edge_logs query
select id, edge_logs.timestamp, event_message, request.method, request.path, request.search, response.status_code
from edge_logs
${r}
${a}
${o}
limit ${s};
`;return`select id, identifier, timestamp, event_message, request.method, request.path, request.search, response.status_code
  from ${e}
  ${r}
  ${a}
  ${o}
  limit ${s}
  `;case"postgres_logs":if(!i.IS_PLATFORM)return`
select postgres_logs.timestamp, id, event_message, parsed.error_severity, parsed.detail, parsed.hint
from postgres_logs
${r}
${a}
${o}
limit ${s}
  `;return`select identifier, postgres_logs.timestamp, id, event_message, parsed.error_severity, parsed.detail, parsed.hint from ${e}
  ${r}
  ${a}
  ${o}
  limit ${s}
  `;case"function_logs":return`select id, ${e}.timestamp, event_message, metadata.event_type, metadata.function_id, metadata.level from ${e}
  ${r}
  ${a}
  ${o}
  limit ${s}
    `;case"auth_logs":return`select id, ${e}.timestamp, event_message, metadata.level, metadata.status, metadata.path, metadata.msg as msg, metadata.error from ${e}
  ${r}
  ${a}
  ${o}
  limit ${s}
    `;case"function_edge_logs":if(!i.IS_PLATFORM)return`
select id, function_edge_logs.timestamp, event_message
from function_edge_logs
${o}
limit ${s}
`;return`select id, ${e}.timestamp, event_message, response.status_code, request.method, m.function_id, m.execution_time_ms, m.deployment_id, m.version from ${e}
  ${r}
  ${a}
  ${o}
  limit ${s}
  `;case"supavisor_logs":return`select id, ${e}.timestamp, event_message from ${e} ${r} ${a} ${o} limit ${s}`;case"pg_upgrade_logs":return`select id, ${e}.timestamp, event_message from ${e} ${r} ${a} ${o} limit 100`;default:return`select id, ${e}.timestamp, event_message from ${e}
  ${a}
  ${o}
  limit ${s}
  `;case"pg_cron_logs":let n=a?`${h} AND ${a.substring(6)}`:h;return`select id, postgres_logs.timestamp, event_message, parsed.error_severity, parsed.query
from postgres_logs
${r}
${n}
${o}
limit ${s}
`}},"genSingleLogQuery",0,(e,t)=>`select id, timestamp, event_message, metadata from ${e} where id = '${t}' limit 1`,"isDefaultLogPreviewFormat",0,e=>e&&e.timestamp&&e.event_message&&e.id,"isUnixMicro",0,c,"jwtAPIKey",()=>v,"maybeShowUpgradePrompt",0,(e,t)=>{let a=Math.abs((0,s.default)().diff((0,s.default)(e),"day"));return a>1&&"free"===t||a>7&&"pro"===t||a>28&&"team"===t||a>90&&"enterprise"===t},"maybeShowUpgradePromptIfNotEntitled",0,(e,t)=>!!t&&Math.abs((0,s.default)().diff((0,s.default)(e),"day"))>t,"role",()=>x,"unixMicroToIsoTimestamp",0,d,"useEditorHints",0,()=>{let e=(0,t.useMonaco)();(0,o.useEffect)(()=>{if(e){let t=e.languages.registerCompletionItemProvider("pgsql",{triggerCharacters:["`"," ","."],provideCompletionItems:function(t,s,a){let o=new n.default(t,s.column-2,s.lineNumber-1);if(o.isNextDQuote())return{suggestions:[]};let i=[],u=l.default.schemas.filter(e=>o._text.includes(e.reference));if(0===u.length&&(u=l.default.schemas),o.isNextPeriod()){let t=u.flatMap(e=>e.fields).flatMap(e=>{let[t,...s]=e.path.split(".");return s}).map(t=>({label:t,kind:e.languages.CompletionItemKind.Property,insertText:t}));i=i.concat(t)}if("`"===a.triggerCharacter||" "===a.triggerCharacter){let t=l.default.schemas.map(t=>({label:t.reference,kind:e.languages.CompletionItemKind.Class,insertText:t.reference})),s=u.flatMap(e=>e.fields).flatMap(e=>e.path.split(".").slice(0,-1)).map(t=>({label:t,kind:e.languages.CompletionItemKind.Property,insertText:t}));i=(i=i.concat(s)).concat(t)}return{suggestions:(0,r.default)(i,"label")}}});return()=>{t.dispose()}}},[e])}])}]);

//# debugId=6c78e6b1-921f-9445-4d93-106430f150f9
//# sourceMappingURL=4349cfd3227b94f5.js.map