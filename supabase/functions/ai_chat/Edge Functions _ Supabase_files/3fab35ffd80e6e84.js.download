;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="753c57f9-3ff9-dee0-5db3-6794127b354f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let n=({resourceText:e,isFullPage:n=!1})=>{let i=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return n?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(i,{})})}):(0,t.jsx)(i,{})};e.s(["NoPermission",0,n,"default",0,n])},547723,e=>{"use strict";var t=e.i(478902),a=e.i(389959),n=e.i(843778);let i=(0,a.forwardRef)((e,a)=>(0,t.jsx)("nav",{ref:a,dir:"ltr",...e,className:(0,n.cn)("border-b",e.className),children:(0,t.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),r=(0,a.forwardRef)(({children:e,className:a,active:i,...r},s)=>(0,t.jsx)("li",{ref:s,"aria-selected":i?"true":"false","data-state":i?"active":"inactive",className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",a),...r,children:e}));e.s(["NavMenu",0,i,"NavMenuItem",0,r])},862326,e=>{"use strict";var t=e.i(478902),a=e.i(938933),n=e.i(843778);function i({children:e,className:a,tag:n="div",style:i}){let r=`${n}`;return(0,t.jsx)(r,{style:i,children:e})}i.Title=function({className:e,level:a=1,children:n,style:i}){let r=`h${a}`;return(0,t.jsx)(r,{style:i,children:n})},i.Text=function({className:e,children:a,style:n,type:i,disabled:r,mark:s,code:l,keyboard:c,underline:o,strikethrough:d,strong:u,small:f}){return l?(0,t.jsx)("code",{style:n,children:a}):s?(0,t.jsx)("mark",{style:n,children:a}):c?(0,t.jsx)("kbd",{style:n,children:a}):u?(0,t.jsx)("strong",{style:n,children:a}):(0,t.jsx)("span",{style:n,children:a})},i.Link=function({children:e,target:a="_blank",href:n,className:i,onClick:r,style:s}){return(0,t.jsx)("a",{onClick:r,href:n,target:a,rel:"noopener noreferrer",style:s,children:e})};var r=e.i(389959);let s=(0,r.createContext)({type:"text"}),l=e=>{let{type:a}=e;return(0,t.jsx)(s.Provider,{value:{type:a},children:e.children})},c=()=>{let e=(0,r.useContext)(s);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function o({children:e,className:a,ulClassName:n,style:i,type:r="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:i,children:(0,t.jsx)(l,{type:r,children:(0,t.jsx)("ul",{className:n,children:e})})})}o.Item=function({children:e,icon:i,active:r,rounded:s,onClick:l,doNotCloseOverlay:o=!1,showActiveBar:d=!1,style:u}){let f=(0,a.default)("menu"),{type:m}=c(),h=[f.item.base];h.push(f.item.variants[m].base),r?h.push(f.item.variants[m].active):h.push(f.item.variants[m].normal);let p=[f.item.content.base];r?p.push(f.item.content.active):p.push(f.item.content.normal);let g=[f.item.icon.base];return r?g.push(f.item.icon.active):g.push(f.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,n.cn)("outline-none",h),style:u,onClick:l,"aria-current":r?"page":void 0,children:[i&&(0,t.jsx)("div",{className:`${g.join(" ")} min-w-fit`,children:i}),(0,t.jsx)("span",{className:p.join(" "),children:e})]})},o.Group=function({children:e,icon:n,title:i}){let r=(0,a.default)("menu"),{type:s}=c();return(0,t.jsxs)("div",{className:[r.group.base,r.group.variants[s]].join(" "),children:[n&&(0,t.jsx)("span",{className:r.group.icon,children:n}),(0,t.jsx)("span",{className:r.group.content,children:i}),e]})},o.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(i.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["Menu",0,o],862326)},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),n=e.i(862326),i=e.i(215261),r=e.i(837710);let s=({name:e="",isActive:s,isExternal:l,icon:c,rightIcon:o,url:d="",target:u="_self",onClick:f,textClassName:m="",hoverText:h="",label:p})=>{let g=(0,t.jsx)(n.Menu.Item,{icon:c,rounded:!0,active:s,onClick:f,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:h||("string"==typeof e?e:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:e}),void 0!==p&&(0,t.jsx)(a.Badge,{variant:"new"===p.toLowerCase()?"success":"warning",className:"flex-shrink-0",children:p})]}),o&&(0,t.jsx)("div",{children:o})]})});return d?l?(0,t.jsx)(r.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,t.jsx)(i.default,{href:d,target:"_blank",rel:"noreferrer",children:e})}):(0,t.jsx)(i.default,{href:d,className:"block",target:u,children:g}):g};e.s(["default",0,s],799793),e.s(["ProductMenu",0,({page:e,menu:i})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(n.Menu,{type:"pills",children:i.map((r,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(n.Menu.Group,{title:r.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:r.title}),r.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:r.items.map(a=>{let n=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(s,{url:a.url,name:a.name,icon:a.icon,rightIcon:a.rightIcon,isActive:n,isExternal:a.isExternal,target:a.isExternal?"_blank":"_self",label:a.label},a.key)})})]})}),l!==i.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},r.key||r.title))})})],388147)},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),n=e.i(933505);e.s(["ChevronRightIcon",()=>n.default],100387);var n=n,i=e.i(389959),r=e.i(843778);let s=i.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));s.displayName="Breadcrumb";let l=i.forwardRef(({className:e,...a},n)=>(0,t.jsx)("ol",{ref:n,className:(0,r.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));l.displayName="BreadcrumbList";let c=i.forwardRef(({className:e,...a},n)=>(0,t.jsx)("li",{ref:n,className:(0,r.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));c.displayName="BreadcrumbItem";let o=i.forwardRef(({asChild:e,className:n,...i},s)=>{let l=e?a.Slot:"a";return(0,t.jsx)(l,{ref:s,className:(0,r.cn)("transition-colors underline lg:no-underline hover:text-foreground",n),...i})});o.displayName="BreadcrumbLink";let d=i.forwardRef(({className:e,...a},n)=>(0,t.jsx)("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:(0,r.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...i})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,r.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...i,children:e??(0,t.jsx)(n.default,{})});u.displayName="BreadcrumbSeparator",e.s(["Breadcrumb",()=>s,"BreadcrumbItem",()=>c,"BreadcrumbLink",()=>o,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),n=e.i(389959),i=e.i(843778);let r=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),s=(0,n.forwardRef)(({className:e,size:a,...n},s)=>(0,t.jsx)("div",{ref:s,...n,className:(0,i.cn)(r({size:a}),e)}));s.displayName="PageContainer",e.s(["PageContainer",0,s])},456050,e=>{"use strict";var t=e.i(478902),a=e.i(709520),n=e.i(389959),i=e.i(843778),r=e.i(3259),s=e.i(127739);let l=(0,a.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),c=(0,n.createContext)({size:"default"}),o=()=>(0,n.useContext)(c),d=({className:e,size:a,children:n,...r})=>{let s=a??"default";return(0,t.jsx)(c.Provider,{value:{size:s},children:(0,t.jsx)("div",{"data-slot":"page-header","data-size":s,className:(0,i.cn)(l({size:s}),e),...r,children:n})})},u=({className:e,children:a,...n})=>{let{size:l}=o();return(0,t.jsx)(s.PageContainer,{size:l,children:(0,t.jsx)(r.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,i.cn)("flex items-center gap-4 [&_li]:text-xs",e),...n,children:a})})};u.displayName="PageHeaderBreadcrumb";let f=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-icon",className:(0,i.cn)("text-foreground-light",e),...a});f.displayName="PageHeaderIcon";let m=({className:e,children:a,...n})=>(0,t.jsx)("div",{"data-slot":"page-header-summary",className:(0,i.cn)("flex flex-col gap-1",e),...n,children:a});m.displayName="PageHeaderSummary";let h=({className:e,children:a,...n})=>(0,t.jsx)("h1",{"data-slot":"page-header-title",className:(0,i.cn)("heading-title",e),...n,children:a}),p=({className:e,children:a,...n})=>(0,t.jsx)("div",{"data-slot":"page-header-description",className:(0,i.cn)("heading-subSection text-foreground-light",e),...n,children:a}),g=({className:e,children:a,...n})=>{let{size:r}=o();return(0,t.jsx)(s.PageContainer,{size:r,children:(0,t.jsx)("div",{"data-slot":"page-header-meta",className:(0,i.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...n,children:a})})};g.displayName="PageHeaderMeta";let x=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-actions",className:(0,i.cn)("flex items-center gap-2 shrink-0",e),...a});x.displayName="PageHeaderAside";let j=({className:e,...a})=>{let{size:n}=o();return(0,t.jsx)(s.PageContainer,{size:n,className:(0,i.cn)("full"===n&&"border-b"),children:(0,t.jsx)("div",{"data-slot":"page-header-footer",className:(0,i.cn)("w-full [&>nav]:border-b-0","full"!==n&&"border-b",e),...a})})};j.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>x,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>p,"PageHeaderIcon",()=>f,"PageHeaderMeta",()=>g,"PageHeaderNavigationTabs",()=>j,"PageHeaderSummary",()=>m,"PageHeaderTitle",()=>h])},42081,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:n=3,redaction:i="[REDACTED]",truncationNotice:r="[REDACTED: max depth reached]",sensitiveKeys:s=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...s].map(e=>e.toLowerCase())),c=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],o=new WeakMap;function d(e){let t=e;for(let{re:e}of c)t=t.replace(e,i);return t}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=n)return r;if("object"==typeof t){if(o.has(t))return"[Circular]";if(Array.isArray(t)){let n=[];o.set(t,n);for(let i=0;i<t.length;i++)n[i]=e(t[i],a+1);return n}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let n={};for(let[r,s]of(o.set(t,n),Object.entries(t)))u(r)?n[r]=i:n[r]=e(s,a+1);return n}if(t instanceof Map){let n=[];for(let[r,s]of(o.set(t,n),t.entries())){let t=u(r)?i:e(r,a+1),l=u(r)?i:e(s,a+1);n.push([t,l])}return n}if(t instanceof Set){let n=[];for(let i of(o.set(t,n),t.values()))n.push(e(i,a+1));return n}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:r};return o.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},437746,e=>{"use strict";let t=(0,e.i(388019).default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);e.s(["File",()=>t],437746)},613983,e=>{"use strict";var t=e.i(478902),a=e.i(809323),n=e.i(265100),i=e.i(53071),r=e.i(437746),s=e.i(479232),l=e.i(211570),c=e.i(389959),o=e.i(145797),d=e.i(355901),u=e.i(837710),f=e.i(62307),m=e.i(756441),h=e.i(917134),p=e.i(644131),g=e.i(794965),x=e.i(920748),j=e.i(792459);let b=e=>["wasm","jpg","jpeg","png","gif","bmp","ico","svg","mp3","mp4","avi","mov","zip","rar","7z","tar","gz","bz2","pdf"].includes(e.split(".").pop()?.toLowerCase()||""),v=JSON.stringify({imports:{}},null,"	");e.s(["FileExplorerAndEditor",0,({files:e,onFilesChange:y,aiEndpoint:k,aiMetadata:N})=>{let w=e.find(e=>e.selected)??e[0],[_,P]=(0,c.useState)(!1),[C,S]=(0,c.useState)({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id}}))}),A=async t=>{let a=[],n=e.map(e=>({...e,selected:!1}));for(let n=0;n<t.length;n++){let i=t[n],r=Math.max(0,...e.map(e=>e.id),...a.map(e=>e.id))+1;try{let e;if(b(i.name)){let t=await i.arrayBuffer(),a=new Uint8Array(t);e=Array.from(a,e=>String.fromCharCode(e)).join("")}else e=await i.text();a.push({id:r,name:i.name,content:e,selected:n===t.length-1})}catch(e){console.error(`Failed to read file ${i.name}:`,e)}}a.length>0&&y([...n,...a])},E=t=>{S({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:e.id===t,originalId:e.id}}))})},z=()=>{S({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id}}))})},B=async e=>{e.preventDefault(),P(!1);let t=e.dataTransfer.files;t.length>0&&await A(t)};return(0,c.useEffect)(()=>{S({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id}}))})},[e]),(0,t.jsxs)("div",{className:`flex-1 overflow-hidden flex h-full relative ${_?"bg-blue-50":""}`,onDragOver:e=>{e.preventDefault(),P(!0)},onDragLeave:e=>{e.preventDefault(),P(!1)},onDrop:B,children:[(0,t.jsx)(a.AnimatePresence,{children:_&&(0,t.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"absolute inset-0 bg bg-opacity-30 z-10 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-96 py-20 bg bg-opacity-60 border-2 border-dashed border-muted flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-base",children:"Drop files here to add them"})})})}),(0,t.jsxs)("div",{className:"w-64 border-r bg-surface-200 flex flex-col",children:[(0,t.jsxs)("div",{className:"py-4 px-6 border-b flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-normal font-mono uppercase text-lighter tracking-wide",children:"Files"}),(0,t.jsx)(u.Button,{size:"tiny",type:"default",icon:(0,t.jsx)(s.Plus,{size:14}),onClick:()=>{let t=Math.max(0,...e.map(e=>e.id))+1;y([...e.map(e=>({...e,selected:!1})),{id:t,name:`file${t}.ts`,content:"",selected:!0}])},children:"Add File"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)(j.TreeView,{data:(0,x.flattenTree)(C),"aria-label":"files tree",nodeRenderer:({element:a,isBranch:n,isExpanded:s,getNodeProps:c,level:o})=>{let u=c(),x="number"==typeof a.metadata?.originalId?a.metadata.originalId:null;return(0,t.jsxs)(f.ContextMenu_Shadcn_,{modal:!1,children:[(0,t.jsx)(g.ContextMenuTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)("div",{children:(0,t.jsx)(j.TreeViewItem,{...u,isExpanded:s,isBranch:n,isSelected:e.find(e=>e.id===x)?.selected,level:o,xPadding:16,name:a.name,icon:(0,t.jsx)(r.File,{size:14,className:"text-foreground-light shrink-0"}),isEditing:!!a.metadata?.isEditing,onEditSubmit:t=>{null!==x&&(t.trim()?e.some(e=>e.id!==x&&e.name===t)?(d.toast.error(`The name ${t} already exists in the current directory. Please use a different name.`),z()):y(e.map(e=>e.id===x?{...e,name:t,content:"deno.json"===t&&""===e.content?v:e.content}:e)):(d.toast.error("File name cannot be empty"),z()))},onClick:()=>{null===x||a.metadata?.isEditing||y(e.map(e=>({...e,selected:e.id===x})))},onDoubleClick:()=>{null!==x&&E(x)}})})}),(0,t.jsxs)(m.ContextMenuContent_Shadcn_,{onCloseAutoFocus:e=>e.stopPropagation(),children:[(0,t.jsxs)(h.ContextMenuItem_Shadcn_,{className:"gap-x-2",onSelect:()=>{null!==x&&E(x)},onFocusCapture:e=>e.stopPropagation(),children:[(0,t.jsx)(i.Edit,{size:14}),"Rename file"]}),e.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.ContextMenuSeparator_Shadcn_,{}),(0,t.jsxs)(h.ContextMenuItem_Shadcn_,{className:"gap-x-2",onSelect:()=>{null!==x&&(t=>{if(e.length<=1)return;let a=e.find(e=>e.id===t),n=a?.selected,i=e.filter(e=>e.id!==t);n&&i.length>0&&(i[0].selected=!0),y(i)})(x)},onFocusCapture:e=>e.stopPropagation(),children:[(0,t.jsx)(l.Trash,{size:14}),"Delete file"]})]})]})]})}})})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 relative px-3 bg-surface-200",children:w&&b(w.name)?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-foreground-light text-lg mb-2",children:"Cannot Edit Selected File"}),(0,t.jsxs)("div",{className:"text-foreground-lighter text-sm",children:["Binary files like .",w.name.split(".").pop()," cannot be edited in the text editor"]})]})}):(0,t.jsx)(o.default,{language:(e=>{switch(e.split(".").pop()?.toLowerCase()){case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"html":return"html";case"css":return"css";case"md":return"markdown";case"csv":return"csv";default:return"plaintext"}})(w?.name||"index.ts"),value:w?.content,onChange:t=>{y(e.map(e=>e.id===w.id?{...e,content:t}:e))},aiEndpoint:k,aiMetadata:N,options:{tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:20,bottom:20},lineNumbersMinChars:3,fixedOverflowWidgets:!0}})})]})}],613983)},24137,e=>{"use strict";var t=e.i(478902);function a(e){if("string"!=typeof e)throw TypeError(`Path must be a string, received "${JSON.stringify(e)}"`)}function n(e){return 47===e}function i(e){a(r=e),r.length;let t=-1,i=!1;for(let a=e.length-1;a>=1;--a)if(n(e.charCodeAt(a))){if(i){t=a;break}}else i=!0;if(-1===t)return n(e.charCodeAt(0))?"/":".";var r,s=e.slice(0,t);if(s.length<=1)return s;let l=s.length;for(let e=s.length-1;e>0;e--)if(n(s.charCodeAt(e)))l=e;else break;return s.slice(0,l)}function r(...e){let t="",i=!1;for(let r=e.length-1;r>=-1&&!i;r--){let s;if(r>=0)s=e[r];else{let{Deno:e}=globalThis;if("function"!=typeof e?.cwd)throw TypeError("Resolved a relative path without a current working directory (CWD)");s=e.cwd()}a(s),0!==s.length&&(t=`${s}/${t}`,i=n(s.charCodeAt(0)))}if(t=function(e,t,a,n){let i,r="",s=0,l=-1,c=0;for(let a=0;a<=e.length;++a){if(a<e.length)i=e.charCodeAt(a);else if(n(i))break;else i=47;if(n(i)){if(l===a-1||1===c);else if(l!==a-1&&2===c){if(r.length<2||2!==s||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2)){if(r.length>2){let e=r.lastIndexOf("/");-1===e?(r="",s=0):s=(r=r.slice(0,e)).length-1-r.lastIndexOf("/"),l=a,c=0;continue}else if(2===r.length||1===r.length){r="",s=0,l=a,c=0;continue}}t&&(r.length>0?r+="/..":r="..",s=2)}else r.length>0?r+="/"+e.slice(l+1,a):r=e.slice(l+1,a),s=a-l-1;l=a,c=0}else 46===i&&-1!==c?++c:c=-1}return r}(t,!i,0,n),i)if(t.length>0)return`/${t}`;else return"/";return t.length>0?t:"."}var s=e.i(902858),l=e.i(867637),c=e.i(136544),o=e.i(774803),d=e.i(389959),u=e.i(355901);e.i(128328);var f=e.i(158639),m=e.i(466472);let h=({visible:e,onCancel:a,onConfirm:n,isDeploying:i})=>(0,t.jsx)(m.default,{visible:e,size:"medium",title:"Confirm to deploy updates",confirmLabel:"Deploy updates",confirmLabelLoading:"Deploying updates",variant:"warning",loading:i,onCancel:a,onConfirm:n,children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Deploying will immediately update your live Edge Function for this project and cannot be rolled back automatically. Are you sure you want to deploy the changes?"})});var p=e.i(448710),g=e.i(780990),x=e.i(215312),j=e.i(613983),b=e.i(229914),v=e.i(445547),y=e.i(139415),k=e.i(162082),N=e.i(2579),w=e.i(265735),_=e.i(635494),P=e.i(10429),C=e.i(818843);let S=()=>{let{ref:e,functionSlug:m}=(0,f.useParams)(),{data:p}=(0,_.useSelectedProjectQuery)(),{data:g}=(0,w.useSelectedOrganizationQuery)(),{mutate:S}=(0,k.useSendEventMutation)(),[A,E]=(0,d.useState)(!1),{can:z}=(0,N.useAsyncCheckPermissions)(s.PermissionAction.FUNCTIONS_WRITE,"*"),{data:B}=(0,v.useEdgeFunctionQuery)({projectRef:e,slug:m}),{data:T,isPending:M,isError:I,isSuccess:D,error:F}=(0,b.useEdgeFunctionBodyQuery)({projectRef:e,slug:m},{retry:!1,retryOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:!1,refetchIntervalInBackground:!1}),[R,L]=(0,d.useState)([]),{mutate:O,isPending:H}=(0,y.useEdgeFunctionDeployMutation)({onSuccess:()=>{u.toast.success("Successfully updated edge function"),E(!1)}}),U=e=>!!e&&R.some(t=>t.name===e),$=async()=>{if(!H&&e&&m&&B&&0!==R.length)try{let t=T?.metadata?.deno2_entrypoint_path??B.entrypoint_path,a=t?.split("/").pop(),n=B.import_map_path?.split("/").pop(),i=U(a),r=U(n);O({projectRef:e,slug:B.slug,metadata:{name:B.name,verify_jwt:B.verify_jwt,...i&&{entrypoint_path:a},...r&&{import_map_path:n}},files:R.map(({name:e,content:t})=>({name:e,content:t}))})}catch(e){u.toast.error(`Failed to update function: ${e instanceof Error?e.message:"Unknown error"}`)}};return(0,d.useEffect)(()=>{if(!T)return;let e=T.metadata?.deno2_entrypoint_path??B?.entrypoint_path;if(e){let t=function(e,t){if(!e)return"/";let a=t.find(t=>e.endsWith(t));if(a)return i(a);try{return i(new URL(e).pathname)}catch(t){return console.error("Failed to parse entrypoint",e),"/"}}(e,T.files.map(e=>e.name)),s=T.files.map(e=>{try{var i;let s=(i=[t,e.name],function(e,t){let[a="",...n]=e,i=a.split("/"),r=i.length,s="";for(let e of n){let t=e.split("/");t.length<=r&&(r=t.length,s="");for(let e=0;e<r;e++)if(t[e]!==i[e]){r=e,s=0===e?"":"/";break}}return i.slice(0,r).join("/")+s}(i,0));if(""===s||"/tmp/"===s)return e;return e.name=function(e,t){var i,s;if(i=e,s=t,a(i),a(s),(e=r(e))===(t=r(t)))return"";let l=1,c=e.length;for(;l<c&&n(e.charCodeAt(l));++l);let o=c-l,d=1,u=t.length;for(;d<u&&n(t.charCodeAt(d));++d);let f=u-d,m=o<f?o:f,h=-1,p=0;for(;p<=m;++p){if(p===m){if(f>m){if(n(t.charCodeAt(d+p)))return t.slice(d+p+1);else if(0===p)return t.slice(d+p)}else o>m&&(n(e.charCodeAt(l+p))?h=p:0===p&&(h=0));break}let a=e.charCodeAt(l+p);if(a!==t.charCodeAt(d+p))break;n(a)&&(h=p)}let g="";for(p=l+h+1;p<=c;++p)(p===c||n(e.charCodeAt(p)))&&(0===g.length?g+="..":g+="/..");return g.length>0?g+t.slice(d+h):(d+=h,n(t.charCodeAt(d))&&++d,t.slice(d))}("/"+t,"/"+e.name),e}catch(t){return console.error(t),e}});L(e=>s.map((t,a)=>{let n=e.find(e=>e.name===t.name);return{id:a+1,name:t.name,content:t.content,selected:n?.selected??0===a}}))}},[T]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[M&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full bg-surface-200",children:(0,t.jsx)(C.LogoLoader,{})}),I&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full bg-surface-200",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center gap-2 max-w-md",children:[(0,t.jsx)(l.AlertCircle,{size:24,strokeWidth:1.5,className:"text-amber-900"}),(0,t.jsx)("h3",{className:"text-md mt-4",children:"Failed to load function code"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:F?.message||"There was an error loading the function code. The format may be invalid or the function may be corrupted."})]})}),D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.FileExplorerAndEditor,{files:R,onFilesChange:L,aiEndpoint:`${P.BASE_PATH}/api/ai/code/complete`,aiMetadata:{projectRef:p?.ref,connectionString:p?.connectionString,orgSlug:g?.slug}}),(0,t.jsx)("div",{className:"flex items-center bg-background-muted justify-end p-4 border-t bg-surface-100 shrink-0",children:(0,t.jsx)(x.ButtonTooltip,{loading:H,size:"medium",disabled:!z||0===R.length||M,onClick:()=>{0===R.length||M||(E(!0),S({action:"edge_function_deploy_updates_button_clicked",groups:{project:e??"Unknown",organization:g?.slug??"Unknown"}}))},iconRight:H?(0,t.jsx)(o.Loader2,{className:"animate-spin",size:10,strokeWidth:1.5}):(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsx)(c.CornerDownLeft,{size:10,strokeWidth:1.5})}),tooltip:{content:{side:"top",text:z?void 0:"You need additional permissions to update edge functions"}},children:"Deploy updates"})})]}),(0,t.jsx)(h,{visible:A,onCancel:()=>E(!1),onConfirm:()=>{S({action:"edge_function_deploy_updates_confirm_clicked",groups:{project:e??"Unknown",organization:g?.slug??"Unknown"}}),$()},isDeploying:H})]})};S.getLayout=e=>(0,t.jsx)(p.default,{children:(0,t.jsx)(g.default,{children:e})}),e.s(["default",0,S],24137)},16258,(e,t,a)=>{let n="/project/[ref]/functions/[functionSlug]/code";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(24137)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},587525,e=>{e.v(t=>Promise.all(["static/chunks/da2f61ca91d09b7f.js"].map(t=>e.l(t))).then(()=>t(127351)))},168845,e=>{e.v(t=>Promise.all(["static/chunks/99714db866f77205.js"].map(t=>e.l(t))).then(()=>t(238625)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/df8f2d32c834951d.js","static/chunks/82dddbda1a808189.js","static/chunks/d3a06a9a43f3833e.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))}]);

//# debugId=753c57f9-3ff9-dee0-5db3-6794127b354f
//# sourceMappingURL=edb2a7be7c50acb8.js.map